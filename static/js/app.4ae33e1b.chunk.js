(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[132],{190:function(e,a,t){e.exports={container:"App_container__2zgzu",sidebar:"App_sidebar__10tAV",content:"App_content__3I8HS"}},191:function(e){e.exports=JSON.parse('{"Are you sure you want to cancel? Unsaved changes will be lost":"","No, stay on page":"","Yes, cancel":"","Dataset":"","Confirm deletion":"","Are you sure you want to delete the selected gateways?":"","Auth token":"","Name":"","Password":"","Url template":"","User name":"","Add key value pair":"","Save gateway":"","Add gateway":"","Cancel":"","Gateway setup":"","Key value pairs":"","Key value pairs can be included in the URL. This is some helper text which provides an intro to what the key value pairs actually do.":"","Key":"","Value":"","Send as header":"","Encode":"","Confidential":"","Remove key value pair":"","Type":"","Make default":"","Default gateway":"","Edit":"","BulkSMS":"","Clickatell":"","Generic":"","Program":"","Program stage":"","Are you sure you want to delete the selected commands?":"","Delete":"","Save command":"","Something went wrong whilst submitting the form":"","Something went wrong whilst loading the sms command":"","Something went wrong whilst loading the command\'s details":"","SMS short codes":"","Add special character":"","Required values notice":"","Completeness method":"","Confirm message":"","Reply message if no codes are sent (only the command)":"","More than one orgunit message":"","No user message":"","Parser":"","Field separator":"","Special character name":"","Special character value":"","Remove":"","Success message":"","Use current period for reporting":"","Wrong format message":"","default":"","Loading formula":"","Formula":"","Edit formula":"","Add formula":"","Formula for {{combo}}":"","Data element":"","formula operator":"","Something went wrong whilst saving":"","Save":"","Receive all data values":"","Receive at least one data value":"","Do not mark as complete":"","Key value parser":"","J2ME parser":"","Alert parser":"","Unregistered parser":"","Tracked entity registration parser":"","Program stage data entry parser":"","Event registration parser":"","Duplicate value!":"","Special characters":"","Usergroup":"","Something went wrong whilst loading gateways":"","Edit gateway":"","Something went wrong whilst saving gateways":"","Gateway not found":"","The requested gateway could not be loaded":"","Something went wrong whilst saving the gateway":"","Something went wrong whilst performing the requested operation":"","An SMS gateway lets a DHIS2 instance send and receive SMS messages. Different gateway types can be added and configured below. At least one gateway is needed to send and receive SMS messages. Load balancing will use all gateways if there are multiple available. Read about gateway configuration in the DHIS2 documentation.":"","Delete selected":"","No gateways found":"","It looks like there aren\'t any configured gateways, or they couldn\'t be loaded.":"","Overview: SMS Configuration":"","Configure settings for SMS sending, receiving, data reporting, alerts, registration and more.":"","Gateway Configuration":"","Add and manage gateways for sending and receiving SMS messages in DHIS2.":"","Set up gateways":"","SMS Commands":"","Add and manage commands triggered by incoming SMS messages to register, alert and more.":"","Set up SMS commands":"","Sent SMS messages":"","Open logs of all SMS messages sent from DHIS2.":"","View all sent SMS":"","Received SMS messages":"","Open logs of all SMS messages received by DHIS2.":"","View all received SMS":"","Filter by status":"","Filter by phone number":"","Filter":"","Show":"","per page":"","Viewing {{firstItem}}-{{lastItem}} of {{total}}":"","Previous":"","Page":"","of {{pageCount}}":"","Next":"","Something went wrong whilst loading received SMSes":"","Message":"","Phone number":"","Status":"","Sender":"","Date":"","No SMSes to display":"","Unknown":"","Received":"","All":"","Failed":"","Incoming":"","Processed":"","Processing":"","Sent":"","Unhandled":"","Something went wrong whilst loading sent SMSes":"","Recipients":"","Delivered":"","Error":"","Outbound":"","Pending":"","Scheduled":"","Something went wrong whilst loading commands":"","Edit command":"","Unrecognised parser type":"","Could not find the requested parser type":"","Add command":"","Commands":"","SMS commands process SMS messages received by a DHIS2 instance, taking certain actions depending on the command and message content. Multiple SMS commands can be set up to process and handle data in multiple ways. Add and configure SMS commands below. Read about SMS commands in the DHIS2 documentation.":"","Sms command":"","No commands to display":""}')},192:function(e,a,t){e.exports={headline:"PageHeadline_headline__1llN5"}},193:function(e,a,t){e.exports={subHeadline:"PageSubHeadline_subHeadline__2c8Kn"}},194:function(e,a,t){e.exports={container:"Home_container__ODQuA",explanation:"Home_explanation__10no3",grid:"Home_grid__31J-5",gridItem:"Home_gridItem__1gOsm"}},195:function(e,a,t){e.exports={container:"HomeCard_container__1TCqS",title:"HomeCard_title__1sPYs",body:"HomeCard_body__2ubR4",linkContainer:"HomeCard_linkContainer__2dWlg",link:"HomeCard_link__QjOag"}},201:function(e,a,t){e.exports={button:"GatewayAddKeyValuePair_button__3hPEY"}},202:function(e,a,t){e.exports={formRow:"FormRow_formRow__3ALDU"}},203:function(e,a,t){e.exports={paragraph:"Paragraph_paragraph__3yubY"}},204:function(e,a,t){e.exports={container:"GatewayKeyValuePair_container__D-LyM",textInputs:"GatewayKeyValuePair_textInputs__dJAb3",keyInput:"GatewayKeyValuePair_keyInput__2WHV_",valueInput:"GatewayKeyValuePair_valueInput__1uRVv",checkboxGroup:"GatewayKeyValuePair_checkboxGroup__2k2Cu",checkbox:"GatewayKeyValuePair_checkbox__2hg0g"}},205:function(e,a,t){e.exports={container:"GatewayConfigFormEdit_container__1d38w"}},206:function(e,a,t){e.exports={rowActions:"GatewaysTable_rowActions__2fK3j",checkboxCell:"GatewaysTable_checkboxCell__3uvd3",typeCell:"GatewaysTable_typeCell__Qx_fl",editCell:"GatewaysTable_editCell__3mzrM",defaultCell:"GatewaysTable_defaultCell__1huny",makeDefaultButton:"GatewaysTable_makeDefaultButton__3gFiv",isDefaultText:"GatewaysTable_isDefaultText__15qyD"}},207:function(e,a,t){e.exports={container:"GatewayList_container__jCYee",processingMessage:"GatewayList_processingMessage__1RE2H",loadingContainer:"GatewayList_loadingContainer__7veW4"}},208:function(e,a,t){e.exports={container:"GatewayConfigFormNew_container__pJ1_K"}},209:function(e,a,t){e.exports={container:"ListActions_container__2mPW8"}},210:function(e,a,t){e.exports={container:"GatewayConfigList_container__3BZQo",actions:"GatewayConfigList_actions__yMRge"}},211:function(e,a,t){e.exports={container:"Filter_container__zWNRg",inputStrip:"Filter_inputStrip__28I4q"}},212:function(e,a,t){e.exports={container:"Pagination_container__1oOhc",verticalAlign:"Pagination_verticalAlign__2xbtG",select:"Pagination_select__39auA",buttonPrevious:"Pagination_buttonPrevious__SXF81",buttonNext:"Pagination_buttonNext__1HLDE",summary:"Pagination_summary__2dp6R"}},213:function(e,a,t){e.exports={noResults:"SmsTable_noResults__1t04p",originator:"SmsTable_originator__22EFE"}},214:function(e,a,t){e.exports={container:"ReceivedSmsList_container__vRAw_",topBar:"ReceivedSmsList_topBar__2qRs6"}},215:function(e,a,t){e.exports={container:"CommandFormActions_container__1p4Rc"}},216:function(e,a,t){e.exports={formulaInWords:"FieldDataElementWithCategoryOptionComboAddFormulaButton_formulaInWords__1t-9F",formulaInWordsLabel:"FieldDataElementWithCategoryOptionComboAddFormulaButton_formulaInWordsLabel__ZsD-J"}},217:function(e,a,t){e.exports={container:"FieldDataElementWithCategoryOptionCombo_container__2h1m8",field:"FieldDataElementWithCategoryOptionCombo_field__mnPuJ",codeField:"FieldDataElementWithCategoryOptionCombo_codeField__1wHw_"}},218:function(e,a,t){e.exports={formRow:"DataElementTimesCategoryOptionCombos_formRow__TGwSL"}},219:function(e,a,t){e.exports={container:"FieldCommandSpecialCharacter_container__2Vgvs",field:"FieldCommandSpecialCharacter_field__-1mZE",button:"FieldCommandSpecialCharacter_button__2XK2-"}},220:function(e,a,t){e.exports={container:"SmsCommandFormEdit_container__2r8xI"}},221:function(e,a,t){e.exports={container:"SmsCommandFormNew_container__34D_E"}},222:function(e,a,t){e.exports={container:"SmsCommandList_container__2tb7Z",editButtonCell:"SmsCommandList_editButtonCell__1OBCC",checkbox:"SmsCommandList_checkbox__1mJm5",noResults:"SmsCommandList_noResults__j0ImP"}},223:function(e,a,t){e.exports={recipient:"SmsTableItem_recipient__2d7vB"}},224:function(e,a,t){e.exports={container:"Pagination_container__2LAE2",left:"Pagination_left__1ff2z",right:"Pagination_right__2Py4F",amount:"Pagination_amount__19_-8",pageselection:"Pagination_pageselection__27-Pj"}},225:function(e,a,t){e.exports={noResults:"SmsTable_noResults__rTkg-"}},226:function(e,a,t){e.exports={container:"SentSmsList_container__2FUki",header:"SentSmsList_header__3biA5",headerRight:"SentSmsList_headerRight__XinlM"}},227:function(e,a,t){e.exports={item:"NavigationItem_item__3hR7s"}},231:function(e,a,t){"use strict";t.r(a);var n={};t.r(n),t.d(n,"ALL_DATAVALUE",(function(){return Ja})),t.d(n,"AT_LEAST_ONE_DATAVALUE",(function(){return Wa})),t.d(n,"DO_NOT_MARK_COMPLETE",(function(){return Ya}));var l={};t.r(l),t.d(l,"KEY_VALUE_PARSER",(function(){return an})),t.d(l,"J2ME_PARSER",(function(){return tn})),t.d(l,"ALERT_PARSER",(function(){return nn})),t.d(l,"UNREGISTERED_PARSER",(function(){return ln})),t.d(l,"TRACKED_ENTITY_REGISTRATION_PARSER",(function(){return rn})),t.d(l,"PROGRAM_STAGE_DATAENTRY_PARSER",(function(){return sn})),t.d(l,"EVENT_REGISTRATION_PARSER",(function(){return on}));var r={};t.r(r),t.d(r,"CommandsAddSpecialCharacters",(function(){return Ka})),t.d(r,"ALL_DATAVALUE",(function(){return Ja})),t.d(r,"AT_LEAST_ONE_DATAVALUE",(function(){return Wa})),t.d(r,"DO_NOT_MARK_COMPLETE",(function(){return Ya})),t.d(r,"DataElementTimesCategoryOptionCombos",(function(){return Ut})),t.d(r,"FieldCommandCompletenessMethod",(function(){return Bt})),t.d(r,"FieldCommandConfirmMessage",(function(){return Kt})),t.d(r,"FieldCommandDefaultMessage",(function(){return Wt})),t.d(r,"FieldCommandMoreThanOneOrgUnitMessage",(function(){return Qt})),t.d(r,"FieldCommandName",(function(){return Xt})),t.d(r,"FieldCommandNoUserMessage",(function(){return en})),t.d(r,"FieldCommandParser",(function(){return dn})),t.d(r,"FieldCommandSeparator",(function(){return gn})),t.d(r,"FieldCommandSmsCode",(function(){return fn})),t.d(r,"FieldCommandSpecialCharacter",(function(){return Cn})),t.d(r,"FieldCommandSuccessMessage",(function(){return _n})),t.d(r,"FieldCommandUseCurrentPeriodForReporting",(function(){return On})),t.d(r,"FieldCommandWrongFormatMessage",(function(){return Tn})),t.d(r,"FieldDataElementWithCategoryOptionCombo",(function(){return xt})),t.d(r,"FieldDataElementWithCategoryOptionComboFormula",(function(){return At})),t.d(r,"FIELD_COMMAND_COMPLETENESS_METHOD_NAME",(function(){return ka})),t.d(r,"FIELD_COMMAND_DEFAULT_MESSAGE_NAME",(function(){return Ma})),t.d(r,"FIELD_COMMAND_ID_NAME",(function(){return Ra})),t.d(r,"FIELD_COMMAND_MORE_THAN_ONE_ORG_UNIT_MESSAGE_NAME",(function(){return Da})),t.d(r,"FIELD_COMMAND_NAME_NAME",(function(){return Ia})),t.d(r,"FIELD_COMMAND_NO_USER_MESSAGE_NAME",(function(){return Fa})),t.d(r,"FIELD_COMMAND_PARSER_NAME",(function(){return ja})),t.d(r,"FIELD_COMMAND_PROGAM_NAME",(function(){return xa})),t.d(r,"FIELD_COMMAND_PROGAM_STAGE_NAME",(function(){return Pa})),t.d(r,"FIELD_COMMAND_SEPARATOR_NAME",(function(){return Ga})),t.d(r,"FIELD_COMMAND_SMS_CODES_NAME",(function(){return La})),t.d(r,"FIELD_COMMAND_SPECIAL_CHARS_NAME",(function(){return qa})),t.d(r,"FIELD_COMMAND_SUCCESS_MESSAGE_NAME",(function(){return Ua})),t.d(r,"FIELD_COMMAND_USE_CURRENT_PERIOD_FOR_REPORTING_NAME",(function(){return Va})),t.d(r,"FIELD_COMMAND_WRONG_FORMAT_MESSAGE_NAME",(function(){return Ha})),t.d(r,"FIELD_COMMAND_CONFIRM_MESSAGE_NAME",(function(){return Ba})),t.d(r,"KEY_VALUE_PARSER",(function(){return an})),t.d(r,"J2ME_PARSER",(function(){return tn})),t.d(r,"ALERT_PARSER",(function(){return nn})),t.d(r,"UNREGISTERED_PARSER",(function(){return ln})),t.d(r,"TRACKED_ENTITY_REGISTRATION_PARSER",(function(){return rn})),t.d(r,"PROGRAM_STAGE_DATAENTRY_PARSER",(function(){return sn})),t.d(r,"EVENT_REGISTRATION_PARSER",(function(){return on})),t.d(r,"ProgramStageDataElements",(function(){return Mn}));var s=t(175),o=t(174),c=t(173),i=t(1),m=t.n(i),d=t(190),u=t.n(d);const g=Object(i.createContext)({addAlert:()=>{throw new Error("AlertContext has not been initialized yet!")}}),p=(e,a="dhis2-smsconfiguration")=>"".concat(a,"-").concat(e),E=({children:e})=>{const[a,t]=Object(i.useState)([]);return m.a.createElement(g.Provider,{value:{addAlert:e=>t([...a,e])}},e,m.a.createElement(c.b,{dataTest:p("notifications-alerthandler")},a.map(({message:e,type:a})=>m.a.createElement(c.a,Object.assign({dataTest:p("notifications-alert"),key:e},{[a]:!0}),e))))},b=()=>m.a.createElement("div",{"data-test":p("views-nomatch")},m.a.createElement("h1",null,"404"));var f=t(7),y=t.n(f),v=t(191);y.a.addResources("en","default",v);var S=y.a,h=t(192),C=t.n(h);const w=({children:e})=>m.a.createElement("h1",{className:C.a.headline,"data-test":p("headline-pageheadline")},e);var _=t(193),N=t.n(_);const O=({children:e})=>m.a.createElement("h2",{className:N.a.subHeadline,"data-test":p("headline-pagesubheadline")},e);var A=t(194),T=t.n(A),k=t(195),M=t.n(k);var R=({titleText:e,bodyText:a,linkText:t,to:n})=>m.a.createElement(c.e,null,m.a.createElement("div",{className:M.a.container},m.a.createElement("h2",{className:M.a.title},e),m.a.createElement("p",{className:M.a.body},a),m.a.createElement("div",{className:M.a.linkContainer},m.a.createElement(s.b,{className:M.a.link,to:n},t))));const D=()=>m.a.createElement("div",{"data-test":p("views-home"),className:T.a.container},m.a.createElement(w,null,S.t("Overview: SMS Configuration",{nsSeparator:">"})),m.a.createElement("p",{className:T.a.explanation},S.t("Configure settings for SMS sending, receiving, data reporting, alerts, registration and more.")),m.a.createElement("div",{className:T.a.grid},m.a.createElement("div",{className:T.a.gridItem},m.a.createElement(R,{titleText:S.t("Gateway Configuration"),bodyText:S.t("Add and manage gateways for sending and receiving SMS messages in DHIS2."),linkText:S.t("Set up gateways"),to:aa})),m.a.createElement("div",{className:T.a.gridItem},m.a.createElement(R,{titleText:S.t("SMS Commands"),bodyText:S.t("Add and manage commands triggered by incoming SMS messages to register, alert and more."),linkText:S.t("Set up SMS commands"),to:Tl})),m.a.createElement("div",{className:T.a.gridItem},m.a.createElement(R,{titleText:S.t("Sent SMS messages"),bodyText:S.t("Open logs of all SMS messages sent from DHIS2."),linkText:S.t("View all sent SMS"),to:Zl})),m.a.createElement("div",{className:T.a.gridItem},m.a.createElement(R,{titleText:S.t("Received SMS messages"),bodyText:S.t("Open logs of all SMS messages received by DHIS2."),linkText:S.t("View all received SMS"),to:ra})))),I=({onCancelClick:e,onDeleteClick:a})=>m.a.createElement(c.p,{dataTest:p("gateways-deleteconfirmationdialog")},m.a.createElement(c.s,null,S.t("Confirm deletion")),m.a.createElement(c.r,null,S.t("Are you sure you want to delete the selected gateways?")),m.a.createElement(c.q,null,m.a.createElement(c.d,null,m.a.createElement(c.c,{secondary:!0,onClick:e,dataTest:p("gateways-deleteconfirmationdialog-cancel")},"Cancel"),m.a.createElement(c.c,{destructive:!0,onClick:a,dataTest:p("gateways-deleteconfirmationdialog-confirm")},"Delete")))),{Field:F}=c.u,j=()=>m.a.createElement(F,{required:!0,dataTest:p("gateways-fieldgatewayauthtoken"),name:"authtoken",label:S.t("Auth token"),component:c.m,validate:Object(c.I)(c.K,c.J)}),{Field:x}=c.u,P=()=>m.a.createElement(x,{required:!0,dataTest:p("gateways-fieldgatewayname"),name:"name",label:S.t("Name"),component:c.m,validate:Object(c.I)(c.K,c.J)}),{Field:G}=c.u,L=()=>m.a.createElement(G,{required:!0,dataTest:p("gateways-fieldgatewaypassword"),name:"password",label:S.t("Password"),component:c.m,validate:Object(c.I)(c.K,c.J)}),{Field:q}=c.u,U=()=>m.a.createElement(q,{required:!0,dataTest:p("gateways-fieldgatewayurltemplate"),name:"urlTemplate",label:S.t("Url template"),component:c.m,validate:Object(c.I)(c.L,c.J)}),{Field:V}=c.u,H=()=>m.a.createElement(V,{required:!0,dataTest:p("gateways-fieldgatewayusername"),name:"username",label:S.t("User name"),component:c.m,validate:Object(c.I)(c.K,c.J)});var B=t(201),z=t.n(B);const{useForm:K}=c.u,J=()=>{const{change:e,getState:a}=K();return m.a.createElement(c.c,{className:z.a.button,onClick:()=>{const{parameters:t}=a().values;e("parameters",[...t,{header:!1,encode:!1,key:"",value:"",confidential:!1}])},dataTest:p("gateways-gatewayaddkeyvaluepair")},S.t("Add key value pair"))};var W=t(6),Y=t.n(W),Q=t(202),Z=t.n(Q);const X=({children:e,className:a})=>m.a.createElement("div",{className:Y()(Z.a.formRow,a),"data-test":p("forms-formrow")},e),{Form:$}=c.u,ee=({onCancelClick:e,onSubmit:a,initialValues:t})=>{const n=t?S.t("Save gateway"):S.t("Add gateway");return m.a.createElement($,{keepDirtyOnReinitialize:!0,onSubmit:a,initialValues:t},({handleSubmit:a,submitting:t,pristine:l})=>m.a.createElement("form",{onSubmit:a,"data-test":p("gateways-gatewaybulksmsform")},m.a.createElement(X,null,m.a.createElement(P,null)),m.a.createElement(X,null,m.a.createElement(H,null)),m.a.createElement(X,null,m.a.createElement(L,null)),m.a.createElement(c.d,null,m.a.createElement(c.c,{primary:!0,type:"submit",icon:t?m.a.createElement(c.i,{small:!0}):null,disabled:t,dataTest:p("forms-gatewaybulksmsform-submit")},n),m.a.createElement(c.c,{onClick:()=>e(l)},S.t("Cancel")))))};ee.defaultProps={initialValues:{}};const{Form:ae}=c.u,te=({onCancelClick:e,onSubmit:a,initialValues:t})=>{const n=t?S.t("Save gateway"):S.t("Add gateway");return m.a.createElement(ae,{keepDirtyOnReinitialize:!0,onSubmit:a,initialValues:t},({handleSubmit:a,submitting:t,pristine:l})=>m.a.createElement("form",{onSubmit:a,"data-test":p("gateways-gatewayclickatellform")},m.a.createElement(X,null,m.a.createElement(P,null)),m.a.createElement(X,null,m.a.createElement(H,null)),m.a.createElement(X,null,m.a.createElement(j,null)),m.a.createElement(X,null,m.a.createElement(U,null)),m.a.createElement(c.d,null,m.a.createElement(c.c,{primary:!0,type:"submit",icon:t?m.a.createElement(c.i,{small:!0}):null,disabled:t,dataTest:p("forms-gatewayclickatellform-submit")},n),m.a.createElement(c.c,{onClick:()=>e(l)},S.t("Cancel")))))};te.defaultProps={initialValues:{}};var ne=t(203),le=t.n(ne);const re=({children:e})=>m.a.createElement("p",{className:le.a.paragraph,"data-test":p("text-paragraph")},e),{Form:se}=c.u,oe=({onCancelClick:e,onSubmit:a,initialValues:t})=>{const n=t?S.t("Save gateway"):S.t("Add gateway");return m.a.createElement(se,{keepDirtyOnReinitialize:!0,onSubmit:a,initialValues:t},({handleSubmit:a,values:t,submitting:l,pristine:r})=>m.a.createElement("form",{onSubmit:a,"data-test":p("gateways-gatewaygenericform")},m.a.createElement(O,null,S.t("Gateway setup")),m.a.createElement(X,null,m.a.createElement(P,null)),m.a.createElement(X,null,m.a.createElement(U,null)),m.a.createElement(O,null,S.t("Key value pairs")),m.a.createElement(re,null,S.t("Key value pairs can be included in the URL. This is some helper text which provides an intro to what the key value pairs actually do.")),t.parameters.map((e,a)=>m.a.createElement(ge,{index:a,key:a})),m.a.createElement(J,null),m.a.createElement(c.d,null,m.a.createElement(c.c,{primary:!0,type:"submit",dataTest:p("forms-gatewaygenericform-submit"),disabled:l,icon:l?m.a.createElement(c.i,{small:!0}):null},n),m.a.createElement(c.c,{onClick:()=>e(r)},S.t("Cancel")))))};oe.defaultProps={initialValues:{parameters:[]}};var ce=t(204),ie=t.n(ce);const{Field:me,useForm:de}=c.u,ue=Object(c.I)(c.K,c.J),ge=({index:e})=>{const{change:a,getState:t}=de();return m.a.createElement("div",{className:ie.a.container,"data-test":p("gateways-gatewaykeyvaluepair")},m.a.createElement("div",{className:ie.a.textInputs},m.a.createElement(me,{dataTest:p("gateways-gatewaykeyvaluepair-key"),className:ie.a.keyInput,name:"parameters[".concat(e,"].key"),label:S.t("Key"),component:c.m,validate:ue}),m.a.createElement(me,{dataTest:p("gateways-gatewaykeyvaluepair-value"),className:ie.a.valueInput,name:"parameters[".concat(e,"].value"),label:S.t("Value"),component:c.m,validate:ue})),m.a.createElement("div",{className:ie.a.checkboxGroup},m.a.createElement(me,{dataTest:p("gateways-gatewaykeyvaluepair-isheader"),className:ie.a.checkbox,type:"checkbox",name:"parameters[".concat(e,"].header"),label:S.t("Send as header"),component:c.h}),m.a.createElement(me,{dataTest:p("gateways-gatewaykeyvaluepair-isencoded"),className:ie.a.checkbox,type:"checkbox",name:"parameters[".concat(e,"].encode"),label:S.t("Encode"),component:c.h}),m.a.createElement(me,{dataTest:p("gateways-gatewaykeyvaluepair-isconfidential"),className:ie.a.checkbox,type:"checkbox",name:"parameters[".concat(e,"].confidential"),label:S.t("Confidential"),component:c.h})),m.a.createElement(c.c,{small:!0,secondary:!0,dataTest:p("gateways-gatewaykeyvaluepair-remove"),onClick:()=>(e=>{const{parameters:n}=t().values;a("parameters",0===e?n.slice(1):[...n.slice(0,e),...n.slice(e+1)])})(e)},S.t("Remove key value pair")))};var pe=t(11);const Ee=({onConfirmCancel:e,onAbortCancel:a})=>m.a.createElement(c.p,null,m.a.createElement(c.s,null,S.t("Are you sure you want to cancel? Unsaved changes will be lost")),m.a.createElement(c.q,null,m.a.createElement(c.d,null,m.a.createElement(c.c,{onClick:a},S.t("No, stay on page")),m.a.createElement(c.c,{primary:!0,onClick:e},S.t("Yes, cancel")))));var be=t(205),fe=t.n(be);const ye="".concat("/sms-gateway/edit","/:id"),ve=()=>{var e;const a=Object(o.g)(),{id:t}=Object(o.i)(),[n,l]=Object(i.useState)(!1),{loading:r,error:s,data:d}=xe(t),[u,{error:g}]=Ke(),[E,{error:b}]=Ve(),[f,{error:y}]=Be(),v=g||b||y;if(r)return m.a.createElement(m.a.Fragment,null,m.a.createElement(w,null,S.t("Edit")),m.a.createElement(c.f,null,m.a.createElement(c.i,null)));if(s){const e=S.t("Something went wrong whilst loading gateways");return m.a.createElement(m.a.Fragment,null,m.a.createElement(w,null,S.t("Edit")),m.a.createElement(c.t,{error:!0,title:e},s.message))}const h=d&&"string"===typeof d.gateway?{gateway:JSON.parse(d.gateway)}:d,C=null===h||void 0===h||null===(e=h.gateway)||void 0===e?void 0:e.type,_=null===h||void 0===h?void 0:h.gateway,N=(e=>{if(e===Oe)return oe;if(e===Ae)return ee;if(e===Te)return te;throw new Error('The gateway type does not exist, got "'.concat(e,'"'))})(C);return m.a.createElement("div",{"data-test":p("views-gatewayconfigformedit"),className:fe.a.container},m.a.createElement(w,null,S.t("Edit gateway")),_?m.a.createElement("div",{"data-test":p("views-gatewayconfigformedit-formcontainer"),"data-gateway-id":h.gateway.uid},v&&m.a.createElement(c.t,{error:!0,title:S.t("Something went wrong whilst saving gateways")},v.message),m.a.createElement(N,{initialValues:h.gateway,onSubmit:async e=>{const t=Object(pe.a)(Object(pe.a)({},e),{},{id:h.gateway.uid});try{t.type===Oe&&await u(t),t.type===Ae&&await E(t),t.type===Te&&await f(t),a.push(aa)}catch(n){return Promise.reject(n)}},onCancelClick:e=>e?a.push(aa):l(!0)})):m.a.createElement(c.t,{error:!0,title:S.t("Gateway not found")},S.t("The requested gateway could not be loaded")),n&&m.a.createElement(Ee,{onConfirmCancel:()=>a.push(aa),onAbortCancel:()=>l(!1)}))};var Se=t(206),he=t.n(Se);const Ce=({allGatewaysChecked:e,checkedGateways:a,gateways:t,onGatewayToggle:n,onToggleAll:l,onMakeDefaultClick:r})=>{const s=Object(o.g)();return m.a.createElement(c.z,{dataTest:p("gateways-gatewaystable")},m.a.createElement(c.E,null,m.a.createElement(c.G,null,m.a.createElement(c.C,{dataTest:p("gateways-gatewaystable-checkall")},m.a.createElement(c.g,{onChange:l,checked:e})),m.a.createElement(c.C,null,S.t("Name")),m.a.createElement(c.C,null,S.t("Type")),m.a.createElement(c.C,null),m.a.createElement(c.C,null))),m.a.createElement(c.A,null,t.map(e=>{return m.a.createElement(c.F,{key:e.uid,dataTest:p("gateways-gatewaystable-row")},m.a.createElement(c.B,{className:he.a.checkboxCell,dataTest:p("gateways-gatewaystable-checkbox")},m.a.createElement(c.g,{value:e.uid,onChange:()=>n(e.uid),checked:a.includes(e.uid),dataTest:p("gateways-gatewaystable-id")})),m.a.createElement(c.B,{dataTest:p("gateways-gatewaystable-name")},e.name),m.a.createElement(c.B,{className:he.a.typeCell,dataTest:p("gateways-gatewaystable-type")},"bulksms"===(t=e.type)?S.t("BulkSMS"):"clickatell"===t?S.t("Clickatell"):"http"!==t&&t?t:S.t("Generic")),m.a.createElement(c.B,{className:he.a.defaultCell},e.isDefault?m.a.createElement("span",{className:he.a.isDefaultText},S.t("Default gateway")):m.a.createElement(c.c,{dataTest:p("gateways-gatewaystable-makedefault"),onClick:()=>r(e.uid),className:he.a.makeDefaultButton},S.t("Make default"))),m.a.createElement(c.B,{dataTest:p("gateways-gatewaystable-actions"),className:he.a.editCell},m.a.createElement(c.d,{className:he.a.rowActions},m.a.createElement(c.c,{dataTest:p("gateways-gatewaystable-edit"),onClick:()=>{s.push("".concat("/sms-gateway/edit","/").concat(e.uid))}},S.t("Edit")))));var t})))};var we=t(207),_e=t.n(we);const Ne=({checkedGateways:e,gateways:a,setCheckedGateways:t,onMakeDefaultClick:n,processing:l})=>{const r=e.length===a.length;return m.a.createElement("div",{className:_e.a.container,"data-test":p("gateways-gatewaylist")},l&&m.a.createElement("div",{className:_e.a.processingMessage},m.a.createElement("div",{className:_e.a.loadingContainer},m.a.createElement(c.i,null))),m.a.createElement(Ce,{allGatewaysChecked:r,gateways:a,checkedGateways:e,onGatewayToggle:a=>{if(e.includes(a)){const n=e.findIndex(e=>e===a),l=0===n?e.slice(1):[...e.slice(0,n),...e.slice(n+1)];t(l)}else t([...e,a])},onMakeDefaultClick:n,onToggleAll:()=>{if(r)t([]);else{const e=a.map(({uid:e})=>e);t(e)}}}))},Oe="http",Ae="bulksms",Te="clickatell";var ke=t(8);const Me={resource:"gateways",type:"create",data:({name:e,username:a,password:t})=>({type:"bulksms",name:e,username:a,password:t})},Re={resource:"gateways",type:"create",data:({name:e,username:a,authtoken:t,urlTemplate:n})=>({type:"clickatell",name:e,username:a,authtoken:t,urlTemplate:n})},De={resource:"gateways",type:"create",data:({name:e,urlTemplate:a,parameters:t})=>({type:"http",name:e,urlTemplate:a,parameters:t})},Ie={resource:"gateways",type:"delete",id:({id:e})=>e},Fe=()=>{const[e,a]=Object(i.useState)(!1),[t,n]=Object(i.useState)(null),l=(e=>a=>{const t={id:a};return e.mutate(Ie,{variables:t})})(Object(ke.c)()),r=e=>(a(!1),e),s=e=>{n(e),a(!1)};return[({ids:e})=>(a(!0),Promise.all(e.map(l)).then(r).catch(s)),{loading:e,error:t}]},je={gateway:{resource:"gateways",id:({id:e})=>e}},xe=e=>Object(ke.e)(je,{variables:{id:e}});var Pe=t(185);const Ge={gateways:{resource:"gateways.json",params:({fields:e,filter:a})=>{const t={};return e&&(t.fields=e),a&&(t.filter=a),t}}},Le={resource:"gateways/default",type:"replace",id:({id:e})=>e},qe=e=>{const[a,t]=Object(i.useState)(!1),[n,l]=Object(i.useState)(null),r=Object(ke.c)();return[a=>{const n=Object(pe.a)(Object(pe.a)({},e),{},{id:a.id});return t(!0),l(null),r.mutate(n,{variables:a}).then(e=>(t(!1),e)).catch(e=>{throw t(!1),l(e),e})},{loading:a,error:n}]},Ue={resource:"gateways",id:({id:e})=>e,type:"update",data:({name:e,username:a,password:t})=>({type:"bulksms",name:e,username:a,password:t})},Ve=()=>qe(Ue),He={resource:"gateways",id:({id:e})=>e,type:"update",data:({name:e,username:a,authtoken:t,urlTemplate:n})=>({type:"clickatell",name:e,username:a,authtoken:t,urlTemplate:n})},Be=()=>qe(He),ze={resource:"gateways",id:({id:e})=>e,type:"replace",data:({name:e,urlTemplate:a,parameters:t})=>({type:"http",name:e,urlTemplate:a,parameters:t})},Ke=()=>qe(ze);var Je=t(208),We=t.n(Je);const Ye=()=>{const e=Object(o.g)(),[a,t]=Object(i.useState)(Oe),[n,{error:l}]=Object(ke.d)(De),[r,{error:s}]=Object(ke.d)(Me),[d,{error:u}]=Object(ke.d)(Re),g=l||s||u;if(g){const e=S.t("Something went wrong whilst saving the gateway");return m.a.createElement("div",{"data-test":p("views-gatewayconfigformnew")},m.a.createElement(w,null,S.t("Add gateway")),m.a.createElement(c.t,{error:!0,title:e},g.message))}const E=async t=>{try{a===Oe&&await n(t),a===Ae&&await r(t),a===Te&&await d(t),e.push(aa)}catch(l){return Promise.reject(l)}},b=()=>e.push(aa);return m.a.createElement("div",{"data-test":p("views-gatewayconfigformnew"),className:We.a.container},m.a.createElement(w,null,S.t("Add gateway")),m.a.createElement(X,null,m.a.createElement(c.w,{label:S.t("Type"),onChange:({selected:e})=>t(e),selected:a,dataTest:p("views-gatewayconfigformnew-gatewaytype")},m.a.createElement(c.y,{value:Oe,label:S.t("Generic")}),m.a.createElement(c.y,{value:Ae,label:S.t("BulkSMS")}),m.a.createElement(c.y,{value:Te,label:S.t("Clickatell")}))),m.a.createElement(X,null,a===Oe&&m.a.createElement(oe,{onSubmit:E,onCancelClick:b}),a===Ae&&m.a.createElement(ee,{onSubmit:E,passwordRequired:!0,onCancelClick:b}),a===Te&&m.a.createElement(te,{onSubmit:E,passwordRequired:!0,onCancelClick:b})))};var Qe=t(209),Ze=t.n(Qe);const Xe=({addLabel:e,deleteLabel:a,dataTest:t,onAddClick:n,onDeleteClick:l,disableAdd:r,disableDelete:s})=>m.a.createElement("div",{className:Ze.a.container},m.a.createElement(c.d,{"data-test":p("".concat(t,"-actions"))},m.a.createElement(c.c,{primary:!0,onClick:n,disabled:r,dataTest:p("".concat(t,"-add"))},e),m.a.createElement(c.c,{destructive:!0,onClick:l,disabled:s,dataTest:p("".concat(t,"-delete"))},a)));var $e=t(210),ea=t.n($e);const aa="/sms-gateway",ta=()=>{var e,a;const t=Object(o.g)(),[n,l]=Object(i.useState)([]),[r,s]=Object(i.useState)(!1),{loading:d,error:u,data:g,refetch:E}=(e=>{var a;"id:in:[".concat(null===e||void 0===e?void 0:e.join(","),"]");const t={},n=Object(ke.e)(Ge,{variables:t}),{data:l}=n,r=Object(Pe.a)(n,["data"]),s=l&&"string"===typeof l.gateways?{gateways:JSON.parse(l.gateways)}:l,o=e&&(null===s||void 0===s||null===(a=s.gateways)||void 0===a?void 0:a.gateways)?{gateways:{gateways:s.gateways.gateways.filter(({uid:a})=>e.includes(a))}}:s;return Object(pe.a)({data:o},r)})(),[b,{loading:f,error:y}]=Fe(),[v,{loading:h,error:C}]=Object(ke.d)(Le),_=d||f||h;if(_)return m.a.createElement(m.a.Fragment,null,m.a.createElement(w,null,"Gateway configuration"),m.a.createElement(c.f,null,m.a.createElement(c.i,null)));const N=u||y||C;if(N){const e=S.t("Something went wrong whilst performing the requested operation");return m.a.createElement(m.a.Fragment,null,m.a.createElement(w,null,"Gateway configuration"),m.a.createElement(c.t,{error:!0,title:e},N.message))}const O=!!(null===g||void 0===g||null===(e=g.gateways)||void 0===e||null===(a=e.gateways)||void 0===a?void 0:a.length);return m.a.createElement("div",{className:ea.a.container,"data-test":p("views-gatewayconfiglist")},m.a.createElement(w,null,"Gateway configuration"),m.a.createElement(re,null,S.t("An SMS gateway lets a DHIS2 instance send and receive SMS messages. Different gateway types can be added and configured below. At least one gateway is needed to send and receive SMS messages. Load balancing will use all gateways if there are multiple available. Read about gateway configuration in the DHIS2 documentation.")),m.a.createElement(Xe,{addLabel:S.t("Add gateway"),deleteLabel:S.t("Delete selected"),dataTest:"views-gatewayconfiglist",onAddClick:()=>t.push("/sms-gateway/new"),onDeleteClick:()=>s(!0),disableAdd:f,disableDelete:!n.length||f}),O?m.a.createElement(Ne,{processing:_,checkedGateways:n,setCheckedGateways:l,gateways:g.gateways.gateways,onMakeDefaultClick:e=>{v({id:e}).then(E)}}):m.a.createElement(c.t,{info:!0,title:S.t("No gateways found")},S.t("It looks like there aren't any configured gateways, or they couldn't be loaded.")),r&&m.a.createElement(I,{onCancelClick:()=>s(!1),onDeleteClick:()=>{b({ids:n}).then(E),s(!1)}}))};var na=t(9);const la=y.a.t("Received"),ra="/received",sa=[{value:"ALL",label:y.a.t("All")},{value:"FAILED",label:y.a.t("Failed")},{value:"INCOMING",label:y.a.t("Incoming")},{value:"PROCESSED",label:y.a.t("Processed")},{value:"PROCESSING",label:y.a.t("Processing")},{value:"SENT",label:y.a.t("Sent")},{value:"UNHANDLED",label:y.a.t("Unhandled")}],oa={resource:"sms/inbound",type:"delete",params:({ids:e})=>({ids:e})},ca=({selectedIds:e,onComplete:a})=>{const{addAlert:t}=Object(i.useContext)(g),[n]=Object(ke.d)(oa,{onComplete:a,onError:e=>{t({type:"critical",message:e.message})}});return m.a.createElement(c.c,{destructive:!0,onClick:()=>n({ids:e.join()}),disabled:0===e.length},y.a.t("Delete selected"))},ia=()=>{const e=new URLSearchParams(Object(o.h)().search);return{status:e.get("status")||"ALL",phoneNumber:e.get("phoneNumber")||"",page:parseInt(e.get("page")||1),pageSize:parseInt(e.get("pageSize")||50)}},ma=e=>{const a=Object.keys(e).reduce((a,t)=>{const n=e[t];return n&&!("status"===t&&"ALL"===n)&&a.push("".concat(t,"=").concat(n)),a},[]).join("&");return"?".concat(a)};var da=t(211),ua=t.n(da);const{Form:ga,Field:pa}=c.u,Ea=({loading:e})=>{const{status:a,phoneNumber:t,pageSize:n}=ia(),l={status:a,phoneNumber:t},r=Object(o.g)();return m.a.createElement("div",{"data-test":p("views-receivedsms-filter"),className:ua.a.container},m.a.createElement(ga,{onSubmit:({status:e,phoneNumber:a})=>{r.push({search:ma({status:e,phoneNumber:a,pageSize:n,page:1})})},initialValues:l},({handleSubmit:a,pristine:t})=>m.a.createElement("form",{onSubmit:a,className:ua.a.inputStrip},m.a.createElement(pa,{name:"status",component:c.x,options:sa,label:y.a.t("Filter by status"),inputWidth:"200px"}),m.a.createElement(pa,{name:"phoneNumber",component:c.m,label:y.a.t("Filter by phone number"),className:ua.a.phoneNumberField,inputWidth:"300px"}),m.a.createElement(c.c,{large:!0,type:"submit",disabled:e||t},y.a.t("Filter")))))};var ba=t(15),fa=t.n(ba),ya=t(212),va=t.n(ya);const Sa=["1","2","10","20","30","40","50","100"],ha=({page:e,pageCount:a,pageSize:t,total:n})=>{const l=Math.min((e-1)*t+1,n),r=Math.min(l+t-1,n),s=Array.from({length:a},(e,a)=>(a+1).toString()),{status:i,phoneNumber:d}=ia(),u=Object(o.g)(),g=e=>{u.push({search:ma({status:i,phoneNumber:d,pageSize:t,page:e})})};return m.a.createElement("div",{className:va.a.container},m.a.createElement("div",{className:va.a.verticalAlign},y.a.t("Show"),m.a.createElement(c.v,{dense:!0,selected:t.toString(),onChange:({selected:e})=>{u.push({search:ma({status:i,phoneNumber:d,pageSize:e,page:1})})},className:va.a.select},Sa.map(e=>m.a.createElement(c.y,{key:e,value:e,label:e}))),y.a.t("per page")),m.a.createElement("div",{className:va.a.verticalAlign},m.a.createElement("span",{className:va.a.summary},y.a.t("Viewing {{firstItem}}-{{lastItem}} of {{total}}",{firstItem:l,lastItem:r,total:n})),m.a.createElement(c.c,{className:va.a.buttonPrevious,small:!0,disabled:1===e,onClick:()=>g(e-1)},y.a.t("Previous")),m.a.createElement("span",null,y.a.t("Page")),m.a.createElement(c.v,{dense:!0,inputWidth:"600px",selected:e.toString(),onChange:({selected:e})=>g(e),className:va.a.select},s.map(e=>m.a.createElement(c.y,{key:e,value:e,label:e}))),m.a.createElement("span",null,y.a.t("of {{pageCount}}",{pageCount:a})),m.a.createElement(c.c,{className:va.a.buttonNext,small:!0,disabled:e===a,onClick:()=>g(e+1)},y.a.t("Next"))))};var Ca=t(213),wa=t.n(Ca);const _a=({messages:e,pager:a,selectedIds:t,setSelectedIds:n})=>{const l=new Set(t),r=e.length>0&&t.length===e.length,s=e=>{l.has(e)?l.delete(e):l.add(e),n(Array.from(l))};return m.a.createElement(c.z,null,m.a.createElement(c.E,null,m.a.createElement(c.G,null,m.a.createElement(c.C,null,m.a.createElement(c.g,{checked:r,onChange:()=>{n(r?[]:e.map(({id:e})=>e))}})),m.a.createElement(c.C,null,y.a.t("Message")),m.a.createElement(c.C,null,y.a.t("Phone number")),m.a.createElement(c.C,null,y.a.t("Status")),m.a.createElement(c.C,null,y.a.t("Sender")),m.a.createElement(c.C,null,y.a.t("Date")))),m.a.createElement(c.A,null,0===e.length?m.a.createElement(c.F,null,m.a.createElement(c.B,{colSpan:"7",className:wa.a.noResults},y.a.t("No SMSes to display"))):e.map(e=>m.a.createElement(c.F,{key:e.id},m.a.createElement(c.B,null,m.a.createElement(c.g,{checked:l.has(e.id),onChange:s.bind(null,e.id)})),m.a.createElement(c.B,null,e.text),m.a.createElement(c.B,null,m.a.createElement("span",{className:wa.a.originator},e.originator)),m.a.createElement(c.B,null,e.smsstatus),m.a.createElement(c.B,null,e.user?e.user.userCredentials.username:y.a.t("Unknown")),m.a.createElement(c.B,null,fa()(e.receivedDate).format("MMMM Do YYYY, h:mm:ss a"))))),m.a.createElement(c.D,null,m.a.createElement(c.F,null,m.a.createElement(c.B,{colSpan:"7"},m.a.createElement(ha,a)))))};var Na=t(214),Oa=t.n(Na);const Aa={inboundSms:{resource:"sms/inbound",params:({page:e,pageSize:a,phoneNumber:t,status:n})=>({page:e,pageSize:a,phoneNumber:t,status:n,fields:["id","text","originator","smsstatus","user[userCredentials[username]]","receiveddate"]})}},Ta=()=>{var e;const[a,t]=Object(i.useState)([]),{page:n,pageSize:l,phoneNumber:r,status:s}=ia(),{called:o,loading:d,error:u,data:g,refetch:E}=Object(na.d)(Aa,{lazy:!0});if(Object(i.useEffect)(()=>{E({page:n,pageSize:l,phoneNumber:r,status:s})},[n,l,r,s]),d||!o)return m.a.createElement(m.a.Fragment,null,m.a.createElement(w,null,la),m.a.createElement(c.f,null,m.a.createElement(c.i,null)));if(u){const e=S.t("Something went wrong whilst loading received SMSes");return m.a.createElement(m.a.Fragment,null,m.a.createElement(w,null,la),m.a.createElement(c.t,{error:!0,title:e},u.message))}const b=(null===g||void 0===g||null===(e=g.inboundSms)||void 0===e?void 0:e.inboundsmss)||[];return m.a.createElement("div",{"data-test":p("views-receivedsmslist"),className:Oa.a.container},m.a.createElement(w,null,la),m.a.createElement("div",{className:Oa.a.topBar},m.a.createElement(Ea,{loading:d}),m.a.createElement(ca,{onComplete:()=>{E(),t([])},selectedIds:a})),m.a.createElement("div",null,m.a.createElement(_a,{messages:b,pager:g.inboundSms.pager,selectedIds:a,setSelectedIds:t})))},ka="completenessMethod",Ma="defaultMessage",Ra="id",Da="moreThanOneOrgUnitMessage",Ia="name",Fa="noUserMessage",ja="parserType",xa="program",Pa="programStage",Ga="separator",La="smsCodes",qa="specialCharacters",Ua="successMessage",Va="currentPeriodUsedForReporting",Ha="wrongFormatMessage",Ba="receivedMessage",{useForm:za}=c.u,Ka=()=>{const{change:e,getState:a}=za();return m.a.createElement(X,null,m.a.createElement(c.c,{onClick:()=>{const t=[...a().values[qa],{name:"",value:""}];e(qa,t)},dataTest:p("forms-commandsaddspecialcharacters")},S.t("Add special character")))},Ja={value:"ALL_DATAVALUE",label:S.t("Receive all data values")},Wa={value:"AT_LEAST_ONE_DATAVALUE",label:S.t("Receive at least one data value")},Ya={value:"DO_NOT_MARK_COMPLETE",label:S.t("Do not mark as complete")},{useFormState:Qa}=c.u,Za={submitting:!0,pristine:!0},Xa=()=>{const{submitting:e,pristine:a}=Qa({subscription:Za});return m.a.createElement(c.c,{primary:!0,type:"submit",disabled:a||e,icon:e?m.a.createElement(c.i,{small:!0}):null},S.t("Save command"))},{useFormState:$a}=c.u,et={submitError:!0,hasSubmitErrors:!0},at=()=>{const{submitError:e,hasSubmitErrors:a}=$a({subscription:et});return a?m.a.createElement(X,null,m.a.createElement(c.t,{error:!0,title:S.t("Something went wrong whilst submitting the form")},e)):null};var tt=t(215),nt=t.n(tt);const lt=({onCancel:e})=>m.a.createElement("div",{className:nt.a.container},m.a.createElement(at,null),m.a.createElement(c.d,null,m.a.createElement(Xa,null),m.a.createElement(c.c,{onClick:e},S.t("Cancel")))),rt=({onCancelClick:e,onDeleteClick:a})=>m.a.createElement(c.p,{dataTest:p("commands-deleteconfirmationdialog")},m.a.createElement(c.s,null,S.t("Confirm deletion")),m.a.createElement(c.r,null,S.t("Are you sure you want to delete the selected commands?")),m.a.createElement(c.q,null,m.a.createElement(c.d,null,m.a.createElement(c.c,{secondary:!0,onClick:e,dataTest:p("commands-deleteconfirmationdialog-cancel")},S.t("Cancel")),m.a.createElement(c.c,{primary:!0,onClick:a,dataTest:p("commands-deleteconfirmationdialog-confirm")},S.t("Delete"))))),st=(e,a)=>e===a.value,ot={resource:"smsCommands",type:"create",data:({parserType:e,name:a,dataset:t,userGroup:n,program:l,programStage:r})=>{if(e===an.value||e===tn.value)return{parserType:e,name:a,dataset:t};if(e===nn.value||e===ln.value)return{parserType:e,name:a,userGroup:{id:n}};if(e===rn.value||e===on.value)return{parserType:e,name:a,program:l};if(e===sn.value)return{parserType:e,name:a,program:l,programStage:r};throw new Error('You provided an unrecognized parserType "'.concat(e,'"'))}},ct={resource:"smsCommands",type:"delete",id:({id:e})=>e},it=()=>{const[e,a]=Object(i.useState)(!1),[t,n]=Object(i.useState)(null),l=(e=>a=>{const t={id:a};return e.mutate(ct,{variables:t})})(Object(ke.c)()),r=e=>(a(!1),e),s=e=>{n(e),a(!1)};return[({ids:e})=>(a(!0),Promise.all(e.map(l)).then(r).catch(s)),{loading:e,error:t}]},mt={smsCommand:{resource:"smsCommands",id:({id:e})=>e,params:{fields:"parserType",paging:"false"}}},dt={smsCommands:{resource:"smsCommands",pager:!1,params:({ids:e}={})=>({paging:"false",fields:"*",filter:e?"ids:in:[".concat(e.join(","),"]"):void 0})}},{FORM_ERROR:ut}=c.l,gt=e=>e,pt={resource:"smsCommands",type:"update",id:({commandId:e})=>e,data:e=>{let{commandId:a}=e;return Object(Pe.a)(e,["commandId"])}},Et=Object(pe.a)(Object(pe.a)({},pt),{},{partial:!0}),bt=({onAfterChange:e,commandId:a,formatCommand:t=gt,replace:n=!1})=>{const{addAlert:l}=Object(i.useContext)(g),r=Object(ke.c)();return s=>{const o={variables:Object(pe.a)(Object(pe.a)({},t(s)),{},{commandId:a})},c=n?Et:pt;return r.mutate(c,o).then(e).catch(e=>{if("access"===e.type){const a="No error message was provided",t=e.message||S.t(a);return{[ut]:t}}l({type:"critical",message:e.message})})}},{Field:ft}=c.u,yt=({dataSets:e,loading:a,required:t,disabled:n,errorText:l})=>m.a.createElement(ft,{disabled:n,error:!!l,validationText:l,required:t,loading:a,dataTest:p("forms-fielddataset"),name:"dataset",label:S.t("Dataset"),component:c.x,options:e,validate:c.J,format:e=>(null===e||void 0===e?void 0:e.id)||null,parse:e=>({id:e})});yt.defaultProps={disabled:!1,loading:!1,required:!1,errorText:""};const vt={dataSets:{resource:"dataSets",params:{fields:["id","displayName"],paging:"false"}}},St=({required:e})=>{const{loading:a,error:t,data:n}=Object(ke.e)(vt);if(a)return m.a.createElement(yt,{loading:!0,showLoadingStatus:!0,required:e,dataSets:[]});if(t)return m.a.createElement(yt,{required:e,disabled:!0,programs:[],errorText:t.message});const{dataSets:l}=n.dataSets,r=l.map(({id:e,displayName:a})=>({label:a,value:e}));return m.a.createElement(yt,{required:e,dataSets:r})};St.defaultProps={required:!1};const ht={dataSet:{resource:"dataSets",id:({id:e})=>e,params:({filter:e})=>({filter:e,fields:"dataSetElements[dataElement[id,code,displayName]]"})}},Ct=(e,a)=>{const[t,n]=Object(i.useState)(!0),[l,r]=Object(i.useState)(null),[s,o]=Object(i.useState)(null),c=Object(ke.c)(),m=e=>(n(!0),r(null),((e,a)=>e.query(ht,{variables:a}).then(e=>{const{dataSet:a}=e,{dataSetElements:t}=a;return t.map(({dataElement:e})=>e)}))(c,e).then(o).catch(r).finally(()=>n(!1)));return Object(i.useEffect)(()=>{m({id:e,filter:a})},[]),{loading:t,error:l,data:s,refetch:m}},{Field:wt,Form:_t,useForm:Nt,useField:Ot}=c.u,At=({baseName:e,combo:a,targetFieldName:t,onClose:n})=>{const l=Nt(),r=Ot(e,{subscription:{value:!0}}).input.value,s=Ot("dataset",{subscription:{value:!0}}).input.value.id,{loading:o,error:d,data:u}=Ct(s),g=r.formula,p={operator:Object(i.useMemo)(()=>g?g[0]:"+",[]),dataElementCode:Object(i.useMemo)(()=>g?g.slice(1):"",[])};if(o)return m.a.createElement(c.p,null,m.a.createElement(c.i,null));const E=u.map(e=>{const{code:a,displayName:t}=e;return{value:a,label:t}}),b=()=>{l.change(t,null),n()};return m.a.createElement(_t,{onSubmit:e=>{const a="".concat(e.operator).concat(e.dataElementCode);l.change(t,a),n()},initialValues:p},({handleSubmit:e})=>m.a.createElement(c.p,null,m.a.createElement("form",{onSubmit:a=>{a.stopPropagation(),e(a)}},m.a.createElement(c.s,null,S.t("Formula for {{combo}}",{combo:a})),m.a.createElement(c.r,null,m.a.createElement(X,null,m.a.createElement(wt,{required:!0,name:"dataElementCode",label:S.t("Data element"),component:c.x,options:E,validate:c.J})),m.a.createElement(X,null,m.a.createElement(wt,{required:!0,name:"operator",label:S.t("formula operator"),component:c.x,initialValue:"+",options:[{value:"+",label:"+"},{value:"-",label:"-"}]})),d&&m.a.createElement(X,null,m.a.createElement(c.t,{error:!0,title:S.t("Something went wrong whilst saving")},d.message))),m.a.createElement(c.q,null,m.a.createElement(c.d,null,m.a.createElement(c.c,{onClick:b},S.t("Remove")),m.a.createElement(c.c,{onClick:n},S.t("Cancel")),m.a.createElement(c.c,{type:"submit",primary:!0},S.t("Save")))))))};var Tt=t(216),kt=t.n(Tt);const{useField:Mt}=c.u,Rt={dataElement:{resource:"dataElements",params:({code:e})=>({filter:"code:eq:".concat(e),fields:"displayName",paging:"false"})}},Dt=({baseName:e,onClick:a,disabled:t})=>{const n=Object(ke.c)(),[l,r]=Object(i.useState)(!1),[s,o]=Object(i.useState)(!1),[d,u]=Object(i.useState)(""),g=Mt(e,{subscription:{value:!0}}).input.value,{formula:p,code:E}=g,b=p&&p[0],f=p&&p.slice(1);return Object(i.useEffect)(()=>{!l&&f&&(o(!0),r(!0),n.query(Rt,{variables:{code:f}}).then(e=>{const[{displayName:a}]=e.dataElement.dataElements;u(a)}).finally(()=>o(!1)))},[f,l]),m.a.createElement(m.a.Fragment,null,s&&S.t("Loading formula"),E&&d&&m.a.createElement("span",{className:kt.a.formulaInWords},m.a.createElement("span",{className:kt.a.formulaInWordsLabel},S.t("Formula"),":"),E," ".concat(b," "),d),m.a.createElement(c.c,{small:!0,onClick:a,disabled:t},p?S.t("Edit formula"):S.t("Add formula")))};var It=t(217),Ft=t.n(It);const{Field:jt}=c.u,xt=({dataElement:e,categoryOptionCombo:a})=>{const[t,n]=Object(i.useState)(!1),l=a?"".concat(e.displayName," ").concat(a.displayName):"".concat(e.displayName," ").concat(S.t("default")),r=((e,a)=>{const t=e.id,n=null===a||void 0===a?void 0:a.code;return!n||"default"===n?"".concat(La,".").concat(t):"".concat(La,".").concat(t,"-").concat(n)})(e,a),s="".concat(r,".code"),o="".concat(r,".formula");return m.a.createElement("div",{className:Ft.a.container},m.a.createElement(jt,{className:Ft.a.field,label:l,name:s,subscription:{value:!0,error:!0,invalid:!0,touched:!0}},e=>{let{input:a,meta:s}=e,i=Object(Pe.a)(e,["input","meta"]);const d=a.value;return m.a.createElement(m.a.Fragment,null,m.a.createElement(c.m,Object.assign({},i,{className:Ft.a.codeField,input:a,meta:s,error:!!s.error})),m.a.createElement(Dt,{disabled:!d,baseName:r,formulaFieldName:o,onClick:()=>n(!0)}),t&&m.a.createElement(At,{baseName:r,combo:l,targetFieldName:o,onClose:()=>n(!1)}))}))};xt.defaultProps={categoryOptionCombo:null,formula:""};const{useField:Pt}=c.u,Gt=()=>{const{input:e}=Pt(ka,{subscription:{value:!0}}),a=e.value,t=S.t("Required values notice");return a===Ja.value?m.a.createElement(X,null,m.a.createElement(c.t,{warning:!0,title:t},S.t('Make sure all SMS short codes are provided when completeness method "'.concat(Ja.label,'" is chosen, otherwise received messages will not be processed.')))):a===Wa.value?m.a.createElement(X,null,m.a.createElement(c.t,{warning:!0,title:t},S.t('Make sure at least one SMS short code is provided when completeness method "'.concat(Wa.label,'" is chosen, otherwise received messages will not be processed.')))):null};var Lt=t(218),qt=t.n(Lt);const Ut=({DE_COC_combinations:e})=>m.a.createElement("div",null,m.a.createElement(O,null,S.t("SMS short codes")),m.a.createElement(Gt,null),m.a.createElement("div",null,e.map(({dataElement:e,categoryOptionCombo:a})=>m.a.createElement(X,{className:qt.a.formRow,key:e.id+(null===a||void 0===a?void 0:a.id)},m.a.createElement(xt,{dataElement:e,categoryOptionCombo:a})))));Ut.defaultProps={allRequired:!1};const{Field:Vt}=c.u,Ht=Object.values(n),Bt=()=>m.a.createElement(Vt,{dataTest:p("forms-fielddataset"),name:ka,label:S.t("Completeness method"),component:c.x,options:Ht}),{Field:zt}=c.u,Kt=()=>m.a.createElement(zt,{dataTest:p("commands-fieldcommandconfirmmessage"),name:Ba,label:S.t("Confirm message"),component:c.H}),{Field:Jt}=c.u,Wt=()=>m.a.createElement(Jt,{dataTest:p("forms-fieldcommanddefaultmessage"),name:Ma,label:S.t("Reply message if no codes are sent (only the command)"),component:c.H}),{Field:Yt}=c.u,Qt=()=>m.a.createElement(Yt,{dataTest:p("forms-fieldcommandmorethanoneorgunitmessage"),name:Da,label:S.t("More than one orgunit message"),component:c.H}),{Field:Zt}=c.u,Xt=()=>m.a.createElement(Zt,{required:!0,dataTest:p("commands-fieldcommandname"),name:Ia,label:S.t("Name"),component:c.m,validate:Object(c.I)(c.K,c.J)}),{Field:$t}=c.u,en=()=>m.a.createElement($t,{dataTest:p("forms-fieldcommandnousermessage"),name:Fa,label:S.t("No user message"),component:c.H}),an={value:"KEY_VALUE_PARSER",label:S.t("Key value parser")},tn={value:"J2ME_PARSER",label:S.t("J2ME parser")},nn={value:"ALERT_PARSER",label:S.t("Alert parser")},ln={value:"UNREGISTERED_PARSER",label:S.t("Unregistered parser")},rn={value:"TRACKED_ENTITY_REGISTRATION_PARSER",label:S.t("Tracked entity registration parser")},sn={value:"PROGRAM_STAGE_DATAENTRY_PARSER",label:S.t("Program stage data entry parser")},on={value:"EVENT_REGISTRATION_PARSER",label:S.t("Event registration parser")},{Field:cn}=c.u,mn=Object.values(l).sort((e,a)=>e.label<a.label?-1:e.label>a.label?1:0),dn=({disabled:e})=>m.a.createElement(cn,{disabled:e,dataTest:p("forms-fieldcommandparser"),name:ja,label:S.t("Parser"),component:c.x,options:mn});dn.defaultProps={disabled:!1};const{Field:un}=c.u,gn=()=>m.a.createElement(un,{dataTest:p("forms-fieldcommandseparator"),name:Ga,label:S.t("Field separator"),component:c.m}),{Field:pn,useFormState:En}=c.u,bn={values:!0},fn=({id:e,displayName:a,valueType:t})=>{const{values:n}=En({subscription:bn}),l=n[La][e];return m.a.createElement(pn,{required:!0,name:"".concat(La,".").concat(e),label:a,component:c.m,format:e=>(null===e||void 0===e?void 0:e.code)||"",parse:n=>l?Object(pe.a)(Object(pe.a)({},l),{},{code:n}):{code:n,trackedEntityAttribute:{id:e,displayName:a,valueType:t}}})};var yn=t(219),vn=t.n(yn);const{Field:Sn,useForm:hn}=c.u,Cn=({index:e})=>{const{change:a,getState:t}=hn();return m.a.createElement("div",{key:e,className:vn.a.container},m.a.createElement(Sn,{required:!0,className:vn.a.field,dataTest:p("@TODO"),label:S.t("Special character name"),name:"".concat(qa,"[").concat(e,"].name"),component:c.m,validate:c.J}),m.a.createElement(Sn,{required:!0,className:vn.a.field,dataTest:p("@TODO"),label:S.t("Special character value"),name:"".concat(qa,"[").concat(e,"].value"),component:c.m,validate:c.J}),m.a.createElement(c.k,{label:"\xa0"},m.a.createElement(c.c,{className:vn.a.button,onClick:()=>{const n=t().values[qa],l=[...n.slice(0,e),...n.slice(e+1)];a(qa,l)}},S.t("Remove"))))},{Field:wn}=c.u,_n=()=>m.a.createElement(wn,{dataTest:p("forms-fieldcommandsuccessmessage"),name:Ua,label:S.t("Success message"),component:c.H}),{Field:Nn}=c.u,On=()=>m.a.createElement(Nn,{type:"checkbox",dataTest:p("forms-fieldusecurrentperiodforreporting"),name:Va,label:S.t("Use current period for reporting"),component:c.h}),{Field:An}=c.u,Tn=()=>m.a.createElement(An,{dataTest:p("forms-fieldcommandwrongformatmessage"),name:Ha,label:S.t("Wrong format message"),component:c.H}),{Field:kn}=c.u,Mn=({programStageDataElements:e,smsCodes:a})=>m.a.createElement(m.a.Fragment,null,e.map(({dataElement:e})=>m.a.createElement(kn,{key:e.id,name:"".concat(La,".").concat(e.id),label:e.displayName,component:c.m,format:e=>(null===e||void 0===e?void 0:e.code)||null,parse:t=>{const n=a[e.id];return Object(pe.a)(Object(pe.a)({},n),{},{code:t||"",dataElement:e})}}))),{Field:Rn}=c.u,Dn=({userGroups:e,loading:a,required:t,disabled:n,errorText:l})=>m.a.createElement(Rn,{disabled:n,error:!!l,validationText:l,required:t,loading:a,dataTest:p("forms-fielduserGroup"),name:"userGroup",label:S.t("Usergroup"),component:c.x,options:e,validate:t&&c.J});Dn.defaultProps={disabled:!1,loading:!1,required:!1,errorText:""};const In={userGroups:{resource:"userGroups",params:{paging:"false"}}},Fn=({required:e})=>{const{loading:a,error:t,data:n}=Object(ke.e)(In);if(a)return m.a.createElement(Dn,{required:e,loading:!0,showLoadingStatus:!0,userGroups:[]});if(t)return m.a.createElement(Dn,{required:e,disabled:!0,userGroups:[],errorText:t.message});const{userGroups:l}=n.userGroups,r=l.map(({id:e,displayName:a})=>({label:a,value:e}));return m.a.createElement(Dn,{required:e,userGroups:r})};Fn.defaultProps={required:!1};const{Form:jn}=c.u,xn={smsCommand:{resource:"smsCommands",id:({commandId:e})=>e,params:{fields:["name","parserType","receivedMessage","userGroup[name,id]"]}}},Pn=({commandId:e,onAfterChange:a,onCancel:t})=>{const n=bt({commandId:e,onAfterChange:a,replace:!0}),{loading:l,error:r,data:s}=Object(ke.e)(xn,{variables:{commandId:e}});if(l)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));if(r){const e=S.t("Something went wrong whilst loading the sms command");return m.a.createElement(c.t,{error:!0,title:e},r.message)}const{name:o,parserType:i,receivedMessage:d,userGroup:u}=s.smsCommand,g={name:o,parserType:i,receivedMessage:d,userGroup:u.id},E=[{value:u.id,label:u.name}];return m.a.createElement(jn,{keepDirtyOnReinitialize:!0,onSubmit:n,initialValues:g},({handleSubmit:e,pristine:a})=>m.a.createElement("form",{onSubmit:e,"data-test":p("commands-commandunregisteredparserform")},m.a.createElement(X,null,m.a.createElement(Xt,null)),m.a.createElement(X,null,m.a.createElement(dn,{disabled:!0})),m.a.createElement(X,null,m.a.createElement(Dn,{disabled:!0,userGroups:E})),m.a.createElement(X,null,m.a.createElement(Kt,null)),m.a.createElement(lt,{onCancel:()=>t(a)})))},{Field:Gn}=c.u,Ln=({programs:e,loading:a,required:t,disabled:n,errorText:l})=>m.a.createElement(Gn,{error:!!l,validationText:l,disabled:n,required:t,loading:a,dataTest:p("forms-fieldprogram"),name:"program",label:S.t("Program"),component:c.x,options:e,validate:t&&c.J,format:e=>(null===e||void 0===e?void 0:e.id)||null,parse:e=>({id:e})});Ln.defaultProps={disabled:!1,errorText:"",loading:!1,required:!1};const qn={programs:{resource:"programs",params:({registration:e})=>{const a={paging:"false"};if("undefined"!==typeof e){const t=e?"programType:eq:WITH_REGISTRATION":"programType:eq:WITHOUT_REGISTRATION";a.filter=t}return a}}},Un=({required:e,registration:a})=>{const t={registration:a},{loading:n,error:l,data:r}=(e=>Object(ke.e)(qn,{variables:{registration:e}}))({variables:t});if(n)return m.a.createElement(Ln,{required:e,loading:!0,showLoadingStatus:!0,programs:[]});if(l)return m.a.createElement(Ln,{required:e,disabled:!0,programs:[],errorText:l.message});const{programs:s}=r.programs,o=s.map(({id:e,displayName:a})=>({label:a,value:e}));return m.a.createElement(Ln,{required:e,programs:o})};Un.defaultProps={required:!1,registration:void 0};const{Form:Vn}=c.u,Hn=e=>Object(pe.a)(Object(pe.a)({},e),{},{[La]:Object.values(e[La])}),Bn={smsCommand:{resource:"smsCommands",id:({commandId:e})=>e,params:{fields:["name","parserType","separator","defaultMessage","wrongFormatMessage","noUserMessage","moreThanOneOrgUnitMessage","successMessage","program[id,displayName,programTrackedEntityAttributes[trackedEntityAttribute[:all,id,displayName]]]","smsCodes[:all,trackedEntityAttribute[id,displayName,valueType]]"]}}},zn=({commandId:e,onAfterChange:a,onCancel:t})=>{const n=bt({commandId:e,onAfterChange:a,formatCommand:Hn}),{loading:l,error:r,data:s}=Object(ke.e)(Bn,{variables:{commandId:e}});if(l)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));if(r){const e=S.t("Something went wrong whilst loading the sms command");return m.a.createElement(c.t,{error:!0,title:e},r.message)}const{name:o,parserType:i,program:d,separator:u,defaultMessage:g,wrongFormatMessage:p,noUserMessage:E,moreThanOneOrgUnitMessage:b,successMessage:f,smsCodes:y}=s.smsCommand,v=y.reduce((e,a)=>Object(pe.a)(Object(pe.a)({},e),{},{[a.trackedEntityAttribute.id]:a}),{}),h={name:o,parserType:i,program:d,separator:u,defaultMessage:g,wrongFormatMessage:p,noUserMessage:E,moreThanOneOrgUnitMessage:b,successMessage:f,smsCodes:v},C={value:d.id,label:d.displayName},w=d.programTrackedEntityAttributes.map(({trackedEntityAttribute:e})=>e).map(e=>{const{id:a,displayName:t,valueType:n}=e,l={id:a,displayName:t,valueType:n},r=v[a];return r&&(l.initialValue=r.code),l});return m.a.createElement(Vn,{keepDirtyOnReinitialize:!0,onSubmit:n,initialValues:h},({handleSubmit:e,pristine:a})=>m.a.createElement("form",{onSubmit:e},m.a.createElement(X,null,m.a.createElement(Xt,null)),m.a.createElement(X,null,m.a.createElement(dn,{disabled:!0})),m.a.createElement(X,null,m.a.createElement(Ln,{disabled:!0,programs:[C]})),m.a.createElement(X,null,m.a.createElement(gn,null)),m.a.createElement(X,null,m.a.createElement(Wt,null)),m.a.createElement(X,null,m.a.createElement(Tn,null)),m.a.createElement(X,null,m.a.createElement(en,null)),m.a.createElement(X,null,m.a.createElement(Qt,null)),m.a.createElement(X,null,m.a.createElement(_n,null)),m.a.createElement(O,null,S.t("SMS short codes")),w.map(e=>m.a.createElement(X,{key:e.id},m.a.createElement(fn,{id:e.id,displayName:e.displayName,valueType:e.valueType}))),m.a.createElement(lt,{onCancel:()=>t(a)})))},{Field:Kn}=c.u,Jn=({programStages:e,disabled:a,loading:t,required:n,errorText:l})=>m.a.createElement(Kn,{disabled:a,error:!!l,validationText:l,required:n,loading:t,dataTest:p("forms-fieldprogramStage"),name:"programStage",label:S.t("Program stage"),component:c.x,options:e,validate:n&&c.J,format:e=>(null===e||void 0===e?void 0:e.id)||null,parse:e=>({id:e})});Jn.defaultProps={disabled:!1,loading:!1,required:!1,errorText:""};const Wn={programStages:{resource:"programStages",params:({programId:e})=>({paging:"false",filter:e?"program.id:eq:".concat(e):void 0})}},Yn=({required:e,programId:a})=>{var t;const{loading:n,error:l,data:r,refetch:s}=(({programId:e,lazy:a})=>Object(ke.e)(Wn,{variables:{programId:e},lazy:a}))({lazy:!0});if(Object(i.useEffect)(()=>{a&&s({programId:a})},[a]),n)return m.a.createElement(Jn,{loading:!0,required:e,programStages:[]});if(l)return m.a.createElement(Jn,{disabled:!0,errorText:l.message,required:e,programStages:[]});if(!a||!r)return m.a.createElement(Jn,{disabled:!0,required:e,programStages:[]});const o=((null===r||void 0===r||null===(t=r.programStages)||void 0===t?void 0:t.programStages)||[]).map(({id:e,displayName:a})=>({label:a,value:e}));return m.a.createElement(Jn,{required:e,programStages:o})};Yn.defaultProps={required:!1};const Qn={smsCommand:{resource:"smsCommands",id:({id:e})=>e,params:{fields:["*","program[id,displayName]","programStage[id,displayName,programStageDataElements[dataElement[id,displayName]]]"],paging:"false"}}},{Form:Zn}=c.u,Xn=e=>Object(pe.a)(Object(pe.a)({},e),{},{[La]:Object.values(e[La])}),$n=({commandId:e,onAfterChange:a,onCancel:t})=>{const{error:n,data:l}=(r=e,Object(ke.e)(Qn,{variables:{id:r}}));var r;const s=null===l||void 0===l?void 0:l.smsCommand,o=null===s||void 0===s?void 0:s.programStage.programStageDataElements,i=bt({commandId:e,onAfterChange:a,formatCommand:Xn});if(n){const e=S.t("Something went wrong whilst loading the command's details");return m.a.createElement(c.t,{error:!0,title:e},n.message)}if(!s)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));const d=(e=>{const a=e[Ia],t=e[xa],n=e[Pa],l=e[Ga],r=e[Ma],s=e[Ha],o=e[Fa],c=e[Da],i=e[Ua],m=e[La].reduce((e,a)=>Object(pe.a)(Object(pe.a)({},e),{},{[a.dataElement.id]:a}),{});return{[Ia]:a,[ja]:sn.value,[xa]:t,[Pa]:n,[Ga]:l,[Ma]:r,[Ha]:s,[Fa]:o,[Da]:c,[Ua]:i,[La]:m}})(s),u={value:s.program.id,label:s.program.displayName},g={value:s.programStage.id,label:s.programStage.displayName};return m.a.createElement(Zn,{keepDirtyOnReinitialize:!0,onSubmit:i,initialValues:d},({handleSubmit:e,values:a,pristine:n})=>m.a.createElement("form",{onSubmit:e,"data-test":p("commands-commandeditprogramstagedataentryparserform")},m.a.createElement(X,null,m.a.createElement(Xt,null)),m.a.createElement(X,null,m.a.createElement(dn,{disabled:!0})),m.a.createElement(X,null,m.a.createElement(Ln,{disabled:!0,programs:[u]})),m.a.createElement(X,null,m.a.createElement(Jn,{disabled:!0,programStages:[g]})),m.a.createElement(X,null,m.a.createElement(gn,null)),m.a.createElement(X,null,m.a.createElement(Wt,null)),m.a.createElement(X,null,m.a.createElement(Tn,null)),m.a.createElement(X,null,m.a.createElement(en,null)),m.a.createElement(X,null,m.a.createElement(Qt,null)),m.a.createElement(X,null,m.a.createElement(_n,null)),m.a.createElement(O,null,S.t("SMS short codes")),o&&m.a.createElement(X,null,m.a.createElement(Mn,{programStageDataElements:o,smsCodes:a[La]})),m.a.createElement(lt,{onCancel:()=>t(n)})))},el={smsCommand:{resource:"smsCommands",id:({id:e})=>e,params:{fields:["*","dataset[id,displayName,dataSetElements[dataElement[id,displayName,categoryCombo[categoryOptionCombos[id,displayName,code]]]]"],paging:"false"}}},{Form:al,FormSpy:tl}=c.u,nl=e=>{let a=!1;const t={},n=e[La],l=(n?Object.entries(n):[]).filter(([e,{code:a}])=>a);if(l.length){const e=(e=>e.reduce((a,t,n)=>{const[l,r]=t;if(a.includes(l))return a;const s=e.filter(([e,a],t)=>a.code===r.code&&t!==n);if(!s.length)return a;const o=s.reduce((e,[a])=>[...e,a],[l]);return[...a,...o]},[]))(l);if(e.length){a=!0;const n={};e.forEach(e=>{n[e]={code:S.t("Duplicate value!")}}),t[La]=t[La]||{},Object.assign(t[La],n)}}return a?t:void 0},ll=e=>{const a=e[La],t=Object.entries(a).map(([e,{code:a,formula:t,compulsory:n,optionId:l}])=>{const[r]=e.split("-"),s={code:a,compulsory:n,dataElement:{id:r}};return t&&(s.formula=t),l&&(s.optionId=l),s});return Object(pe.a)(Object(pe.a)({},e),{},{[La]:t})},rl=({commandId:e,onAfterChange:a,dataTest:t,initialCompletenessMethod:n,onCancel:l})=>{const{error:r,data:s}=(o=e,Object(ke.e)(el,{variables:{id:o}}));var o;const i=null===s||void 0===s?void 0:s.smsCommand,d=bt({commandId:e,onAfterChange:a,formatCommand:ll});if(r){const e=S.t("Something went wrong whilst loading the command's details");return m.a.createElement(c.t,{error:!0,title:e},r.message)}if(!i)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));const u={value:i.dataset.id,label:i.dataset.displayName},g=((e,a)=>{const t=e[Ia],n=an.value,l={id:e.dataset.id},r=e[Ga],s=a||e[ka]||Ja.value,o=e[Va],c=e[Ma],i=e[Ha],m=e[Fa],d=e[Da],u=e[Ua],g=e[La].reduce((e,{code:a,compulsory:t,formula:n,optionId:l,dataElement:r})=>{const s=l<10?r.id:"".concat(r.id,"-").concat(l),o={code:a,compulsory:t,optionId:l};return n&&(o.formula=n),Object(pe.a)(Object(pe.a)({},e),{},{[s]:o})},{}),p=e[qa]||[];return{[Ia]:t,[ja]:n,dataset:l,[Ga]:r,[ka]:s,[Va]:o,[Ma]:c,[Ha]:i,[Fa]:m,[Da]:d,[Ua]:u,smsCodes:g,specialCharacters:p}})(i,n),p=i.dataset.dataSetElements.reduce((e,{dataElement:a})=>{var t;const n=null===(t=a.categoryCombo)||void 0===t?void 0:t.categoryOptionCombo;if(!n)return[...e,{dataElement:a}];const l=n.map(e=>({dataElement:a,categoryOptionCombo:e}));return[...e,...l]},[]);return m.a.createElement(al,{keepDirtyOnReinitialize:!0,onSubmit:d,initialValues:g,validate:nl,subscription:{pristine:!0}},({handleSubmit:e,form:a,pristine:n})=>m.a.createElement("form",{onSubmit:e,"data-test":t},m.a.createElement(X,null,m.a.createElement(Xt,null)),m.a.createElement(X,null,m.a.createElement(dn,{disabled:!0})),m.a.createElement(X,null,m.a.createElement(yt,{disabled:!0,dataSets:[u]})),m.a.createElement(X,null,m.a.createElement(Bt,null)),m.a.createElement(X,null,m.a.createElement(On,null)),m.a.createElement(X,null,m.a.createElement(gn,null)),m.a.createElement(X,null,m.a.createElement(Wt,null)),m.a.createElement(X,null,m.a.createElement(Tn,null)),m.a.createElement(X,null,m.a.createElement(en,null)),m.a.createElement(X,null,m.a.createElement(Qt,null)),m.a.createElement(X,null,m.a.createElement(_n,null)),p&&m.a.createElement(Ut,{DE_COC_combinations:p}),m.a.createElement(O,null,S.t("Special characters")),m.a.createElement(tl,{subscription:{values:!0}},({values:e})=>m.a.createElement(m.a.Fragment,null,e[qa].map((e,a)=>m.a.createElement(X,{key:a},m.a.createElement(Cn,{index:a}))))),m.a.createElement(Ka,null),m.a.createElement(lt,{onCancel:()=>l(n)})))},sl=({commandId:e,onAfterChange:a,onCancel:t})=>m.a.createElement(rl,{dataTest:p("smscommandkeyvalueparser-commandeditkeyvalueparserform"),commandId:e,onAfterChange:a,onCancel:t}),ol=({commandId:e,onAfterChange:a,onCancel:t})=>m.a.createElement(rl,{dataTest:p("smscommandkeyvalueparser-commandeditj2meparserform"),commandId:e,onAfterChange:a,onCancel:t,initialCompletenessMethod:Wa.value}),cl={smsCommand:{resource:"smsCommands",id:({id:e})=>e,params:{fields:["*","program[id,displayName]","programStage[id,displayName,programStageDataElements[id,dataElement[id,displayName]]"],paging:"false"}}},{Form:il}=c.u,ml=e=>Object(pe.a)(Object(pe.a)({},e),{},{[La]:Object.values(e[La])}),dl=({commandId:e,onAfterChange:a,onCancel:t})=>{const{error:n,data:{smsCommand:l}={}}=(r=e,Object(ke.e)(cl,{variables:{id:r}}));var r;const s=bt({commandId:e,onAfterChange:a,formatCommand:ml});if(n){const e=S.t("Something went wrong whilst loading the command's details");return m.a.createElement(c.t,{error:!0,title:e},n.message)}if(!l)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));const o={value:l.program.id,label:l.program.displayName},i={value:l.programStage.id,label:l.programStage.displayName},d=l.programStage.programStageDataElements,u=(e=>{const a=e[Ia],t=e[xa],n=e[Pa],l=e[Ga],r=e[Ma],s=e[Ha],o=e[Fa],c=e[Da],i=e[Ua],m=e[La].reduce((e,a)=>Object(pe.a)(Object(pe.a)({},e),{},{[a.dataElement.id]:a}),{});return{[Ia]:a,[ja]:on.value,[xa]:t,[Pa]:n,[Ga]:l,[Ma]:r,[Ha]:s,[Fa]:o,[Da]:c,[Ua]:i,[La]:m}})(l);return m.a.createElement(il,{keepDirtyOnReinitialize:!0,initialValues:u,onSubmit:s},({handleSubmit:e,values:a,pristine:n})=>m.a.createElement("form",{onSubmit:e},m.a.createElement(X,null,m.a.createElement(Xt,null)),m.a.createElement(X,null,m.a.createElement(dn,{disabled:!0})),m.a.createElement(X,null,m.a.createElement(Ln,{disabled:!0,programs:[o]})),m.a.createElement(X,null,m.a.createElement(Jn,{disabled:!0,programStages:[i]})),m.a.createElement(X,null,m.a.createElement(gn,null)),m.a.createElement(X,null,m.a.createElement(Wt,null)),m.a.createElement(X,null,m.a.createElement(Tn,null)),m.a.createElement(X,null,m.a.createElement(en,null)),m.a.createElement(X,null,m.a.createElement(Qt,null)),m.a.createElement(X,null,m.a.createElement(_n,null)),m.a.createElement(O,null,S.t("SMS short codes")),d&&m.a.createElement(X,null,m.a.createElement(Mn,{programStageDataElements:d,smsCodes:a[La]})),m.a.createElement(lt,{onCancel:()=>t(n)})))},{Form:ul}=c.u,gl={smsCommand:{resource:"smsCommands",id:({commandId:e})=>e,params:{fields:["name","parserType","receivedMessage","userGroup[name,id]"]}}},pl=({commandId:e,onAfterChange:a,onCancel:t})=>{const n=bt({commandId:e,onAfterChange:a,replace:!0}),{loading:l,error:r,data:s}=Object(ke.e)(gl,{variables:{commandId:e}});if(l)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));if(r){const e=S.t("Something went wrong whilst loading the sms command");return m.a.createElement(c.t,{error:!0,title:e},r.message)}const{name:o,parserType:i,receivedMessage:d,userGroup:u}=s.smsCommand,g={name:o,parserType:i,receivedMessage:d,userGroup:u.id},E=[{value:u.id,label:u.name}];return m.a.createElement(ul,{keepDirtyOnReinitialize:!0,onSubmit:n,initialValues:g},({handleSubmit:e,pristine:a})=>m.a.createElement("form",{onSubmit:e,"data-test":p("commands-commandeditalertparserform")},m.a.createElement(X,null,m.a.createElement(Xt,null)),m.a.createElement(X,null,m.a.createElement(dn,{disabled:!0})),m.a.createElement(X,null,m.a.createElement(Dn,{disabled:!0,userGroups:E})),m.a.createElement(X,null,m.a.createElement(Kt,null)),m.a.createElement(lt,{onCancel:()=>t(a)})))};var El=t(220),bl=t.n(El);const fl="".concat("/sms-config/edit","/:id"),yl=()=>{const e=Object(o.g)(),{id:a}=Object(o.i)(),{loading:t,error:n,data:l}=(e=>Object(ke.e)(mt,{variables:{id:e}}))(a),[r,s]=Object(i.useState)(!1);if(t)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));if(n){const e=S.t("Something went wrong whilst loading commands");return m.a.createElement(c.t,{error:!0,title:e},n.message)}const d=null===l||void 0===l?void 0:l.smsCommand[ja],u=(e=>{const a=st.bind(null,e);return e&&a(an)?sl:e&&a(tn)?ol:e&&a(nn)?pl:e&&a(sn)?$n:e&&a(ln)?Pn:e&&a(on)?dl:e&&a(rn)?zn:null})(d);return m.a.createElement("div",{className:bl.a.container},m.a.createElement(w,null,S.t("Edit command")),u&&m.a.createElement(u,{commandId:a,onCancel:a=>a?e.goBack():s(!0),onAfterChange:()=>e.push(Tl)}),r&&m.a.createElement(Ee,{onConfirmCancel:()=>e.push(Tl),onAbortCancel:()=>s(!1)}),!d&&m.a.createElement(c.t,{error:!0,title:S.t("Unrecognised parser type")},S.t("Could not find the requested parser type")))};var vl=t(221),Sl=t.n(vl);const{Form:hl,useForm:Cl}=c.u,wl=({handleSubmit:e,submitting:a})=>{(()=>{const e=Cl(),[a,t]=Object(i.useState)(e.getState().values);Object(i.useEffect)(()=>e.subscribe(({values:n})=>{e.batch(()=>{const t=n[ja],l=n.program,r=n.programStage,s=a.program,o=a[ja];r&&(s&&l!==s||o&&t!==o)&&e.change("programStage",null)}),t(n)},{values:!0}),[a])})();const t=Object(o.g)(),n=Cl(),{values:l}=n.getState(),r=l[ja],s=l.program,d=r===an.value||r===tn.value,u=r===nn.value||r===ln.value,g=r===rn.value||r===sn.value||r===on.value,p=r===sn.value,E=r!==on.value&&void 0;return m.a.createElement("div",{className:Sl.a.container},m.a.createElement(w,null,S.t("Add command")),m.a.createElement("form",{onSubmit:e},m.a.createElement(X,null,m.a.createElement(Xt,null)),m.a.createElement(X,null,m.a.createElement(dn,null)),d&&m.a.createElement(X,null,m.a.createElement(St,null)),u&&m.a.createElement(X,null,m.a.createElement(Fn,null)),g&&m.a.createElement(X,null,m.a.createElement(Un,{registration:E})),p&&m.a.createElement(X,null,m.a.createElement(Yn,{programId:s||""})),m.a.createElement(c.d,null,m.a.createElement(c.c,{primary:!0,type:"submit",icon:a?m.a.createElement(c.i,{small:!0}):null,disabled:a},S.t("Add command")),m.a.createElement(c.c,{onClick:()=>t.goBack()},S.t("Cancel")))))},_l=()=>{const e=Object(o.g)(),[a]=(({onComplete:e,onError:a})=>Object(ke.d)(ot,{onComplete:e,onError:a}))({onComplete:()=>e.push(Tl)});return m.a.createElement(hl,{onSubmit:e=>a(e)},({handleSubmit:e,submitting:a})=>m.a.createElement(wl,{handleSubmit:e,submitting:a}))};var Nl=t(222),Ol=t.n(Nl);const Al=S.t("Commands"),Tl="/sms-config",kl=()=>{var e,a,t,n,l,s;const d=Object(o.g)(),[u,g]=Object(i.useState)([]),[E,b]=Object(i.useState)(!1),{loading:f,error:y,data:v,refetch:h}=Object(ke.e)(dt),[C,{loading:_,error:N}]=it();if(f)return m.a.createElement("div",{"data-test":p("views-smscommandlist")},m.a.createElement(w,null,Al),m.a.createElement(c.f,null,m.a.createElement(c.i,null)));const O=y||N;if(O){const e=S.t("Something went wrong whilst performing the requested operation");return m.a.createElement("div",{"data-test":p("views-smscommandlist")},m.a.createElement(w,null,Al),m.a.createElement(c.t,{error:!0,title:e},O.message))}const A=u.length===(null===v||void 0===v||null===(e=v.smsCommands)||void 0===e||null===(a=e.smsCommands)||void 0===a?void 0:a.length),T=(null===v||void 0===v||null===(t=v.smsCommands)||void 0===t||null===(n=t.smsCommands)||void 0===n?void 0:n.length)>0;return m.a.createElement("div",{"data-test":p("views-smscommandlist"),className:Ol.a.container},m.a.createElement(w,null,Al),m.a.createElement(re,null,S.t("SMS commands process SMS messages received by a DHIS2 instance, taking certain actions depending on the command and message content. Multiple SMS commands can be set up to process and handle data in multiple ways. Add and configure SMS commands below. Read about SMS commands in the DHIS2 documentation.")),m.a.createElement(Xe,{addLabel:S.t("Add command"),deleteLabel:S.t("Delete selected"),dataTest:"views-smscommandlist",onAddClick:()=>d.push("/sms-config/new"),onDeleteClick:()=>b(!0),disableAdd:_,disableDelete:!u.length||_}),E&&m.a.createElement(rt,{onCancelClick:()=>b(!1),onDeleteClick:async()=>{const e=u.map(({id:e})=>e);await C({ids:e}),g([]),b(!1),h()}}),m.a.createElement(c.z,null,m.a.createElement(c.E,null,m.a.createElement(c.G,null,m.a.createElement(c.C,null,m.a.createElement(c.g,{checked:A,onChange:()=>{var e;const a=null===v||void 0===v||null===(e=v.smsCommands)||void 0===e?void 0:e.smsCommands;a&&(u.length===a.length?g([]):g(a.map(({id:e,displayName:a})=>({id:e,displayName:a}))))}})),m.a.createElement(c.C,null,S.t("Sms command")),m.a.createElement(c.C,null,S.t("Parser")),m.a.createElement(c.C,null))),m.a.createElement(c.A,null,T?null===v||void 0===v||null===(l=v.smsCommands)||void 0===l||null===(s=l.smsCommands)||void 0===s?void 0:s.map(({id:e,displayName:a,parserType:t})=>m.a.createElement(c.F,{key:e},m.a.createElement(c.B,{className:Ol.a.checkbox},m.a.createElement(c.g,{checked:!!u.find(({id:a})=>e===a),onChange:()=>(e=>{const{id:a}=e;if(u.find(({id:e})=>a===e)){const e=u.findIndex(({id:e})=>a===e);return g([...u.slice(0,e),...u.slice(e+1)])}return g([...u,e])})({id:e,displayName:a})})),m.a.createElement(c.B,null,a),m.a.createElement(c.B,null,(e=>{const a=Object.values(r).find(({value:a})=>a===e);return(null===a||void 0===a?void 0:a.label)||e})(t)),m.a.createElement(c.B,{className:Ol.a.editButtonCell},m.a.createElement(c.c,{onClick:()=>d.push("".concat("/sms-config/edit","/").concat(e))},S.t("Edit"))))):m.a.createElement(c.F,null,m.a.createElement(c.B,{colSpan:"4",className:Ol.a.noResults},S.t("No commands to display"))))))},Ml={DELIVERED:y.a.t("Delivered"),ERROR:y.a.t("Error"),FAILED:y.a.t("Failed"),OUTBOUND:y.a.t("Outbound"),PENDING:y.a.t("Pending"),SCHEDULED:y.a.t("Scheduled"),SENT:y.a.t("Sent")};var Rl=t(223),Dl=t.n(Rl);var Il=({sms:e,toggleSelected:a,isSelected:t})=>{const{message:n,status:l,date:r,id:s}=e,o=null===e.recipients?[]:e.recipients;return m.a.createElement(c.F,null,m.a.createElement(c.B,null,m.a.createElement(c.g,{onChange:()=>a(s),checked:t})),m.a.createElement(c.B,null,n),m.a.createElement(c.B,null,o.map((e,a,t)=>m.a.createElement("span",{key:e+a,className:Dl.a.recipient},e,a!==t.length-1&&", "))),m.a.createElement(c.B,null,Ml[l]),m.a.createElement(c.B,null,fa()(r).format("MMMM Do YYYY, h:mm:ss a")))};const Fl=()=>{throw new Error("RefetchSms consumer needs to have a valid Provider as parent")};var jl=Object(i.createContext)({refetch:Fl,refetchAndClear:Fl}),xl=t(224),Pl=t.n(xl);const Gl=["10","20","30","40","50","100"];var Ll=({pager:e})=>{const{refetchAndClear:a}=Object(i.useContext)(jl),t=e=>{a({page:e})},{page:n,pageCount:l,pageSize:r,total:s}=e,o=Math.min((n-1)*r+1,s),d=Math.min(o+r-1,s),u=Array.from({length:l},(e,a)=>(a+1).toString());return m.a.createElement("div",{className:Pl.a.container},m.a.createElement("div",{className:Pl.a.left},m.a.createElement("span",null,S.t("Show")),m.a.createElement(c.v,{dense:!0,selected:r.toString(),onChange:({selected:e})=>{a({pageSize:e,page:1})}},Gl.map(e=>m.a.createElement(c.y,{key:e,value:e,label:e}))),m.a.createElement("span",null,S.t("per page"))),m.a.createElement("div",{className:Pl.a.right},m.a.createElement("div",{className:Pl.a.amount},S.t("Viewing {{firstItem}}-{{lastItem}} of {{total}}",{firstItem:o,lastItem:d,total:s})),m.a.createElement(c.c,{small:!0,disabled:1===n,onClick:()=>t(n-1)},S.t("Previous")),m.a.createElement("div",{className:Pl.a.pageselection},m.a.createElement("div",null,S.t("Page")),m.a.createElement(c.v,{dense:!0,selected:n.toString(),onChange:({selected:e})=>{t(e)}},u.map(e=>m.a.createElement(c.y,{key:e,value:e,label:e}))),m.a.createElement("div",null,S.t("of {{pageCount}}",{pageCount:l}))),m.a.createElement(c.c,{small:!0,disabled:n===l,onClick:()=>t(n+1)},S.t("Next"))))},ql=t(225),Ul=t.n(ql);var Vl=({smses:e,toggleSelected:a,toggleAll:t,allSelected:n,selected:l,pager:r})=>m.a.createElement(c.z,null,m.a.createElement(c.E,null,m.a.createElement(c.G,null,m.a.createElement(c.C,null,m.a.createElement(c.g,{disabled:0===e.length,onChange:t,checked:n})),m.a.createElement(c.C,null,S.t("Message")),m.a.createElement(c.C,null,S.t("Recipients")),m.a.createElement(c.C,null,S.t("Status")),m.a.createElement(c.C,null,S.t("Date")))),m.a.createElement(c.A,null,0===e.length?m.a.createElement(c.F,null,m.a.createElement(c.B,{colSpan:"7",className:Ul.a.noResults},S.t("No SMSes to display"))):e.map(e=>m.a.createElement(Il,{key:e.id,sms:e,isSelected:l.includes(e.id),toggleSelected:a}))),m.a.createElement(c.D,null,m.a.createElement(c.F,null,m.a.createElement(c.B,{colSpan:"7"},m.a.createElement(Ll,{pager:r})))));const Hl=e=>"ALL"===e?"":e,Bl=[{label:S.t("All"),value:"ALL"},...["DELIVERED","ERROR","FAILED","OUTBOUND","PENDING","SCHEDULED","SENT"].map(e=>({label:Ml[e],value:e}))];var zl=({status:e,setStatus:a})=>{const{refetchAndClear:t}=Object(i.useContext)(jl);return m.a.createElement(c.w,{label:S.t("Filter by status"),inputWidth:"200px",onChange:({selected:e})=>{a(e),t({status:Hl(e),page:1})},selected:e},Bl.map(({label:e,value:a})=>m.a.createElement(c.y,{key:e,label:e,value:a})))};const Kl={resource:"sms/outbound",params:({ids:e})=>({ids:e}),type:"delete"};var Jl=({selected:e})=>{const a=0===e.length,t=e.join(","),{addAlert:n}=Object(i.useContext)(g),{refetchAndClear:l}=Object(i.useContext)(jl),[r,{loading:s}]=Object(ke.d)(Kl,{onComplete:()=>{l()},onError:e=>{n({type:"critical",message:e.message})}});return m.a.createElement(c.c,{destructive:!0,disabled:a||s,onClick:()=>r({ids:t})},S.t("Delete selected"))},Wl=t(226),Yl=t.n(Wl);const Ql=S.t("Sent"),Zl="/sent",Xl={sms:{resource:"sms/outbound",params:({status:e,page:a,pageSize:t})=>{const n={pageSize:t,page:a,fields:["id","message","status","date","recipients"]};return e?Object(pe.a)(Object(pe.a)({},n),{},{filter:"status:eq:".concat(e)}):n}}},$l=()=>{var e;const[a,t]=Object(i.useState)([]),[n,l]=Object(i.useState)("ALL"),{loading:r,error:s,data:o,refetch:d}=Object(ke.e)(Xl,{variables:{status:Hl(n),pageSize:10,page:1}});if(r)return m.a.createElement(m.a.Fragment,null,m.a.createElement(w,null,Ql),m.a.createElement(c.f,null,m.a.createElement(c.i,null)));if(s){const e=S.t("Something went wrong whilst loading sent SMSes");return m.a.createElement(m.a.Fragment,null,m.a.createElement(w,null,Ql),m.a.createElement(c.t,{error:!0,title:e},s.message))}const u=(e=>e.map(e=>e.id))(o.sms.outboundsmss),g=((e,a)=>{const t=0===e.length,n=e.length!==a.length;return!t&&!n&&e.every(e=>a.includes(e))})(u,a),p=(({selected:e,setSelected:a})=>t=>{if(e.includes(t)){const n=e.filter(e=>e!=t);a(n)}})({selected:a,setSelected:t}),E=(({allSelected:e,setSelected:a,allIds:t})=>()=>a(e?[]:t))({allSelected:g,setSelected:t,allIds:u}),b=(({selected:e,setSelected:a})=>t=>{if(e.includes(t)){const n=e.filter(e=>e!==t);return a(n)}return a([...e,t])})({selected:a,setSelected:t}),f={refetch:d,refetchAndClear:e=>{t([]),d(e)}},y=(null===o||void 0===o||null===(e=o.sms)||void 0===e?void 0:e.outboundsmss)||[];return m.a.createElement("div",{className:Yl.a.container},m.a.createElement(jl.Provider,{value:f},m.a.createElement(w,null,Ql),m.a.createElement("div",{className:Yl.a.header},m.a.createElement(zl,{status:n,setStatus:l}),m.a.createElement("div",{className:Yl.a.headerRight},m.a.createElement(Jl,{selected:a}))),m.a.createElement(Vl,{smses:y,cleanSelected:p,allSelected:g,selected:a,toggleSelected:b,toggleAll:E,pager:o.sms.pager})))};var er=t(227),ar=t.n(er);const tr=({label:e,path:a,exactMatch:t})=>{const n=Object(o.g)(),l=((e,a)=>{const t=Object(o.j)(e);return!!t&&(!a||t.isExact)})(a,t);return m.a.createElement(c.o,{className:ar.a.item,onClick:()=>n.push(a),active:l,label:e,dataTest:p("navigation-navigationitem")})};tr.defualtProps={exactMatch:!1};const nr=()=>m.a.createElement(c.n,{dataTest:p("navigation-navigation")},m.a.createElement(tr,{path:"/",label:"Overview",exactMatch:!0}),m.a.createElement(tr,{path:aa,label:"Gateway configuration"}),m.a.createElement(tr,{path:Tl,label:Al}),m.a.createElement(tr,{path:Zl,label:Ql}),m.a.createElement(tr,{path:ra,label:la}));a.default=()=>m.a.createElement(E,null,m.a.createElement(c.j,{spacers:!0,colors:!0}),m.a.createElement(s.a,null,m.a.createElement("div",{className:u.a.container,"data-test":p("app")},m.a.createElement("div",{className:u.a.sidebar},m.a.createElement(nr,null)),m.a.createElement("main",{className:u.a.content},m.a.createElement(o.d,null,m.a.createElement(o.b,{exact:!0,path:"/",component:D}),m.a.createElement(o.b,{exact:!0,path:"/index.html"},m.a.createElement(o.a,{to:"/"})),"",m.a.createElement(o.b,{exact:!0,path:aa,component:ta}),m.a.createElement(o.b,{exact:!0,path:ye,component:ve}),m.a.createElement(o.b,{exact:!0,path:"/sms-gateway/new",component:Ye}),"",m.a.createElement(o.b,{exact:!0,path:Tl,component:kl}),m.a.createElement(o.b,{exact:!0,path:fl,component:yl}),m.a.createElement(o.b,{exact:!0,path:"/sms-config/new",component:_l}),"",m.a.createElement(o.b,{exact:!0,path:Zl,component:$l}),"",m.a.createElement(o.b,{exact:!0,path:ra,component:Ta}),m.a.createElement(o.b,{component:b}))))))}}]);
//# sourceMappingURL=app.4ae33e1b.chunk.js.map