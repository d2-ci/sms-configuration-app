(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[132],{190:function(e,a,t){e.exports={container:"App_container__2zgzu",sidebar:"App_sidebar__10tAV",content:"App_content__3I8HS"}},191:function(e){e.exports=JSON.parse('{"Are you sure you want to cancel? Unsaved changes will be lost":"","No, stay on page":"","Yes, cancel":"","Dataset":"","Confirm deletion":"","Are you sure you want to delete the selected gateways?":"","Auth token":"","Name":"","Password":"","Url template":"","User name":"","Add key value pair":"","Save gateway":"","Add gateway":"","Cancel":"","Gateway setup":"","Key value pairs":"","Key value pairs can be included in the URL. This is some helper text which provides an intro to what the key value pairs actually do.":"","Key":"","Value":"","Send as header":"","Encode":"","Confidential":"","Remove key value pair":"","Type":"","Make default":"","Default gateway":"","Edit":"","BulkSMS":"","Clickatell":"","Generic":"","Program":"","Program stage":"","Are you sure you want to delete the selected commands?":"","Delete":"","Save command":"","Something went wrong whilst submitting the form":"","Something went wrong whilst loading the sms command":"","Something went wrong whilst loading the command\'s details":"","SMS short codes":"","Add special character":"","Required values notice":"","Completeness method":"","Confirm message":"","Reply message if no codes are sent (only the command)":"","More than one orgunit message":"","No user message":"","Parser":"","Field separator":"","Special character name":"","Special character value":"","Remove":"","Success message":"","Use current period for reporting":"","Wrong format message":"","default":"","Loading formula":"","Formula":"","Edit formula":"","Add formula":"","Formula for {{combo}}":"","Data element":"","formula operator":"","Something went wrong whilst saving":"","Save":"","Receive all data values":"","Receive at least one data value":"","Do not mark as complete":"","Key value parser":"","J2ME parser":"","Alert parser":"","Unregistered parser":"","Tracked entity registration parser":"","Program stage data entry parser":"","Event registration parser":"","Duplicate value!":"","Special characters":"","Usergroup":"","Something went wrong whilst loading gateways":"","Edit gateway":"","Something went wrong whilst saving gateways":"","Gateway not found":"","The requested gateway could not be loaded":"","Something went wrong whilst saving the gateway":"","Something went wrong whilst performing the requested operation":"","An SMS gateway lets a DHIS2 instance send and receive SMS messages. Different gateway types can be added and configured below. At least one gateway is needed to send and receive SMS messages. Load balancing will use all gateways if there are multiple available. Read about gateway configuration in the DHIS2 documentation.":"","Delete selected":"","No gateways found":"","It looks like there aren\'t any configured gateways, or they couldn\'t be loaded.":"","Overview: SMS Configuration":"","Configure settings for SMS sending, receiving, data reporting, alerts, registration and more.":"","Gateway Configuration":"","Add and manage gateways for sending and receiving SMS messages in DHIS2.":"","Set up gateways":"","SMS Commands":"","Add and manage commands triggered by incoming SMS messages to register, alert and more.":"","Set up SMS commands":"","Sent SMS messages":"","Open logs of all SMS messages sent from DHIS2.":"","View all sent SMS":"","Received SMS messages":"","Open logs of all SMS messages received by DHIS2.":"","View all received SMS":"","Filter by status":"","Filter by phone number":"","Filter":"","Show":"","per page":"","Viewing {{firstItem}}-{{lastItem}} of {{total}}":"","Previous":"","Page":"","of {{pageCount}}":"","Next":"","Something went wrong whilst loading received SMSes":"","Message":"","Phone number":"","Status":"","Sender":"","Date":"","No SMSes to display":"","Unknown":"","Received":"","All":"","Failed":"","Incoming":"","Processed":"","Processing":"","Sent":"","Unhandled":"","Something went wrong whilst loading sent SMSes":"","Recipients":"","Delivered":"","Error":"","Outbound":"","Pending":"","Scheduled":"","Something went wrong whilst loading commands":"","Edit command":"","Unrecognised parser type":"","Could not find the requested parser type":"","Add command":"","Commands":"","SMS commands process SMS messages received by a DHIS2 instance, taking certain actions depending on the command and message content. Multiple SMS commands can be set up to process and handle data in multiple ways. Add and configure SMS commands below. Read about SMS commands in the DHIS2 documentation.":"","Sms command":"","No commands to display":""}')},192:function(e,a,t){e.exports={headline:"PageHeadline_headline__1llN5"}},193:function(e,a,t){e.exports={subHeadline:"PageSubHeadline_subHeadline__2c8Kn"}},194:function(e,a,t){e.exports={explanation:"Home_explanation__10no3",cardTitle:"Home_cardTitle__3gL7c",cardText:"Home_cardText__1ODXu",cardLinkWrapper:"Home_cardLinkWrapper__ZU7rA",cardLink:"Home_cardLink__3qiDf",grid:"Home_grid__31J-5",gridItem:"Home_gridItem__1gOsm"}},200:function(e,a,t){e.exports={button:"GatewayAddKeyValuePair_button__3hPEY"}},201:function(e,a,t){e.exports={formRow:"FormRow_formRow__3ALDU"}},202:function(e,a,t){e.exports={paragraph:"Paragraph_paragraph__3yubY"}},203:function(e,a,t){e.exports={container:"GatewayKeyValuePair_container__D-LyM",textInputs:"GatewayKeyValuePair_textInputs__dJAb3",keyInput:"GatewayKeyValuePair_keyInput__2WHV_",valueInput:"GatewayKeyValuePair_valueInput__1uRVv",checkboxGroup:"GatewayKeyValuePair_checkboxGroup__2k2Cu",checkbox:"GatewayKeyValuePair_checkbox__2hg0g"}},204:function(e,a,t){e.exports={container:"GatewayConfigFormEdit_container__1d38w"}},205:function(e,a,t){e.exports={rowActions:"GatewaysTable_rowActions__2fK3j",checkboxCell:"GatewaysTable_checkboxCell__3uvd3",typeCell:"GatewaysTable_typeCell__Qx_fl",editCell:"GatewaysTable_editCell__3mzrM",defaultCell:"GatewaysTable_defaultCell__1huny",makeDefaultButton:"GatewaysTable_makeDefaultButton__3gFiv",isDefaultText:"GatewaysTable_isDefaultText__15qyD"}},206:function(e,a,t){e.exports={container:"GatewayList_container__jCYee",processingMessage:"GatewayList_processingMessage__1RE2H",loadingContainer:"GatewayList_loadingContainer__7veW4"}},207:function(e,a,t){e.exports={container:"GatewayConfigFormNew_container__pJ1_K"}},208:function(e,a,t){e.exports={container:"ListActions_container__2mPW8"}},209:function(e,a,t){e.exports={container:"GatewayConfigList_container__3BZQo",actions:"GatewayConfigList_actions__yMRge"}},210:function(e,a,t){e.exports={container:"Filter_container__zWNRg",inputStrip:"Filter_inputStrip__28I4q"}},211:function(e,a,t){e.exports={container:"Pagination_container__1oOhc",verticalAlign:"Pagination_verticalAlign__2xbtG",select:"Pagination_select__39auA",buttonPrevious:"Pagination_buttonPrevious__SXF81",buttonNext:"Pagination_buttonNext__1HLDE",summary:"Pagination_summary__2dp6R"}},212:function(e,a,t){e.exports={noResults:"SmsTable_noResults__1t04p",originator:"SmsTable_originator__22EFE"}},213:function(e,a,t){e.exports={container:"ReceivedSmsList_container__vRAw_",topBar:"ReceivedSmsList_topBar__2qRs6"}},214:function(e,a,t){e.exports={container:"CommandFormActions_container__1p4Rc"}},215:function(e,a,t){e.exports={formulaInWords:"FieldDataElementWithCategoryOptionComboAddFormulaButton_formulaInWords__1t-9F",formulaInWordsLabel:"FieldDataElementWithCategoryOptionComboAddFormulaButton_formulaInWordsLabel__ZsD-J"}},216:function(e,a,t){e.exports={container:"FieldDataElementWithCategoryOptionCombo_container__2h1m8",field:"FieldDataElementWithCategoryOptionCombo_field__mnPuJ",codeField:"FieldDataElementWithCategoryOptionCombo_codeField__1wHw_"}},217:function(e,a,t){e.exports={formRow:"DataElementTimesCategoryOptionCombos_formRow__TGwSL"}},218:function(e,a,t){e.exports={container:"FieldCommandSpecialCharacter_container__2Vgvs",field:"FieldCommandSpecialCharacter_field__-1mZE",button:"FieldCommandSpecialCharacter_button__2XK2-"}},219:function(e,a,t){e.exports={container:"SmsCommandFormEdit_container__2r8xI"}},220:function(e,a,t){e.exports={container:"SmsCommandFormNew_container__34D_E"}},221:function(e,a,t){e.exports={container:"SmsCommandList_container__2tb7Z",editButtonCell:"SmsCommandList_editButtonCell__1OBCC",checkbox:"SmsCommandList_checkbox__1mJm5",noResults:"SmsCommandList_noResults__j0ImP"}},222:function(e,a,t){e.exports={recipient:"SmsTableItem_recipient__2d7vB"}},223:function(e,a,t){e.exports={container:"Pagination_container__2LAE2",left:"Pagination_left__1ff2z",right:"Pagination_right__2Py4F",amount:"Pagination_amount__19_-8",pageselection:"Pagination_pageselection__27-Pj"}},224:function(e,a,t){e.exports={noResults:"SmsTable_noResults__rTkg-"}},225:function(e,a,t){e.exports={container:"SentSmsList_container__2FUki",header:"SentSmsList_header__3biA5",headerRight:"SentSmsList_headerRight__XinlM"}},226:function(e,a,t){e.exports={item:"NavigationItem_item__3hR7s"}},230:function(e,a,t){"use strict";t.r(a);var n={};t.r(n),t.d(n,"ALL_DATAVALUE",(function(){return Ha})),t.d(n,"AT_LEAST_ONE_DATAVALUE",(function(){return za})),t.d(n,"DO_NOT_MARK_COMPLETE",(function(){return Ka}));var l={};t.r(l),t.d(l,"KEY_VALUE_PARSER",(function(){return Qt})),t.d(l,"J2ME_PARSER",(function(){return $t})),t.d(l,"ALERT_PARSER",(function(){return en})),t.d(l,"UNREGISTERED_PARSER",(function(){return an})),t.d(l,"TRACKED_ENTITY_REGISTRATION_PARSER",(function(){return tn})),t.d(l,"PROGRAM_STAGE_DATAENTRY_PARSER",(function(){return nn})),t.d(l,"EVENT_REGISTRATION_PARSER",(function(){return ln}));var r={};t.r(r),t.d(r,"CommandsAddSpecialCharacters",(function(){return Ba})),t.d(r,"ALL_DATAVALUE",(function(){return Ha})),t.d(r,"AT_LEAST_ONE_DATAVALUE",(function(){return za})),t.d(r,"DO_NOT_MARK_COMPLETE",(function(){return Ka})),t.d(r,"DataElementTimesCategoryOptionCombos",(function(){return Lt})),t.d(r,"FieldCommandCompletenessMethod",(function(){return Ut})),t.d(r,"FieldCommandConfirmMessage",(function(){return Bt})),t.d(r,"FieldCommandDefaultMessage",(function(){return zt})),t.d(r,"FieldCommandMoreThanOneOrgUnitMessage",(function(){return Wt})),t.d(r,"FieldCommandName",(function(){return Yt})),t.d(r,"FieldCommandNoUserMessage",(function(){return Xt})),t.d(r,"FieldCommandParser",(function(){return on})),t.d(r,"FieldCommandSeparator",(function(){return mn})),t.d(r,"FieldCommandSmsCode",(function(){return pn})),t.d(r,"FieldCommandSpecialCharacter",(function(){return vn})),t.d(r,"FieldCommandSuccessMessage",(function(){return hn})),t.d(r,"FieldCommandUseCurrentPeriodForReporting",(function(){return Cn})),t.d(r,"FieldCommandWrongFormatMessage",(function(){return Nn})),t.d(r,"FieldDataElementWithCategoryOptionCombo",(function(){return It})),t.d(r,"FieldDataElementWithCategoryOptionComboFormula",(function(){return _t})),t.d(r,"FIELD_COMMAND_COMPLETENESS_METHOD_NAME",(function(){return Oa})),t.d(r,"FIELD_COMMAND_DEFAULT_MESSAGE_NAME",(function(){return Aa})),t.d(r,"FIELD_COMMAND_ID_NAME",(function(){return Ta})),t.d(r,"FIELD_COMMAND_MORE_THAN_ONE_ORG_UNIT_MESSAGE_NAME",(function(){return ka})),t.d(r,"FIELD_COMMAND_NAME_NAME",(function(){return Ma})),t.d(r,"FIELD_COMMAND_NO_USER_MESSAGE_NAME",(function(){return Ra})),t.d(r,"FIELD_COMMAND_PARSER_NAME",(function(){return Da})),t.d(r,"FIELD_COMMAND_PROGAM_NAME",(function(){return Ia})),t.d(r,"FIELD_COMMAND_PROGAM_STAGE_NAME",(function(){return Fa})),t.d(r,"FIELD_COMMAND_SEPARATOR_NAME",(function(){return ja})),t.d(r,"FIELD_COMMAND_SMS_CODES_NAME",(function(){return xa})),t.d(r,"FIELD_COMMAND_SPECIAL_CHARS_NAME",(function(){return Pa})),t.d(r,"FIELD_COMMAND_SUCCESS_MESSAGE_NAME",(function(){return La})),t.d(r,"FIELD_COMMAND_USE_CURRENT_PERIOD_FOR_REPORTING_NAME",(function(){return Ga})),t.d(r,"FIELD_COMMAND_WRONG_FORMAT_MESSAGE_NAME",(function(){return qa})),t.d(r,"FIELD_COMMAND_CONFIRM_MESSAGE_NAME",(function(){return Ua})),t.d(r,"KEY_VALUE_PARSER",(function(){return Qt})),t.d(r,"J2ME_PARSER",(function(){return $t})),t.d(r,"ALERT_PARSER",(function(){return en})),t.d(r,"UNREGISTERED_PARSER",(function(){return an})),t.d(r,"TRACKED_ENTITY_REGISTRATION_PARSER",(function(){return tn})),t.d(r,"PROGRAM_STAGE_DATAENTRY_PARSER",(function(){return nn})),t.d(r,"EVENT_REGISTRATION_PARSER",(function(){return ln})),t.d(r,"ProgramStageDataElements",(function(){return An}));var s=t(175),o=t(174),c=t(173),m=t(1),i=t.n(m),d=t(190),u=t.n(d);const g=Object(m.createContext)({addAlert:()=>{throw new Error("AlertContext has not been initialized yet!")}}),p=(e,a="dhis2-smsconfiguration")=>"".concat(a,"-").concat(e),E=({children:e})=>{const[a,t]=Object(m.useState)([]);return i.a.createElement(g.Provider,{value:{addAlert:e=>t([...a,e])}},e,i.a.createElement(c.b,{dataTest:p("notifications-alerthandler")},a.map(({message:e,type:a})=>i.a.createElement(c.a,Object.assign({dataTest:p("notifications-alert"),key:e},{[a]:!0}),e))))},b=()=>i.a.createElement("div",{"data-test":p("views-nomatch")},i.a.createElement("h1",null,"404"));var f=t(7),y=t.n(f),v=t(191);y.a.addResources("en","default",v);var S=y.a,h=t(192),w=t.n(h);const C=({children:e})=>i.a.createElement("h1",{className:w.a.headline,"data-test":p("headline-pageheadline")},e);var _=t(193),N=t.n(_);const O=({children:e})=>i.a.createElement("h2",{className:N.a.subHeadline,"data-test":p("headline-pagesubheadline")},e);var A=t(194),T=t.n(A);const k=()=>i.a.createElement("div",{"data-test":p("views-home")},i.a.createElement(C,null,S.t("Overview: SMS Configuration",{nsSeparator:">"})),i.a.createElement("p",{className:T.a.explanation},S.t("Configure settings for SMS sending, receiving, data reporting, alerts, registration and more.")),i.a.createElement("div",{className:T.a.grid},i.a.createElement("div",{className:T.a.gridItem},i.a.createElement(c.e,null,i.a.createElement("h2",{className:T.a.cardTitle},S.t("Gateway Configuration")),i.a.createElement("p",{className:T.a.cardText},S.t("Add and manage gateways for sending and receiving SMS messages in DHIS2.")),i.a.createElement("div",{className:T.a.cardLinkWrapper},i.a.createElement(s.b,{className:T.a.cardLink,to:Qe},S.t("Set up gateways"))))),i.a.createElement("div",{className:T.a.gridItem},i.a.createElement(c.e,null,i.a.createElement("h2",{className:T.a.cardTitle},S.t("SMS Commands")),i.a.createElement("p",{className:T.a.cardText},S.t("Add and manage commands triggered by incoming SMS messages to register, alert and more.")),i.a.createElement("div",{className:T.a.cardLinkWrapper},i.a.createElement(s.b,{className:T.a.cardLink,to:Nl},S.t("Set up SMS commands"))))),i.a.createElement("div",{className:T.a.gridItem},i.a.createElement(c.e,null,i.a.createElement("h2",{className:T.a.cardTitle},S.t("Sent SMS messages")),i.a.createElement("p",{className:T.a.cardText},S.t("Open logs of all SMS messages sent from DHIS2.")),i.a.createElement("div",{className:T.a.cardLinkWrapper},i.a.createElement(s.b,{className:T.a.cardLink,to:Jl},S.t("View all sent SMS"))))),i.a.createElement("div",{className:T.a.gridItem},i.a.createElement(c.e,null,i.a.createElement("h2",{className:T.a.cardTitle},S.t("Received SMS messages")),i.a.createElement("p",{className:T.a.cardText},S.t("Open logs of all SMS messages received by DHIS2.")),i.a.createElement("div",{className:T.a.cardLinkWrapper},i.a.createElement(s.b,{className:T.a.cardLink,to:ta},S.t("View all received SMS"))))))),M=({onCancelClick:e,onDeleteClick:a})=>i.a.createElement(c.p,{dataTest:p("gateways-deleteconfirmationdialog")},i.a.createElement(c.s,null,S.t("Confirm deletion")),i.a.createElement(c.r,null,S.t("Are you sure you want to delete the selected gateways?")),i.a.createElement(c.q,null,i.a.createElement(c.d,null,i.a.createElement(c.c,{secondary:!0,onClick:e,dataTest:p("gateways-deleteconfirmationdialog-cancel")},"Cancel"),i.a.createElement(c.c,{destructive:!0,onClick:a,dataTest:p("gateways-deleteconfirmationdialog-confirm")},"Delete")))),{Field:R}=c.u,D=()=>i.a.createElement(R,{required:!0,dataTest:p("gateways-fieldgatewayauthtoken"),name:"authtoken",label:S.t("Auth token"),component:c.m,validate:Object(c.I)(c.K,c.J)}),{Field:I}=c.u,F=()=>i.a.createElement(I,{required:!0,dataTest:p("gateways-fieldgatewayname"),name:"name",label:S.t("Name"),component:c.m,validate:Object(c.I)(c.K,c.J)}),{Field:j}=c.u,x=()=>i.a.createElement(j,{required:!0,dataTest:p("gateways-fieldgatewaypassword"),name:"password",label:S.t("Password"),component:c.m,validate:Object(c.I)(c.K,c.J)}),{Field:P}=c.u,L=()=>i.a.createElement(P,{required:!0,dataTest:p("gateways-fieldgatewayurltemplate"),name:"urlTemplate",label:S.t("Url template"),component:c.m,validate:Object(c.I)(c.L,c.J)}),{Field:G}=c.u,q=()=>i.a.createElement(G,{required:!0,dataTest:p("gateways-fieldgatewayusername"),name:"username",label:S.t("User name"),component:c.m,validate:Object(c.I)(c.K,c.J)});var U=t(200),V=t.n(U);const{useForm:B}=c.u,H=()=>{const{change:e,getState:a}=B();return i.a.createElement(c.c,{className:V.a.button,onClick:()=>{const{parameters:t}=a().values;e("parameters",[...t,{header:!1,encode:!1,key:"",value:"",confidential:!1}])},dataTest:p("gateways-gatewayaddkeyvaluepair")},S.t("Add key value pair"))};var z=t(6),K=t.n(z),W=t(201),J=t.n(W);const Y=({children:e,className:a})=>i.a.createElement("div",{className:K()(J.a.formRow,a),"data-test":p("forms-formrow")},e),{Form:Z}=c.u,X=({onCancelClick:e,onSubmit:a,initialValues:t})=>{const n=t?S.t("Save gateway"):S.t("Add gateway");return i.a.createElement(Z,{keepDirtyOnReinitialize:!0,onSubmit:a,initialValues:t},({handleSubmit:a,submitting:t,pristine:l})=>i.a.createElement("form",{onSubmit:a,"data-test":p("gateways-gatewaybulksmsform")},i.a.createElement(Y,null,i.a.createElement(F,null)),i.a.createElement(Y,null,i.a.createElement(q,null)),i.a.createElement(Y,null,i.a.createElement(x,null)),i.a.createElement(c.d,null,i.a.createElement(c.c,{primary:!0,type:"submit",icon:t?i.a.createElement(c.i,{small:!0}):null,disabled:t,dataTest:p("forms-gatewaybulksmsform-submit")},n),i.a.createElement(c.c,{onClick:()=>e(l)},S.t("Cancel")))))};X.defaultProps={initialValues:{}};const{Form:Q}=c.u,$=({onCancelClick:e,onSubmit:a,initialValues:t})=>{const n=t?S.t("Save gateway"):S.t("Add gateway");return i.a.createElement(Q,{keepDirtyOnReinitialize:!0,onSubmit:a,initialValues:t},({handleSubmit:a,submitting:t,pristine:l})=>i.a.createElement("form",{onSubmit:a,"data-test":p("gateways-gatewayclickatellform")},i.a.createElement(Y,null,i.a.createElement(F,null)),i.a.createElement(Y,null,i.a.createElement(q,null)),i.a.createElement(Y,null,i.a.createElement(D,null)),i.a.createElement(Y,null,i.a.createElement(L,null)),i.a.createElement(c.d,null,i.a.createElement(c.c,{primary:!0,type:"submit",icon:t?i.a.createElement(c.i,{small:!0}):null,disabled:t,dataTest:p("forms-gatewayclickatellform-submit")},n),i.a.createElement(c.c,{onClick:()=>e(l)},S.t("Cancel")))))};$.defaultProps={initialValues:{}};var ee=t(202),ae=t.n(ee);const te=({children:e})=>i.a.createElement("p",{className:ae.a.paragraph,"data-test":p("text-paragraph")},e),{Form:ne}=c.u,le=({onCancelClick:e,onSubmit:a,initialValues:t})=>{const n=t?S.t("Save gateway"):S.t("Add gateway");return i.a.createElement(ne,{keepDirtyOnReinitialize:!0,onSubmit:a,initialValues:t},({handleSubmit:a,values:t,submitting:l,pristine:r})=>i.a.createElement("form",{onSubmit:a,"data-test":p("gateways-gatewaygenericform")},i.a.createElement(O,null,S.t("Gateway setup")),i.a.createElement(Y,null,i.a.createElement(F,null)),i.a.createElement(Y,null,i.a.createElement(L,null)),i.a.createElement(O,null,S.t("Key value pairs")),i.a.createElement(te,null,S.t("Key value pairs can be included in the URL. This is some helper text which provides an intro to what the key value pairs actually do.")),t.parameters.map((e,a)=>i.a.createElement(ie,{index:a,key:a})),i.a.createElement(H,null),i.a.createElement(c.d,null,i.a.createElement(c.c,{primary:!0,type:"submit",dataTest:p("forms-gatewaygenericform-submit"),disabled:l,icon:l?i.a.createElement(c.i,{small:!0}):null},n),i.a.createElement(c.c,{onClick:()=>e(r)},S.t("Cancel")))))};le.defaultProps={initialValues:{parameters:[]}};var re=t(203),se=t.n(re);const{Field:oe,useForm:ce}=c.u,me=Object(c.I)(c.K,c.J),ie=({index:e})=>{const{change:a,getState:t}=ce();return i.a.createElement("div",{className:se.a.container,"data-test":p("gateways-gatewaykeyvaluepair")},i.a.createElement("div",{className:se.a.textInputs},i.a.createElement(oe,{dataTest:p("gateways-gatewaykeyvaluepair-key"),className:se.a.keyInput,name:"parameters[".concat(e,"].key"),label:S.t("Key"),component:c.m,validate:me}),i.a.createElement(oe,{dataTest:p("gateways-gatewaykeyvaluepair-value"),className:se.a.valueInput,name:"parameters[".concat(e,"].value"),label:S.t("Value"),component:c.m,validate:me})),i.a.createElement("div",{className:se.a.checkboxGroup},i.a.createElement(oe,{dataTest:p("gateways-gatewaykeyvaluepair-isheader"),className:se.a.checkbox,type:"checkbox",name:"parameters[".concat(e,"].header"),label:S.t("Send as header"),component:c.h}),i.a.createElement(oe,{dataTest:p("gateways-gatewaykeyvaluepair-isencoded"),className:se.a.checkbox,type:"checkbox",name:"parameters[".concat(e,"].encode"),label:S.t("Encode"),component:c.h}),i.a.createElement(oe,{dataTest:p("gateways-gatewaykeyvaluepair-isconfidential"),className:se.a.checkbox,type:"checkbox",name:"parameters[".concat(e,"].confidential"),label:S.t("Confidential"),component:c.h})),i.a.createElement(c.c,{small:!0,secondary:!0,dataTest:p("gateways-gatewaykeyvaluepair-remove"),onClick:()=>(e=>{const{parameters:n}=t().values;a("parameters",0===e?n.slice(1):[...n.slice(0,e),...n.slice(e+1)])})(e)},S.t("Remove key value pair")))};var de=t(11);const ue=({onConfirmCancel:e,onAbortCancel:a})=>i.a.createElement(c.p,null,i.a.createElement(c.s,null,S.t("Are you sure you want to cancel? Unsaved changes will be lost")),i.a.createElement(c.q,null,i.a.createElement(c.d,null,i.a.createElement(c.c,{onClick:a},S.t("No, stay on page")),i.a.createElement(c.c,{primary:!0,onClick:e},S.t("Yes, cancel")))));var ge=t(204),pe=t.n(ge);const Ee="".concat("/sms-gateway/edit","/:id"),be=()=>{var e;const a=Object(o.f)(),{id:t}=Object(o.h)(),[n,l]=Object(m.useState)(!1),{loading:r,error:s,data:d}=Ie(t),[u,{error:g}]=Be(),[E,{error:b}]=Ge(),[f,{error:y}]=Ue(),v=g||b||y;if(r)return i.a.createElement(i.a.Fragment,null,i.a.createElement(C,null,S.t("Edit")),i.a.createElement(c.f,null,i.a.createElement(c.i,null)));if(s){const e=S.t("Something went wrong whilst loading gateways");return i.a.createElement(i.a.Fragment,null,i.a.createElement(C,null,S.t("Edit")),i.a.createElement(c.t,{error:!0,title:e},s.message))}const h=d&&"string"===typeof d.gateway?{gateway:JSON.parse(d.gateway)}:d,w=null===h||void 0===h||null===(e=h.gateway)||void 0===e?void 0:e.type,_=null===h||void 0===h?void 0:h.gateway,N=(e=>{if(e===Ce)return le;if(e===_e)return X;if(e===Ne)return $;throw new Error('The gateway type does not exist, got "'.concat(e,'"'))})(w);return i.a.createElement("div",{"data-test":p("views-gatewayconfigformedit"),className:pe.a.container},i.a.createElement(C,null,S.t("Edit gateway")),_?i.a.createElement("div",{"data-test":p("views-gatewayconfigformedit-formcontainer"),"data-gateway-id":h.gateway.uid},v&&i.a.createElement(c.t,{error:!0,title:S.t("Something went wrong whilst saving gateways")},v.message),i.a.createElement(N,{initialValues:h.gateway,onSubmit:async e=>{const t=Object(de.a)(Object(de.a)({},e),{},{id:h.gateway.uid});try{t.type===Ce&&await u(t),t.type===_e&&await E(t),t.type===Ne&&await f(t),a.push(Qe)}catch(n){return Promise.reject(n)}},onCancelClick:e=>e?a.push(Qe):l(!0)})):i.a.createElement(c.t,{error:!0,title:S.t("Gateway not found")},S.t("The requested gateway could not be loaded")),n&&i.a.createElement(ue,{onConfirmCancel:()=>a.push(Qe),onAbortCancel:()=>l(!1)}))};var fe=t(205),ye=t.n(fe);const ve=({allGatewaysChecked:e,checkedGateways:a,gateways:t,onGatewayToggle:n,onToggleAll:l,onMakeDefaultClick:r})=>{const s=Object(o.f)();return i.a.createElement(c.z,{dataTest:p("gateways-gatewaystable")},i.a.createElement(c.E,null,i.a.createElement(c.G,null,i.a.createElement(c.C,{dataTest:p("gateways-gatewaystable-checkall")},i.a.createElement(c.g,{onChange:l,checked:e})),i.a.createElement(c.C,null,S.t("Name")),i.a.createElement(c.C,null,S.t("Type")),i.a.createElement(c.C,null),i.a.createElement(c.C,null))),i.a.createElement(c.A,null,t.map(e=>{return i.a.createElement(c.F,{key:e.uid,dataTest:p("gateways-gatewaystable-row")},i.a.createElement(c.B,{className:ye.a.checkboxCell,dataTest:p("gateways-gatewaystable-checkbox")},i.a.createElement(c.g,{value:e.uid,onChange:()=>n(e.uid),checked:a.includes(e.uid),dataTest:p("gateways-gatewaystable-id")})),i.a.createElement(c.B,{dataTest:p("gateways-gatewaystable-name")},e.name),i.a.createElement(c.B,{className:ye.a.typeCell,dataTest:p("gateways-gatewaystable-type")},"bulksms"===(t=e.type)?S.t("BulkSMS"):"clickatell"===t?S.t("Clickatell"):"http"!==t&&t?t:S.t("Generic")),i.a.createElement(c.B,{className:ye.a.defaultCell},e.isDefault?i.a.createElement("span",{className:ye.a.isDefaultText},S.t("Default gateway")):i.a.createElement(c.c,{dataTest:p("gateways-gatewaystable-makedefault"),onClick:()=>r(e.uid),className:ye.a.makeDefaultButton},S.t("Make default"))),i.a.createElement(c.B,{dataTest:p("gateways-gatewaystable-actions"),className:ye.a.editCell},i.a.createElement(c.d,{className:ye.a.rowActions},i.a.createElement(c.c,{dataTest:p("gateways-gatewaystable-edit"),onClick:()=>{s.push("".concat("/sms-gateway/edit","/").concat(e.uid))}},S.t("Edit")))));var t})))};var Se=t(206),he=t.n(Se);const we=({checkedGateways:e,gateways:a,setCheckedGateways:t,onMakeDefaultClick:n,processing:l})=>{const r=e.length===a.length;return i.a.createElement("div",{className:he.a.container,"data-test":p("gateways-gatewaylist")},l&&i.a.createElement("div",{className:he.a.processingMessage},i.a.createElement("div",{className:he.a.loadingContainer},i.a.createElement(c.i,null))),i.a.createElement(ve,{allGatewaysChecked:r,gateways:a,checkedGateways:e,onGatewayToggle:a=>{if(e.includes(a)){const n=e.findIndex(e=>e===a),l=0===n?e.slice(1):[...e.slice(0,n),...e.slice(n+1)];t(l)}else t([...e,a])},onMakeDefaultClick:n,onToggleAll:()=>{if(r)t([]);else{const e=a.map(({uid:e})=>e);t(e)}}}))},Ce="http",_e="bulksms",Ne="clickatell";var Oe=t(8);const Ae={resource:"gateways",type:"create",data:({name:e,username:a,password:t})=>({type:"bulksms",name:e,username:a,password:t})},Te={resource:"gateways",type:"create",data:({name:e,username:a,authtoken:t,urlTemplate:n})=>({type:"clickatell",name:e,username:a,authtoken:t,urlTemplate:n})},ke={resource:"gateways",type:"create",data:({name:e,urlTemplate:a,parameters:t})=>({type:"http",name:e,urlTemplate:a,parameters:t})},Me={resource:"gateways",type:"delete",id:({id:e})=>e},Re=()=>{const[e,a]=Object(m.useState)(!1),[t,n]=Object(m.useState)(null),l=(e=>a=>{const t={id:a};return e.mutate(Me,{variables:t})})(Object(Oe.c)()),r=e=>(a(!1),e),s=e=>{n(e),a(!1)};return[({ids:e})=>(a(!0),Promise.all(e.map(l)).then(r).catch(s)),{loading:e,error:t}]},De={gateway:{resource:"gateways",id:({id:e})=>e}},Ie=e=>Object(Oe.e)(De,{variables:{id:e}});var Fe=t(185);const je={gateways:{resource:"gateways.json",params:({fields:e,filter:a})=>{const t={};return e&&(t.fields=e),a&&(t.filter=a),t}}},xe={resource:"gateways/default",type:"replace",id:({id:e})=>e},Pe=e=>{const[a,t]=Object(m.useState)(!1),[n,l]=Object(m.useState)(null),r=Object(Oe.c)();return[a=>{const n=Object(de.a)(Object(de.a)({},e),{},{id:a.id});return t(!0),l(null),r.mutate(n,{variables:a}).then(e=>(t(!1),e)).catch(e=>{throw t(!1),l(e),e})},{loading:a,error:n}]},Le={resource:"gateways",id:({id:e})=>e,type:"update",data:({name:e,username:a,password:t})=>({type:"bulksms",name:e,username:a,password:t})},Ge=()=>Pe(Le),qe={resource:"gateways",id:({id:e})=>e,type:"update",data:({name:e,username:a,authtoken:t,urlTemplate:n})=>({type:"clickatell",name:e,username:a,authtoken:t,urlTemplate:n})},Ue=()=>Pe(qe),Ve={resource:"gateways",id:({id:e})=>e,type:"replace",data:({name:e,urlTemplate:a,parameters:t})=>({type:"http",name:e,urlTemplate:a,parameters:t})},Be=()=>Pe(Ve);var He=t(207),ze=t.n(He);const Ke=()=>{const e=Object(o.f)(),[a,t]=Object(m.useState)(Ce),[n,{error:l}]=Object(Oe.d)(ke),[r,{error:s}]=Object(Oe.d)(Ae),[d,{error:u}]=Object(Oe.d)(Te),g=l||s||u;if(g){const e=S.t("Something went wrong whilst saving the gateway");return i.a.createElement("div",{"data-test":p("views-gatewayconfigformnew")},i.a.createElement(C,null,S.t("Add gateway")),i.a.createElement(c.t,{error:!0,title:e},g.message))}const E=async t=>{try{a===Ce&&await n(t),a===_e&&await r(t),a===Ne&&await d(t),e.push(Qe)}catch(l){return Promise.reject(l)}},b=()=>e.push(Qe);return i.a.createElement("div",{"data-test":p("views-gatewayconfigformnew"),className:ze.a.container},i.a.createElement(C,null,S.t("Add gateway")),i.a.createElement(Y,null,i.a.createElement(c.w,{label:S.t("Type"),onChange:({selected:e})=>t(e),selected:a,dataTest:p("views-gatewayconfigformnew-gatewaytype")},i.a.createElement(c.y,{value:Ce,label:S.t("Generic")}),i.a.createElement(c.y,{value:_e,label:S.t("BulkSMS")}),i.a.createElement(c.y,{value:Ne,label:S.t("Clickatell")}))),i.a.createElement(Y,null,a===Ce&&i.a.createElement(le,{onSubmit:E,onCancelClick:b}),a===_e&&i.a.createElement(X,{onSubmit:E,passwordRequired:!0,onCancelClick:b}),a===Ne&&i.a.createElement($,{onSubmit:E,passwordRequired:!0,onCancelClick:b})))};var We=t(208),Je=t.n(We);const Ye=({addLabel:e,deleteLabel:a,dataTest:t,onAddClick:n,onDeleteClick:l,disableAdd:r,disableDelete:s})=>i.a.createElement("div",{className:Je.a.container},i.a.createElement(c.d,{"data-test":p("".concat(t,"-actions"))},i.a.createElement(c.c,{primary:!0,onClick:n,disabled:r,dataTest:p("".concat(t,"-add"))},e),i.a.createElement(c.c,{destructive:!0,onClick:l,disabled:s,dataTest:p("".concat(t,"-delete"))},a)));var Ze=t(209),Xe=t.n(Ze);const Qe="/sms-gateway",$e=()=>{var e,a;const t=Object(o.f)(),[n,l]=Object(m.useState)([]),[r,s]=Object(m.useState)(!1),{loading:d,error:u,data:g,refetch:E}=(e=>{var a;"id:in:[".concat(null===e||void 0===e?void 0:e.join(","),"]");const t={},n=Object(Oe.e)(je,{variables:t}),{data:l}=n,r=Object(Fe.a)(n,["data"]),s=l&&"string"===typeof l.gateways?{gateways:JSON.parse(l.gateways)}:l,o=e&&(null===s||void 0===s||null===(a=s.gateways)||void 0===a?void 0:a.gateways)?{gateways:{gateways:s.gateways.gateways.filter(({uid:a})=>e.includes(a))}}:s;return Object(de.a)({data:o},r)})(),[b,{loading:f,error:y}]=Re(),[v,{loading:h,error:w}]=Object(Oe.d)(xe),_=d||f||h;if(_)return i.a.createElement(i.a.Fragment,null,i.a.createElement(C,null,"Gateway configuration"),i.a.createElement(c.f,null,i.a.createElement(c.i,null)));const N=u||y||w;if(N){const e=S.t("Something went wrong whilst performing the requested operation");return i.a.createElement(i.a.Fragment,null,i.a.createElement(C,null,"Gateway configuration"),i.a.createElement(c.t,{error:!0,title:e},N.message))}const O=!!(null===g||void 0===g||null===(e=g.gateways)||void 0===e||null===(a=e.gateways)||void 0===a?void 0:a.length);return i.a.createElement("div",{className:Xe.a.container,"data-test":p("views-gatewayconfiglist")},i.a.createElement(C,null,"Gateway configuration"),i.a.createElement(te,null,S.t("An SMS gateway lets a DHIS2 instance send and receive SMS messages. Different gateway types can be added and configured below. At least one gateway is needed to send and receive SMS messages. Load balancing will use all gateways if there are multiple available. Read about gateway configuration in the DHIS2 documentation.")),i.a.createElement(Ye,{addLabel:S.t("Add gateway"),deleteLabel:S.t("Delete selected"),dataTest:"views-gatewayconfiglist",onAddClick:()=>t.push("/sms-gateway/new"),onDeleteClick:()=>s(!0),disableAdd:f,disableDelete:!n.length||f}),O?i.a.createElement(we,{processing:_,checkedGateways:n,setCheckedGateways:l,gateways:g.gateways.gateways,onMakeDefaultClick:e=>{v({id:e}).then(E)}}):i.a.createElement(c.t,{info:!0,title:S.t("No gateways found")},S.t("It looks like there aren't any configured gateways, or they couldn't be loaded.")),r&&i.a.createElement(M,{onCancelClick:()=>s(!1),onDeleteClick:()=>{b({ids:n}).then(E),s(!1)}}))};var ea=t(9);const aa=y.a.t("Received"),ta="/received",na=[{value:"ALL",label:y.a.t("All")},{value:"FAILED",label:y.a.t("Failed")},{value:"INCOMING",label:y.a.t("Incoming")},{value:"PROCESSED",label:y.a.t("Processed")},{value:"PROCESSING",label:y.a.t("Processing")},{value:"SENT",label:y.a.t("Sent")},{value:"UNHANDLED",label:y.a.t("Unhandled")}],la={resource:"sms/inbound",type:"delete",params:({ids:e})=>({ids:e})},ra=({selectedIds:e,onComplete:a})=>{const{addAlert:t}=Object(m.useContext)(g),[n]=Object(Oe.d)(la,{onComplete:a,onError:e=>{t({type:"critical",message:e.message})}});return i.a.createElement(c.c,{destructive:!0,onClick:()=>n({ids:e.join()}),disabled:0===e.length},y.a.t("Delete selected"))},sa=()=>{const e=new URLSearchParams(Object(o.g)().search);return{status:e.get("status")||"ALL",phoneNumber:e.get("phoneNumber")||"",page:parseInt(e.get("page")||1),pageSize:parseInt(e.get("pageSize")||50)}},oa=e=>{const a=Object.keys(e).reduce((a,t)=>{const n=e[t];return n&&!("status"===t&&"ALL"===n)&&a.push("".concat(t,"=").concat(n)),a},[]).join("&");return"?".concat(a)};var ca=t(210),ma=t.n(ca);const{Form:ia,Field:da}=c.u,ua=({loading:e})=>{const{status:a,phoneNumber:t,pageSize:n}=sa(),l={status:a,phoneNumber:t},r=Object(o.f)();return i.a.createElement("div",{"data-test":p("views-receivedsms-filter"),className:ma.a.container},i.a.createElement(ia,{onSubmit:({status:e,phoneNumber:a})=>{r.push({search:oa({status:e,phoneNumber:a,pageSize:n,page:1})})},initialValues:l},({handleSubmit:a,pristine:t})=>i.a.createElement("form",{onSubmit:a,className:ma.a.inputStrip},i.a.createElement(da,{name:"status",component:c.x,options:na,label:y.a.t("Filter by status"),inputWidth:"200px"}),i.a.createElement(da,{name:"phoneNumber",component:c.m,label:y.a.t("Filter by phone number"),className:ma.a.phoneNumberField,inputWidth:"300px"}),i.a.createElement(c.c,{large:!0,type:"submit",disabled:e||t},y.a.t("Filter")))))};var ga=t(15),pa=t.n(ga),Ea=t(211),ba=t.n(Ea);const fa=["1","2","10","20","30","40","50","100"],ya=({page:e,pageCount:a,pageSize:t,total:n})=>{const l=Math.min((e-1)*t+1,n),r=Math.min(l+t-1,n),s=Array.from({length:a},(e,a)=>(a+1).toString()),{status:m,phoneNumber:d}=sa(),u=Object(o.f)(),g=e=>{u.push({search:oa({status:m,phoneNumber:d,pageSize:t,page:e})})};return i.a.createElement("div",{className:ba.a.container},i.a.createElement("div",{className:ba.a.verticalAlign},y.a.t("Show"),i.a.createElement(c.v,{dense:!0,selected:t.toString(),onChange:({selected:e})=>{u.push({search:oa({status:m,phoneNumber:d,pageSize:e,page:1})})},className:ba.a.select},fa.map(e=>i.a.createElement(c.y,{key:e,value:e,label:e}))),y.a.t("per page")),i.a.createElement("div",{className:ba.a.verticalAlign},i.a.createElement("span",{className:ba.a.summary},y.a.t("Viewing {{firstItem}}-{{lastItem}} of {{total}}",{firstItem:l,lastItem:r,total:n})),i.a.createElement(c.c,{className:ba.a.buttonPrevious,small:!0,disabled:1===e,onClick:()=>g(e-1)},y.a.t("Previous")),i.a.createElement("span",null,y.a.t("Page")),i.a.createElement(c.v,{dense:!0,inputWidth:"600px",selected:e.toString(),onChange:({selected:e})=>g(e),className:ba.a.select},s.map(e=>i.a.createElement(c.y,{key:e,value:e,label:e}))),i.a.createElement("span",null,y.a.t("of {{pageCount}}",{pageCount:a})),i.a.createElement(c.c,{className:ba.a.buttonNext,small:!0,disabled:e===a,onClick:()=>g(e+1)},y.a.t("Next"))))};var va=t(212),Sa=t.n(va);const ha=({messages:e,pager:a,selectedIds:t,setSelectedIds:n})=>{const l=new Set(t),r=e.length>0&&t.length===e.length,s=e=>{l.has(e)?l.delete(e):l.add(e),n(Array.from(l))};return i.a.createElement(c.z,null,i.a.createElement(c.E,null,i.a.createElement(c.G,null,i.a.createElement(c.C,null,i.a.createElement(c.g,{checked:r,onChange:()=>{n(r?[]:e.map(({id:e})=>e))}})),i.a.createElement(c.C,null,y.a.t("Message")),i.a.createElement(c.C,null,y.a.t("Phone number")),i.a.createElement(c.C,null,y.a.t("Status")),i.a.createElement(c.C,null,y.a.t("Sender")),i.a.createElement(c.C,null,y.a.t("Date")))),i.a.createElement(c.A,null,0===e.length?i.a.createElement(c.F,null,i.a.createElement(c.B,{colSpan:"7",className:Sa.a.noResults},y.a.t("No SMSes to display"))):e.map(e=>i.a.createElement(c.F,{key:e.id},i.a.createElement(c.B,null,i.a.createElement(c.g,{checked:l.has(e.id),onChange:s.bind(null,e.id)})),i.a.createElement(c.B,null,e.text),i.a.createElement(c.B,null,i.a.createElement("span",{className:Sa.a.originator},e.originator)),i.a.createElement(c.B,null,e.smsstatus),i.a.createElement(c.B,null,e.user?e.user.userCredentials.username:y.a.t("Unknown")),i.a.createElement(c.B,null,pa()(e.receivedDate).format("MMMM Do YYYY, h:mm:ss a"))))),i.a.createElement(c.D,null,i.a.createElement(c.F,null,i.a.createElement(c.B,{colSpan:"7"},i.a.createElement(ya,a)))))};var wa=t(213),Ca=t.n(wa);const _a={inboundSms:{resource:"sms/inbound",params:({page:e,pageSize:a,phoneNumber:t,status:n})=>({page:e,pageSize:a,phoneNumber:t,status:n,fields:["id","text","originator","smsstatus","user[userCredentials[username]]","receiveddate"]})}},Na=()=>{var e;const[a,t]=Object(m.useState)([]),{page:n,pageSize:l,phoneNumber:r,status:s}=sa(),{called:o,loading:d,error:u,data:g,refetch:E}=Object(ea.d)(_a,{lazy:!0});if(Object(m.useEffect)(()=>{E({page:n,pageSize:l,phoneNumber:r,status:s})},[n,l,r,s]),d||!o)return i.a.createElement(i.a.Fragment,null,i.a.createElement(C,null,aa),i.a.createElement(c.f,null,i.a.createElement(c.i,null)));if(u){const e=S.t("Something went wrong whilst loading received SMSes");return i.a.createElement(i.a.Fragment,null,i.a.createElement(C,null,aa),i.a.createElement(c.t,{error:!0,title:e},u.message))}const b=(null===g||void 0===g||null===(e=g.inboundSms)||void 0===e?void 0:e.inboundsmss)||[];return i.a.createElement("div",{"data-test":p("views-receivedsmslist"),className:Ca.a.container},i.a.createElement(C,null,aa),i.a.createElement("div",{className:Ca.a.topBar},i.a.createElement(ua,{loading:d}),i.a.createElement(ra,{onComplete:()=>{E(),t([])},selectedIds:a})),i.a.createElement("div",null,i.a.createElement(ha,{messages:b,pager:g.inboundSms.pager,selectedIds:a,setSelectedIds:t})))},Oa="completenessMethod",Aa="defaultMessage",Ta="id",ka="moreThanOneOrgUnitMessage",Ma="name",Ra="noUserMessage",Da="parserType",Ia="program",Fa="programStage",ja="separator",xa="smsCodes",Pa="specialCharacters",La="successMessage",Ga="currentPeriodUsedForReporting",qa="wrongFormatMessage",Ua="receivedMessage",{useForm:Va}=c.u,Ba=()=>{const{change:e,getState:a}=Va();return i.a.createElement(Y,null,i.a.createElement(c.c,{onClick:()=>{const t=[...a().values[Pa],{name:"",value:""}];e(Pa,t)},dataTest:p("forms-commandsaddspecialcharacters")},S.t("Add special character")))},Ha={value:"ALL_DATAVALUE",label:S.t("Receive all data values")},za={value:"AT_LEAST_ONE_DATAVALUE",label:S.t("Receive at least one data value")},Ka={value:"DO_NOT_MARK_COMPLETE",label:S.t("Do not mark as complete")},{useFormState:Wa}=c.u,Ja={submitting:!0,pristine:!0},Ya=()=>{const{submitting:e,pristine:a}=Wa({subscription:Ja});return i.a.createElement(c.c,{primary:!0,type:"submit",disabled:a||e,icon:e?i.a.createElement(c.i,{small:!0}):null},S.t("Save command"))},{useFormState:Za}=c.u,Xa={submitError:!0,hasSubmitErrors:!0},Qa=()=>{const{submitError:e,hasSubmitErrors:a}=Za({subscription:Xa});return a?i.a.createElement(Y,null,i.a.createElement(c.t,{error:!0,title:S.t("Something went wrong whilst submitting the form")},e)):null};var $a=t(214),et=t.n($a);const at=({onCancel:e})=>i.a.createElement("div",{className:et.a.container},i.a.createElement(Qa,null),i.a.createElement(c.d,null,i.a.createElement(Ya,null),i.a.createElement(c.c,{onClick:e},S.t("Cancel")))),tt=({onCancelClick:e,onDeleteClick:a})=>i.a.createElement(c.p,{dataTest:p("commands-deleteconfirmationdialog")},i.a.createElement(c.s,null,S.t("Confirm deletion")),i.a.createElement(c.r,null,S.t("Are you sure you want to delete the selected commands?")),i.a.createElement(c.q,null,i.a.createElement(c.d,null,i.a.createElement(c.c,{secondary:!0,onClick:e,dataTest:p("commands-deleteconfirmationdialog-cancel")},S.t("Cancel")),i.a.createElement(c.c,{primary:!0,onClick:a,dataTest:p("commands-deleteconfirmationdialog-confirm")},S.t("Delete"))))),nt=(e,a)=>e===a.value,lt={resource:"smsCommands",type:"create",data:({parserType:e,name:a,dataset:t,userGroup:n,program:l,programStage:r})=>{if(e===Qt.value||e===$t.value)return{parserType:e,name:a,dataset:t};if(e===en.value||e===an.value)return{parserType:e,name:a,userGroup:{id:n}};if(e===tn.value||e===ln.value)return{parserType:e,name:a,program:l};if(e===nn.value)return{parserType:e,name:a,program:l,programStage:r};throw new Error('You provided an unrecognized parserType "'.concat(e,'"'))}},rt={resource:"smsCommands",type:"delete",id:({id:e})=>e},st=()=>{const[e,a]=Object(m.useState)(!1),[t,n]=Object(m.useState)(null),l=(e=>a=>{const t={id:a};return e.mutate(rt,{variables:t})})(Object(Oe.c)()),r=e=>(a(!1),e),s=e=>{n(e),a(!1)};return[({ids:e})=>(a(!0),Promise.all(e.map(l)).then(r).catch(s)),{loading:e,error:t}]},ot={smsCommand:{resource:"smsCommands",id:({id:e})=>e,params:{fields:"parserType",paging:"false"}}},ct={smsCommands:{resource:"smsCommands",pager:!1,params:({ids:e}={})=>({paging:"false",fields:"*",filter:e?"ids:in:[".concat(e.join(","),"]"):void 0})}},{FORM_ERROR:mt}=c.l,it=e=>e,dt={resource:"smsCommands",type:"update",id:({commandId:e})=>e,data:e=>{let{commandId:a}=e;return Object(Fe.a)(e,["commandId"])}},ut=Object(de.a)(Object(de.a)({},dt),{},{partial:!0}),gt=({onAfterChange:e,commandId:a,formatCommand:t=it,replace:n=!1})=>{const{addAlert:l}=Object(m.useContext)(g),r=Object(Oe.c)();return s=>{const o={variables:Object(de.a)(Object(de.a)({},t(s)),{},{commandId:a})},c=n?ut:dt;return r.mutate(c,o).then(e).catch(e=>{if("access"===e.type){const a="No error message was provided",t=e.message||S.t(a);return{[mt]:t}}l({type:"critical",message:e.message})})}},{Field:pt}=c.u,Et=({dataSets:e,loading:a,required:t,disabled:n,errorText:l})=>i.a.createElement(pt,{disabled:n,error:!!l,validationText:l,required:t,loading:a,dataTest:p("forms-fielddataset"),name:"dataset",label:S.t("Dataset"),component:c.x,options:e,validate:c.J,format:e=>(null===e||void 0===e?void 0:e.id)||null,parse:e=>({id:e})});Et.defaultProps={disabled:!1,loading:!1,required:!1,errorText:""};const bt={dataSets:{resource:"dataSets",params:{fields:["id","displayName"],paging:"false"}}},ft=({required:e})=>{const{loading:a,error:t,data:n}=Object(Oe.e)(bt);if(a)return i.a.createElement(Et,{loading:!0,showLoadingStatus:!0,required:e,dataSets:[]});if(t)return i.a.createElement(Et,{required:e,disabled:!0,programs:[],errorText:t.message});const{dataSets:l}=n.dataSets,r=l.map(({id:e,displayName:a})=>({label:a,value:e}));return i.a.createElement(Et,{required:e,dataSets:r})};ft.defaultProps={required:!1};const yt={dataSet:{resource:"dataSets",id:({id:e})=>e,params:({filter:e})=>({filter:e,fields:"dataSetElements[dataElement[id,code,displayName]]"})}},vt=(e,a)=>{const[t,n]=Object(m.useState)(!0),[l,r]=Object(m.useState)(null),[s,o]=Object(m.useState)(null),c=Object(Oe.c)(),i=e=>(n(!0),r(null),((e,a)=>e.query(yt,{variables:a}).then(e=>{const{dataSet:a}=e,{dataSetElements:t}=a;return t.map(({dataElement:e})=>e)}))(c,e).then(o).catch(r).finally(()=>n(!1)));return Object(m.useEffect)(()=>{i({id:e,filter:a})},[]),{loading:t,error:l,data:s,refetch:i}},{Field:St,Form:ht,useForm:wt,useField:Ct}=c.u,_t=({baseName:e,combo:a,targetFieldName:t,onClose:n})=>{const l=wt(),r=Ct(e,{subscription:{value:!0}}).input.value,s=Ct("dataset",{subscription:{value:!0}}).input.value.id,{loading:o,error:d,data:u}=vt(s),g=r.formula,p={operator:Object(m.useMemo)(()=>g?g[0]:"+",[]),dataElementCode:Object(m.useMemo)(()=>g?g.slice(1):"",[])};if(o)return i.a.createElement(c.p,null,i.a.createElement(c.i,null));const E=u.map(e=>{const{code:a,displayName:t}=e;return{value:a,label:t}}),b=()=>{l.change(t,null),n()};return i.a.createElement(ht,{onSubmit:e=>{const a="".concat(e.operator).concat(e.dataElementCode);l.change(t,a),n()},initialValues:p},({handleSubmit:e})=>i.a.createElement(c.p,null,i.a.createElement(c.s,null,S.t("Formula for {{combo}}",{combo:a})),i.a.createElement(c.r,null,i.a.createElement("form",{onSubmit:a=>{a.stopPropagation(),e(a)}},i.a.createElement(Y,null,i.a.createElement(St,{required:!0,name:"dataElementCode",label:S.t("Data element"),component:c.x,options:E,validate:c.J})),i.a.createElement(Y,null,i.a.createElement(St,{required:!0,name:"operator",label:S.t("formula operator"),component:c.x,initialValue:"+",options:[{value:"+",label:"+"},{value:"-",label:"-"}]})),d&&i.a.createElement(Y,null,i.a.createElement(c.t,{error:!0,title:S.t("Something went wrong whilst saving")},d.message)))),i.a.createElement(c.q,null,i.a.createElement(c.d,null,i.a.createElement(c.c,{onClick:b},S.t("Remove")),i.a.createElement(c.c,{onClick:n},S.t("Cancel")),i.a.createElement(c.c,{type:"submit",primary:!0},S.t("Save"))))))};var Nt=t(215),Ot=t.n(Nt);const{useField:At}=c.u,Tt={dataElement:{resource:"dataElements",params:({code:e})=>({filter:"code:eq:".concat(e),fields:"displayName",paging:"false"})}},kt=({baseName:e,onClick:a,disabled:t})=>{const n=Object(Oe.c)(),[l,r]=Object(m.useState)(!1),[s,o]=Object(m.useState)(!1),[d,u]=Object(m.useState)(""),g=At(e,{subscription:{value:!0}}).input.value,{formula:p,code:E}=g,b=p&&p[0],f=p&&p.slice(1);return Object(m.useEffect)(()=>{!l&&f&&(o(!0),r(!0),n.query(Tt,{variables:{code:f}}).then(e=>{const[{displayName:a}]=e.dataElement.dataElements;u(a)}).finally(()=>o(!1)))},[f,l]),i.a.createElement(i.a.Fragment,null,s&&S.t("Loading formula"),E&&d&&i.a.createElement("span",{className:Ot.a.formulaInWords},i.a.createElement("span",{className:Ot.a.formulaInWordsLabel},S.t("Formula"),":"),E," ".concat(b," "),d),i.a.createElement(c.c,{small:!0,onClick:a,disabled:t},p?S.t("Edit formula"):S.t("Add formula")))};var Mt=t(216),Rt=t.n(Mt);const{Field:Dt}=c.u,It=({dataElement:e,categoryOptionCombo:a})=>{const[t,n]=Object(m.useState)(!1),l=a?"".concat(e.displayName," ").concat(a.displayName):"".concat(e.displayName," ").concat(S.t("default")),r=((e,a)=>{const t=e.id,n=null===a||void 0===a?void 0:a.code;return!n||"default"===n?"".concat(xa,".").concat(t):"".concat(xa,".").concat(t,"-").concat(n)})(e,a),s="".concat(r,".code"),o="".concat(r,".formula");return i.a.createElement("div",{className:Rt.a.container},i.a.createElement(Dt,{className:Rt.a.field,label:l,name:s,subscription:{value:!0,error:!0,invalid:!0,touched:!0}},e=>{let{input:a,meta:s}=e,m=Object(Fe.a)(e,["input","meta"]);const d=a.value;return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.m,Object.assign({},m,{className:Rt.a.codeField,input:a,meta:s,error:!!s.error})),i.a.createElement(kt,{disabled:!d,baseName:r,formulaFieldName:o,onClick:()=>n(!0)}),t&&i.a.createElement(_t,{baseName:r,combo:l,targetFieldName:o,onClose:()=>n(!1)}))}))};It.defaultProps={categoryOptionCombo:null,formula:""};const{useField:Ft}=c.u,jt=()=>{const{input:e}=Ft(Oa,{subscription:{value:!0}}),a=e.value,t=S.t("Required values notice");return a===Ha.value?i.a.createElement(Y,null,i.a.createElement(c.t,{warning:!0,title:t},S.t('Make sure all SMS short codes are provided when completeness method "'.concat(Ha.label,'" is chosen, otherwise received messages will not be processed.')))):a===za.value?i.a.createElement(Y,null,i.a.createElement(c.t,{warning:!0,title:t},S.t('Make sure at least one SMS short code is provided when completeness method "'.concat(za.label,'" is chosen, otherwise received messages will not be processed.')))):null};var xt=t(217),Pt=t.n(xt);const Lt=({DE_COC_combinations:e})=>i.a.createElement("div",null,i.a.createElement(O,null,S.t("SMS short codes")),i.a.createElement(jt,null),i.a.createElement("div",null,e.map(({dataElement:e,categoryOptionCombo:a})=>i.a.createElement(Y,{className:Pt.a.formRow,key:e.id+(null===a||void 0===a?void 0:a.id)},i.a.createElement(It,{dataElement:e,categoryOptionCombo:a})))));Lt.defaultProps={allRequired:!1};const{Field:Gt}=c.u,qt=Object.values(n),Ut=()=>i.a.createElement(Gt,{dataTest:p("forms-fielddataset"),name:Oa,label:S.t("Completeness method"),component:c.x,options:qt}),{Field:Vt}=c.u,Bt=()=>i.a.createElement(Vt,{dataTest:p("commands-fieldcommandconfirmmessage"),name:Ua,label:S.t("Confirm message"),component:c.H}),{Field:Ht}=c.u,zt=()=>i.a.createElement(Ht,{dataTest:p("forms-fieldcommanddefaultmessage"),name:Aa,label:S.t("Reply message if no codes are sent (only the command)"),component:c.H}),{Field:Kt}=c.u,Wt=()=>i.a.createElement(Kt,{dataTest:p("forms-fieldcommandmorethanoneorgunitmessage"),name:ka,label:S.t("More than one orgunit message"),component:c.H}),{Field:Jt}=c.u,Yt=()=>i.a.createElement(Jt,{required:!0,dataTest:p("commands-fieldcommandname"),name:Ma,label:S.t("Name"),component:c.m,validate:Object(c.I)(c.K,c.J)}),{Field:Zt}=c.u,Xt=()=>i.a.createElement(Zt,{dataTest:p("forms-fieldcommandnousermessage"),name:Ra,label:S.t("No user message"),component:c.H}),Qt={value:"KEY_VALUE_PARSER",label:S.t("Key value parser")},$t={value:"J2ME_PARSER",label:S.t("J2ME parser")},en={value:"ALERT_PARSER",label:S.t("Alert parser")},an={value:"UNREGISTERED_PARSER",label:S.t("Unregistered parser")},tn={value:"TRACKED_ENTITY_REGISTRATION_PARSER",label:S.t("Tracked entity registration parser")},nn={value:"PROGRAM_STAGE_DATAENTRY_PARSER",label:S.t("Program stage data entry parser")},ln={value:"EVENT_REGISTRATION_PARSER",label:S.t("Event registration parser")},{Field:rn}=c.u,sn=Object.values(l).sort((e,a)=>e.label<a.label?-1:e.label>a.label?1:0),on=({disabled:e})=>i.a.createElement(rn,{disabled:e,dataTest:p("forms-fieldcommandparser"),name:Da,label:S.t("Parser"),component:c.x,options:sn});on.defaultProps={disabled:!1};const{Field:cn}=c.u,mn=()=>i.a.createElement(cn,{dataTest:p("forms-fieldcommandseparator"),name:ja,label:S.t("Field separator"),component:c.m}),{Field:dn,useFormState:un}=c.u,gn={values:!0},pn=({id:e,displayName:a,valueType:t})=>{const{values:n}=un({subscription:gn}),l=n[xa][e];return i.a.createElement(dn,{required:!0,name:"".concat(xa,".").concat(e),label:a,component:c.m,format:e=>(null===e||void 0===e?void 0:e.code)||"",parse:n=>l?Object(de.a)(Object(de.a)({},l),{},{code:n}):{code:n,trackedEntityAttribute:{id:e,displayName:a,valueType:t}}})};var En=t(218),bn=t.n(En);const{Field:fn,useForm:yn}=c.u,vn=({index:e})=>{const{change:a,getState:t}=yn();return i.a.createElement("div",{key:e,className:bn.a.container},i.a.createElement(fn,{required:!0,className:bn.a.field,dataTest:p("@TODO"),label:S.t("Special character name"),name:"".concat(Pa,"[").concat(e,"].name"),component:c.m,validate:c.J}),i.a.createElement(fn,{required:!0,className:bn.a.field,dataTest:p("@TODO"),label:S.t("Special character value"),name:"".concat(Pa,"[").concat(e,"].value"),component:c.m,validate:c.J}),i.a.createElement(c.k,{label:"\xa0"},i.a.createElement(c.c,{className:bn.a.button,onClick:()=>{const n=t().values[Pa],l=[...n.slice(0,e),...n.slice(e+1)];a(Pa,l)}},S.t("Remove"))))},{Field:Sn}=c.u,hn=()=>i.a.createElement(Sn,{dataTest:p("forms-fieldcommandsuccessmessage"),name:La,label:S.t("Success message"),component:c.H}),{Field:wn}=c.u,Cn=()=>i.a.createElement(wn,{type:"checkbox",dataTest:p("forms-fieldusecurrentperiodforreporting"),name:Ga,label:S.t("Use current period for reporting"),component:c.h}),{Field:_n}=c.u,Nn=()=>i.a.createElement(_n,{dataTest:p("forms-fieldcommandwrongformatmessage"),name:qa,label:S.t("Wrong format message"),component:c.H}),{Field:On}=c.u,An=({programStageDataElements:e,smsCodes:a})=>i.a.createElement(i.a.Fragment,null,e.map(({dataElement:e})=>i.a.createElement(On,{key:e.id,name:"".concat(xa,".").concat(e.id),label:e.displayName,component:c.m,format:e=>(null===e||void 0===e?void 0:e.code)||null,parse:t=>{const n=a[e.id];return Object(de.a)(Object(de.a)({},n),{},{code:t||"",dataElement:e})}}))),{Field:Tn}=c.u,kn=({userGroups:e,loading:a,required:t,disabled:n,errorText:l})=>i.a.createElement(Tn,{disabled:n,error:!!l,validationText:l,required:t,loading:a,dataTest:p("forms-fielduserGroup"),name:"userGroup",label:S.t("Usergroup"),component:c.x,options:e,validate:t&&c.J});kn.defaultProps={disabled:!1,loading:!1,required:!1,errorText:""};const Mn={userGroups:{resource:"userGroups",params:{paging:"false"}}},Rn=({required:e})=>{const{loading:a,error:t,data:n}=Object(Oe.e)(Mn);if(a)return i.a.createElement(kn,{required:e,loading:!0,showLoadingStatus:!0,userGroups:[]});if(t)return i.a.createElement(kn,{required:e,disabled:!0,userGroups:[],errorText:t.message});const{userGroups:l}=n.userGroups,r=l.map(({id:e,displayName:a})=>({label:a,value:e}));return i.a.createElement(kn,{required:e,userGroups:r})};Rn.defaultProps={required:!1};const{Form:Dn}=c.u,In={smsCommand:{resource:"smsCommands",id:({commandId:e})=>e,params:{fields:["name","parserType","receivedMessage","userGroup[name,id]"]}}},Fn=({commandId:e,onAfterChange:a,onCancel:t})=>{const n=gt({commandId:e,onAfterChange:a,replace:!0}),{loading:l,error:r,data:s}=Object(Oe.e)(In,{variables:{commandId:e}});if(l)return i.a.createElement(c.f,null,i.a.createElement(c.i,null));if(r){const e=S.t("Something went wrong whilst loading the sms command");return i.a.createElement(c.t,{error:!0,title:e},r.message)}const{name:o,parserType:m,receivedMessage:d,userGroup:u}=s.smsCommand,g={name:o,parserType:m,receivedMessage:d,userGroup:u.id},E=[{value:u.id,label:u.name}];return i.a.createElement(Dn,{keepDirtyOnReinitialize:!0,onSubmit:n,initialValues:g},({handleSubmit:e,pristine:a})=>i.a.createElement("form",{onSubmit:e,"data-test":p("commands-commandunregisteredparserform")},i.a.createElement(Y,null,i.a.createElement(Yt,null)),i.a.createElement(Y,null,i.a.createElement(on,{disabled:!0})),i.a.createElement(Y,null,i.a.createElement(kn,{disabled:!0,userGroups:E})),i.a.createElement(Y,null,i.a.createElement(Bt,null)),i.a.createElement(at,{onCancel:()=>t(a)})))},{Field:jn}=c.u,xn=({programs:e,loading:a,required:t,disabled:n,errorText:l})=>i.a.createElement(jn,{error:!!l,validationText:l,disabled:n,required:t,loading:a,dataTest:p("forms-fieldprogram"),name:"program",label:S.t("Program"),component:c.x,options:e,validate:t&&c.J,format:e=>(null===e||void 0===e?void 0:e.id)||null,parse:e=>({id:e})});xn.defaultProps={disabled:!1,errorText:"",loading:!1,required:!1};const Pn={programs:{resource:"programs",params:({registration:e})=>{const a={paging:"false"};if("undefined"!==typeof e){const t=e?"programType:eq:WITH_REGISTRATION":"programType:eq:WITHOUT_REGISTRATION";a.filter=t}return a}}},Ln=({required:e,registration:a})=>{const t={registration:a},{loading:n,error:l,data:r}=(e=>Object(Oe.e)(Pn,{variables:{registration:e}}))({variables:t});if(n)return i.a.createElement(xn,{required:e,loading:!0,showLoadingStatus:!0,programs:[]});if(l)return i.a.createElement(xn,{required:e,disabled:!0,programs:[],errorText:l.message});const{programs:s}=r.programs,o=s.map(({id:e,displayName:a})=>({label:a,value:e}));return i.a.createElement(xn,{required:e,programs:o})};Ln.defaultProps={required:!1,registration:void 0};const{Form:Gn}=c.u,qn=e=>Object(de.a)(Object(de.a)({},e),{},{[xa]:Object.values(e[xa])}),Un={smsCommand:{resource:"smsCommands",id:({commandId:e})=>e,params:{fields:["name","parserType","separator","defaultMessage","wrongFormatMessage","noUserMessage","moreThanOneOrgUnitMessage","successMessage","program[id,displayName,programTrackedEntityAttributes[trackedEntityAttribute[:all,id,displayName]]]","smsCodes[:all,trackedEntityAttribute[id,displayName,valueType]]"]}}},Vn=({commandId:e,onAfterChange:a,onCancel:t})=>{const n=gt({commandId:e,onAfterChange:a,formatCommand:qn}),{loading:l,error:r,data:s}=Object(Oe.e)(Un,{variables:{commandId:e}});if(l)return i.a.createElement(c.f,null,i.a.createElement(c.i,null));if(r){const e=S.t("Something went wrong whilst loading the sms command");return i.a.createElement(c.t,{error:!0,title:e},r.message)}const{name:o,parserType:m,program:d,separator:u,defaultMessage:g,wrongFormatMessage:p,noUserMessage:E,moreThanOneOrgUnitMessage:b,successMessage:f,smsCodes:y}=s.smsCommand,v=y.reduce((e,a)=>Object(de.a)(Object(de.a)({},e),{},{[a.trackedEntityAttribute.id]:a}),{}),h={name:o,parserType:m,program:d,separator:u,defaultMessage:g,wrongFormatMessage:p,noUserMessage:E,moreThanOneOrgUnitMessage:b,successMessage:f,smsCodes:v},w={value:d.id,label:d.displayName},C=d.programTrackedEntityAttributes.map(({trackedEntityAttribute:e})=>e).map(e=>{const{id:a,displayName:t,valueType:n}=e,l={id:a,displayName:t,valueType:n},r=v[a];return r&&(l.initialValue=r.code),l});return i.a.createElement(Gn,{keepDirtyOnReinitialize:!0,onSubmit:n,initialValues:h},({handleSubmit:e,pristine:a})=>i.a.createElement("form",{onSubmit:e},i.a.createElement(Y,null,i.a.createElement(Yt,null)),i.a.createElement(Y,null,i.a.createElement(on,{disabled:!0})),i.a.createElement(Y,null,i.a.createElement(xn,{disabled:!0,programs:[w]})),i.a.createElement(Y,null,i.a.createElement(mn,null)),i.a.createElement(Y,null,i.a.createElement(zt,null)),i.a.createElement(Y,null,i.a.createElement(Nn,null)),i.a.createElement(Y,null,i.a.createElement(Xt,null)),i.a.createElement(Y,null,i.a.createElement(Wt,null)),i.a.createElement(Y,null,i.a.createElement(hn,null)),i.a.createElement(O,null,S.t("SMS short codes")),C.map(e=>i.a.createElement(Y,{key:e.id},i.a.createElement(pn,{id:e.id,displayName:e.displayName,valueType:e.valueType}))),i.a.createElement(at,{onCancel:()=>t(a)})))},{Field:Bn}=c.u,Hn=({programStages:e,disabled:a,loading:t,required:n,errorText:l})=>i.a.createElement(Bn,{disabled:a,error:!!l,validationText:l,required:n,loading:t,dataTest:p("forms-fieldprogramStage"),name:"programStage",label:S.t("Program stage"),component:c.x,options:e,validate:n&&c.J,format:e=>(null===e||void 0===e?void 0:e.id)||null,parse:e=>({id:e})});Hn.defaultProps={disabled:!1,loading:!1,required:!1,errorText:""};const zn={programStages:{resource:"programStages",params:({programId:e})=>({paging:"false",filter:e?"program.id:eq:".concat(e):void 0})}},Kn=({required:e,programId:a})=>{var t;const{loading:n,error:l,data:r,refetch:s}=(({programId:e,lazy:a})=>Object(Oe.e)(zn,{variables:{programId:e},lazy:a}))({lazy:!0});if(Object(m.useEffect)(()=>{a&&s({programId:a})},[a]),n)return i.a.createElement(Hn,{loading:!0,required:e,programStages:[]});if(l)return i.a.createElement(Hn,{disabled:!0,errorText:l.message,required:e,programStages:[]});if(!a||!r)return i.a.createElement(Hn,{disabled:!0,required:e,programStages:[]});const o=((null===r||void 0===r||null===(t=r.programStages)||void 0===t?void 0:t.programStages)||[]).map(({id:e,displayName:a})=>({label:a,value:e}));return i.a.createElement(Hn,{required:e,programStages:o})};Kn.defaultProps={required:!1};const Wn={smsCommand:{resource:"smsCommands",id:({id:e})=>e,params:{fields:["*","program[id,displayName]","programStage[id,displayName,programStageDataElements[dataElement[id,displayName]]]"],paging:"false"}}},{Form:Jn}=c.u,Yn=e=>Object(de.a)(Object(de.a)({},e),{},{[xa]:Object.values(e[xa])}),Zn=({commandId:e,onAfterChange:a,onCancel:t})=>{const{error:n,data:l}=(r=e,Object(Oe.e)(Wn,{variables:{id:r}}));var r;const s=null===l||void 0===l?void 0:l.smsCommand,o=null===s||void 0===s?void 0:s.programStage.programStageDataElements,m=gt({commandId:e,onAfterChange:a,formatCommand:Yn});if(n){const e=S.t("Something went wrong whilst loading the command's details");return i.a.createElement(c.t,{error:!0,title:e},n.message)}if(!s)return i.a.createElement(c.f,null,i.a.createElement(c.i,null));const d=(e=>{const a=e[Ma],t=e[Ia],n=e[Fa],l=e[ja],r=e[Aa],s=e[qa],o=e[Ra],c=e[ka],m=e[La],i=e[xa].reduce((e,a)=>Object(de.a)(Object(de.a)({},e),{},{[a.dataElement.id]:a}),{});return{[Ma]:a,[Da]:nn.value,[Ia]:t,[Fa]:n,[ja]:l,[Aa]:r,[qa]:s,[Ra]:o,[ka]:c,[La]:m,[xa]:i}})(s),u={value:s.program.id,label:s.program.displayName},g={value:s.programStage.id,label:s.programStage.displayName};return i.a.createElement(Jn,{keepDirtyOnReinitialize:!0,onSubmit:m,initialValues:d},({handleSubmit:e,values:a,pristine:n})=>i.a.createElement("form",{onSubmit:e,"data-test":p("commands-commandeditprogramstagedataentryparserform")},i.a.createElement(Y,null,i.a.createElement(Yt,null)),i.a.createElement(Y,null,i.a.createElement(on,{disabled:!0})),i.a.createElement(Y,null,i.a.createElement(xn,{disabled:!0,programs:[u]})),i.a.createElement(Y,null,i.a.createElement(Hn,{disabled:!0,programStages:[g]})),i.a.createElement(Y,null,i.a.createElement(mn,null)),i.a.createElement(Y,null,i.a.createElement(zt,null)),i.a.createElement(Y,null,i.a.createElement(Nn,null)),i.a.createElement(Y,null,i.a.createElement(Xt,null)),i.a.createElement(Y,null,i.a.createElement(Wt,null)),i.a.createElement(Y,null,i.a.createElement(hn,null)),i.a.createElement(O,null,S.t("SMS short codes")),o&&i.a.createElement(Y,null,i.a.createElement(An,{programStageDataElements:o,smsCodes:a[xa]})),i.a.createElement(at,{onCancel:()=>t(n)})))},Xn={smsCommand:{resource:"smsCommands",id:({id:e})=>e,params:{fields:["*","dataset[id,displayName,dataSetElements[dataElement[id,displayName,categoryCombo[categoryOptionCombos[id,displayName,code]]]]"],paging:"false"}}},{Form:Qn,FormSpy:$n}=c.u,el=e=>{let a=!1;const t={},n=e[xa],l=(n?Object.entries(n):[]).filter(([e,{code:a}])=>a);if(l.length){const e=(e=>e.reduce((a,t,n)=>{const[l,r]=t;if(a.includes(l))return a;const s=e.filter(([e,a],t)=>a.code===r.code&&t!==n);if(!s.length)return a;const o=s.reduce((e,[a])=>[...e,a],[l]);return[...a,...o]},[]))(l);if(e.length){a=!0;const n={};e.forEach(e=>{n[e]={code:S.t("Duplicate value!")}}),t[xa]=t[xa]||{},Object.assign(t[xa],n)}}return a?t:void 0},al=e=>{const a=e[xa],t=Object.entries(a).map(([e,{code:a,formula:t,compulsory:n,optionId:l}])=>{const[r]=e.split("-"),s={code:a,compulsory:n,dataElement:{id:r}};return t&&(s.formula=t),l&&(s.optionId=l),s});return Object(de.a)(Object(de.a)({},e),{},{[xa]:t})},tl=({commandId:e,onAfterChange:a,dataTest:t,initialCompletenessMethod:n,onCancel:l})=>{const{error:r,data:s}=(o=e,Object(Oe.e)(Xn,{variables:{id:o}}));var o;const m=null===s||void 0===s?void 0:s.smsCommand,d=gt({commandId:e,onAfterChange:a,formatCommand:al});if(r){const e=S.t("Something went wrong whilst loading the command's details");return i.a.createElement(c.t,{error:!0,title:e},r.message)}if(!m)return i.a.createElement(c.f,null,i.a.createElement(c.i,null));const u={value:m.dataset.id,label:m.dataset.displayName},g=((e,a)=>{const t=e[Ma],n=Qt.value,l={id:e.dataset.id},r=e[ja],s=a||e[Oa]||Ha.value,o=e[Ga],c=e[Aa],m=e[qa],i=e[Ra],d=e[ka],u=e[La],g=e[xa].reduce((e,{code:a,compulsory:t,formula:n,optionId:l,dataElement:r})=>{const s=l<10?r.id:"".concat(r.id,"-").concat(l),o={code:a,compulsory:t,optionId:l};return n&&(o.formula=n),Object(de.a)(Object(de.a)({},e),{},{[s]:o})},{}),p=e[Pa]||[];return{[Ma]:t,[Da]:n,dataset:l,[ja]:r,[Oa]:s,[Ga]:o,[Aa]:c,[qa]:m,[Ra]:i,[ka]:d,[La]:u,smsCodes:g,specialCharacters:p}})(m,n),p=m.dataset.dataSetElements.reduce((e,{dataElement:a})=>{var t;const n=null===(t=a.categoryCombo)||void 0===t?void 0:t.categoryOptionCombo;if(!n)return[...e,{dataElement:a}];const l=n.map(e=>({dataElement:a,categoryOptionCombo:e}));return[...e,...l]},[]);return i.a.createElement(Qn,{keepDirtyOnReinitialize:!0,onSubmit:d,initialValues:g,validate:el,subscription:{pristine:!0}},({handleSubmit:e,form:a,pristine:n})=>i.a.createElement("form",{onSubmit:e,"data-test":t},i.a.createElement(Y,null,i.a.createElement(Yt,null)),i.a.createElement(Y,null,i.a.createElement(on,{disabled:!0})),i.a.createElement(Y,null,i.a.createElement(Et,{disabled:!0,dataSets:[u]})),i.a.createElement(Y,null,i.a.createElement(Ut,null)),i.a.createElement(Y,null,i.a.createElement(Cn,null)),i.a.createElement(Y,null,i.a.createElement(mn,null)),i.a.createElement(Y,null,i.a.createElement(zt,null)),i.a.createElement(Y,null,i.a.createElement(Nn,null)),i.a.createElement(Y,null,i.a.createElement(Xt,null)),i.a.createElement(Y,null,i.a.createElement(Wt,null)),i.a.createElement(Y,null,i.a.createElement(hn,null)),p&&i.a.createElement(Lt,{DE_COC_combinations:p}),i.a.createElement(O,null,S.t("Special characters")),i.a.createElement($n,{subscription:{values:!0}},({values:e})=>i.a.createElement(i.a.Fragment,null,e[Pa].map((e,a)=>i.a.createElement(Y,{key:a},i.a.createElement(vn,{index:a}))))),i.a.createElement(Ba,null),i.a.createElement(at,{onCancel:()=>l(n)})))},nl=({commandId:e,onAfterChange:a,onCancel:t})=>i.a.createElement(tl,{dataTest:p("smscommandkeyvalueparser-commandeditkeyvalueparserform"),commandId:e,onAfterChange:a,onCancel:t}),ll=({commandId:e,onAfterChange:a,onCancel:t})=>i.a.createElement(tl,{dataTest:p("smscommandkeyvalueparser-commandeditj2meparserform"),commandId:e,onAfterChange:a,onCancel:t,initialCompletenessMethod:za.value}),rl={smsCommand:{resource:"smsCommands",id:({id:e})=>e,params:{fields:["*","program[id,displayName]","programStage[id,displayName,programStageDataElements[id,dataElement[id,displayName]]"],paging:"false"}}},{Form:sl}=c.u,ol=e=>Object(de.a)(Object(de.a)({},e),{},{[xa]:Object.values(e[xa])}),cl=({commandId:e,onAfterChange:a,onCancel:t})=>{const{error:n,data:{smsCommand:l}={}}=(r=e,Object(Oe.e)(rl,{variables:{id:r}}));var r;const s=gt({commandId:e,onAfterChange:a,formatCommand:ol});if(n){const e=S.t("Something went wrong whilst loading the command's details");return i.a.createElement(c.t,{error:!0,title:e},n.message)}if(!l)return i.a.createElement(c.f,null,i.a.createElement(c.i,null));const o={value:l.program.id,label:l.program.displayName},m={value:l.programStage.id,label:l.programStage.displayName},d=l.programStage.programStageDataElements,u=(e=>{const a=e[Ma],t=e[Ia],n=e[Fa],l=e[ja],r=e[Aa],s=e[qa],o=e[Ra],c=e[ka],m=e[La],i=e[xa].reduce((e,a)=>Object(de.a)(Object(de.a)({},e),{},{[a.dataElement.id]:a}),{});return{[Ma]:a,[Da]:ln.value,[Ia]:t,[Fa]:n,[ja]:l,[Aa]:r,[qa]:s,[Ra]:o,[ka]:c,[La]:m,[xa]:i}})(l);return i.a.createElement(sl,{keepDirtyOnReinitialize:!0,initialValues:u,onSubmit:s},({handleSubmit:e,values:a,pristine:n})=>i.a.createElement("form",{onSubmit:e},i.a.createElement(Y,null,i.a.createElement(Yt,null)),i.a.createElement(Y,null,i.a.createElement(on,{disabled:!0})),i.a.createElement(Y,null,i.a.createElement(xn,{disabled:!0,programs:[o]})),i.a.createElement(Y,null,i.a.createElement(Hn,{disabled:!0,programStages:[m]})),i.a.createElement(Y,null,i.a.createElement(mn,null)),i.a.createElement(Y,null,i.a.createElement(zt,null)),i.a.createElement(Y,null,i.a.createElement(Nn,null)),i.a.createElement(Y,null,i.a.createElement(Xt,null)),i.a.createElement(Y,null,i.a.createElement(Wt,null)),i.a.createElement(Y,null,i.a.createElement(hn,null)),i.a.createElement(O,null,S.t("SMS short codes")),d&&i.a.createElement(Y,null,i.a.createElement(An,{programStageDataElements:d,smsCodes:a[xa]})),i.a.createElement(at,{onCancel:()=>t(n)})))},{Form:ml}=c.u,il={smsCommand:{resource:"smsCommands",id:({commandId:e})=>e,params:{fields:["name","parserType","receivedMessage","userGroup[name,id]"]}}},dl=({commandId:e,onAfterChange:a,onCancel:t})=>{const n=gt({commandId:e,onAfterChange:a,replace:!0}),{loading:l,error:r,data:s}=Object(Oe.e)(il,{variables:{commandId:e}});if(l)return i.a.createElement(c.f,null,i.a.createElement(c.i,null));if(r){const e=S.t("Something went wrong whilst loading the sms command");return i.a.createElement(c.t,{error:!0,title:e},r.message)}const{name:o,parserType:m,receivedMessage:d,userGroup:u}=s.smsCommand,g={name:o,parserType:m,receivedMessage:d,userGroup:u.id},E=[{value:u.id,label:u.name}];return i.a.createElement(ml,{keepDirtyOnReinitialize:!0,onSubmit:n,initialValues:g},({handleSubmit:e,pristine:a})=>i.a.createElement("form",{onSubmit:e,"data-test":p("commands-commandeditalertparserform")},i.a.createElement(Y,null,i.a.createElement(Yt,null)),i.a.createElement(Y,null,i.a.createElement(on,{disabled:!0})),i.a.createElement(Y,null,i.a.createElement(kn,{disabled:!0,userGroups:E})),i.a.createElement(Y,null,i.a.createElement(Bt,null)),i.a.createElement(at,{onCancel:()=>t(a)})))};var ul=t(219),gl=t.n(ul);const pl="".concat("/sms-config/edit","/:id"),El=()=>{const e=Object(o.f)(),{id:a}=Object(o.h)(),{loading:t,error:n,data:l}=(e=>Object(Oe.e)(ot,{variables:{id:e}}))(a),[r,s]=Object(m.useState)(!1);if(t)return i.a.createElement(c.f,null,i.a.createElement(c.i,null));if(n){const e=S.t("Something went wrong whilst loading commands");return i.a.createElement(c.t,{error:!0,title:e},n.message)}const d=null===l||void 0===l?void 0:l.smsCommand[Da],u=(e=>{const a=nt.bind(null,e);return e&&a(Qt)?nl:e&&a($t)?ll:e&&a(en)?dl:e&&a(nn)?Zn:e&&a(an)?Fn:e&&a(ln)?cl:e&&a(tn)?Vn:null})(d);return i.a.createElement("div",{className:gl.a.container},i.a.createElement(C,null,S.t("Edit command")),u&&i.a.createElement(u,{commandId:a,onCancel:a=>a?e.goBack():s(!0),onAfterChange:()=>e.push(Nl)}),r&&i.a.createElement(ue,{onConfirmCancel:()=>e.push(Nl),onAbortCancel:()=>s(!1)}),!d&&i.a.createElement(c.t,{error:!0,title:S.t("Unrecognised parser type")},S.t("Could not find the requested parser type")))};var bl=t(220),fl=t.n(bl);const{Form:yl,useForm:vl}=c.u,Sl=({handleSubmit:e,submitting:a})=>{(()=>{const e=vl(),[a,t]=Object(m.useState)(e.getState().values);Object(m.useEffect)(()=>e.subscribe(({values:n})=>{e.batch(()=>{const t=n[Da],l=n.program,r=n.programStage,s=a.program,o=a[Da];r&&(s&&l!==s||o&&t!==o)&&e.change("programStage",null)}),t(n)},{values:!0}),[a])})();const t=Object(o.f)(),n=vl(),{values:l}=n.getState(),r=l[Da],s=l.program,d=r===Qt.value||r===$t.value,u=r===en.value||r===an.value,g=r===tn.value||r===nn.value||r===ln.value,p=r===nn.value,E=r!==ln.value&&void 0;return i.a.createElement("div",{className:fl.a.container},i.a.createElement(C,null,S.t("Add command")),i.a.createElement("form",{onSubmit:e},i.a.createElement(Y,null,i.a.createElement(Yt,null)),i.a.createElement(Y,null,i.a.createElement(on,null)),d&&i.a.createElement(Y,null,i.a.createElement(ft,null)),u&&i.a.createElement(Y,null,i.a.createElement(Rn,null)),g&&i.a.createElement(Y,null,i.a.createElement(Ln,{registration:E})),p&&i.a.createElement(Y,null,i.a.createElement(Kn,{programId:s||""})),i.a.createElement(c.d,null,i.a.createElement(c.c,{primary:!0,type:"submit",icon:a?i.a.createElement(c.i,{small:!0}):null,disabled:a},S.t("Add command")),i.a.createElement(c.c,{onClick:()=>t.goBack()},S.t("Cancel")))))},hl=()=>{const e=Object(o.f)(),[a]=(({onComplete:e,onError:a})=>Object(Oe.d)(lt,{onComplete:e,onError:a}))({onComplete:()=>e.push(Nl)});return i.a.createElement(yl,{onSubmit:e=>a(e)},({handleSubmit:e,submitting:a})=>i.a.createElement(Sl,{handleSubmit:e,submitting:a}))};var wl=t(221),Cl=t.n(wl);const _l=S.t("Commands"),Nl="/sms-config",Ol=()=>{var e,a,t,n,l,s;const d=Object(o.f)(),[u,g]=Object(m.useState)([]),[E,b]=Object(m.useState)(!1),{loading:f,error:y,data:v,refetch:h}=Object(Oe.e)(ct),[w,{loading:_,error:N}]=st();if(f)return i.a.createElement("div",{"data-test":p("views-smscommandlist")},i.a.createElement(C,null,_l),i.a.createElement(c.f,null,i.a.createElement(c.i,null)));const O=y||N;if(O){const e=S.t("Something went wrong whilst performing the requested operation");return i.a.createElement("div",{"data-test":p("views-smscommandlist")},i.a.createElement(C,null,_l),i.a.createElement(c.t,{error:!0,title:e},O.message))}const A=u.length===(null===v||void 0===v||null===(e=v.smsCommands)||void 0===e||null===(a=e.smsCommands)||void 0===a?void 0:a.length),T=(null===v||void 0===v||null===(t=v.smsCommands)||void 0===t||null===(n=t.smsCommands)||void 0===n?void 0:n.length)>0;return i.a.createElement("div",{"data-test":p("views-smscommandlist"),className:Cl.a.container},i.a.createElement(C,null,_l),i.a.createElement(te,null,S.t("SMS commands process SMS messages received by a DHIS2 instance, taking certain actions depending on the command and message content. Multiple SMS commands can be set up to process and handle data in multiple ways. Add and configure SMS commands below. Read about SMS commands in the DHIS2 documentation.")),i.a.createElement(Ye,{addLabel:S.t("Add command"),deleteLabel:S.t("Delete selected"),dataTest:"views-smscommandlist",onAddClick:()=>d.push("/sms-config/new"),onDeleteClick:()=>b(!0),disableAdd:_,disableDelete:!u.length||_}),E&&i.a.createElement(tt,{onCancelClick:()=>b(!1),onDeleteClick:async()=>{const e=u.map(({id:e})=>e);await w({ids:e}),g([]),b(!1),h()}}),i.a.createElement(c.z,null,i.a.createElement(c.E,null,i.a.createElement(c.G,null,i.a.createElement(c.C,null,i.a.createElement(c.g,{checked:A,onChange:()=>{var e;const a=null===v||void 0===v||null===(e=v.smsCommands)||void 0===e?void 0:e.smsCommands;a&&(u.length===a.length?g([]):g(a.map(({id:e,displayName:a})=>({id:e,displayName:a}))))}})),i.a.createElement(c.C,null,S.t("Sms command")),i.a.createElement(c.C,null,S.t("Parser")),i.a.createElement(c.C,null))),i.a.createElement(c.A,null,T?null===v||void 0===v||null===(l=v.smsCommands)||void 0===l||null===(s=l.smsCommands)||void 0===s?void 0:s.map(({id:e,displayName:a,parserType:t})=>i.a.createElement(c.F,{key:e},i.a.createElement(c.B,{className:Cl.a.checkbox},i.a.createElement(c.g,{checked:!!u.find(({id:a})=>e===a),onChange:()=>(e=>{const{id:a}=e;if(u.find(({id:e})=>a===e)){const e=u.findIndex(({id:e})=>a===e);return g([...u.slice(0,e),...u.slice(e+1)])}return g([...u,e])})({id:e,displayName:a})})),i.a.createElement(c.B,null,a),i.a.createElement(c.B,null,(e=>{const a=Object.values(r).find(({value:a})=>a===e);return(null===a||void 0===a?void 0:a.label)||e})(t)),i.a.createElement(c.B,{className:Cl.a.editButtonCell},i.a.createElement(c.c,{onClick:()=>d.push("".concat("/sms-config/edit","/").concat(e))},S.t("Edit"))))):i.a.createElement(c.F,null,i.a.createElement(c.B,{colSpan:"4",className:Cl.a.noResults},S.t("No commands to display"))))))},Al={DELIVERED:y.a.t("Delivered"),ERROR:y.a.t("Error"),FAILED:y.a.t("Failed"),OUTBOUND:y.a.t("Outbound"),PENDING:y.a.t("Pending"),SCHEDULED:y.a.t("Scheduled"),SENT:y.a.t("Sent")};var Tl=t(222),kl=t.n(Tl);var Ml=({sms:e,toggleSelected:a,isSelected:t})=>{const{message:n,status:l,date:r,id:s}=e,o=null===e.recipients?[]:e.recipients;return i.a.createElement(c.F,null,i.a.createElement(c.B,null,i.a.createElement(c.g,{onChange:()=>a(s),checked:t})),i.a.createElement(c.B,null,n),i.a.createElement(c.B,null,o.map((e,a,t)=>i.a.createElement("span",{key:e+a,className:kl.a.recipient},e,a!==t.length-1&&", "))),i.a.createElement(c.B,null,Al[l]),i.a.createElement(c.B,null,pa()(r).format("MMMM Do YYYY, h:mm:ss a")))};const Rl=()=>{throw new Error("RefetchSms consumer needs to have a valid Provider as parent")};var Dl=Object(m.createContext)({refetch:Rl,refetchAndClear:Rl}),Il=t(223),Fl=t.n(Il);const jl=["10","20","30","40","50","100"];var xl=({pager:e})=>{const{refetchAndClear:a}=Object(m.useContext)(Dl),t=e=>{a({page:e})},{page:n,pageCount:l,pageSize:r,total:s}=e,o=Math.min((n-1)*r+1,s),d=Math.min(o+r-1,s),u=Array.from({length:l},(e,a)=>(a+1).toString());return i.a.createElement("div",{className:Fl.a.container},i.a.createElement("div",{className:Fl.a.left},i.a.createElement("span",null,S.t("Show")),i.a.createElement(c.v,{dense:!0,selected:r.toString(),onChange:({selected:e})=>{a({pageSize:e,page:1})}},jl.map(e=>i.a.createElement(c.y,{key:e,value:e,label:e}))),i.a.createElement("span",null,S.t("per page"))),i.a.createElement("div",{className:Fl.a.right},i.a.createElement("div",{className:Fl.a.amount},S.t("Viewing {{firstItem}}-{{lastItem}} of {{total}}",{firstItem:o,lastItem:d,total:s})),i.a.createElement(c.c,{small:!0,disabled:1===n,onClick:()=>t(n-1)},S.t("Previous")),i.a.createElement("div",{className:Fl.a.pageselection},i.a.createElement("div",null,S.t("Page")),i.a.createElement(c.v,{dense:!0,selected:n.toString(),onChange:({selected:e})=>{t(e)}},u.map(e=>i.a.createElement(c.y,{key:e,value:e,label:e}))),i.a.createElement("div",null,S.t("of {{pageCount}}",{pageCount:l}))),i.a.createElement(c.c,{small:!0,disabled:n===l,onClick:()=>t(n+1)},S.t("Next"))))},Pl=t(224),Ll=t.n(Pl);var Gl=({smses:e,toggleSelected:a,toggleAll:t,allSelected:n,selected:l,pager:r})=>i.a.createElement(c.z,null,i.a.createElement(c.E,null,i.a.createElement(c.G,null,i.a.createElement(c.C,null,i.a.createElement(c.g,{disabled:0===e.length,onChange:t,checked:n})),i.a.createElement(c.C,null,S.t("Message")),i.a.createElement(c.C,null,S.t("Recipients")),i.a.createElement(c.C,null,S.t("Status")),i.a.createElement(c.C,null,S.t("Date")))),i.a.createElement(c.A,null,0===e.length?i.a.createElement(c.F,null,i.a.createElement(c.B,{colSpan:"7",className:Ll.a.noResults},S.t("No SMSes to display"))):e.map(e=>i.a.createElement(Ml,{key:e.id,sms:e,isSelected:l.includes(e.id),toggleSelected:a}))),i.a.createElement(c.D,null,i.a.createElement(c.F,null,i.a.createElement(c.B,{colSpan:"7"},i.a.createElement(xl,{pager:r})))));const ql=e=>"ALL"===e?"":e,Ul=[{label:S.t("All"),value:"ALL"},...["DELIVERED","ERROR","FAILED","OUTBOUND","PENDING","SCHEDULED","SENT"].map(e=>({label:Al[e],value:e}))];var Vl=({status:e,setStatus:a})=>{const{refetchAndClear:t}=Object(m.useContext)(Dl);return i.a.createElement(c.w,{label:S.t("Filter by status"),inputWidth:"200px",onChange:({selected:e})=>{a(e),t({status:ql(e),page:1})},selected:e},Ul.map(({label:e,value:a})=>i.a.createElement(c.y,{key:e,label:e,value:a})))};const Bl={resource:"sms/outbound",params:({ids:e})=>({ids:e}),type:"delete"};var Hl=({selected:e})=>{const a=0===e.length,t=e.join(","),{addAlert:n}=Object(m.useContext)(g),{refetchAndClear:l}=Object(m.useContext)(Dl),[r,{loading:s}]=Object(Oe.d)(Bl,{onComplete:()=>{l()},onError:e=>{n({type:"critical",message:e.message})}});return i.a.createElement(c.c,{destructive:!0,disabled:a||s,onClick:()=>r({ids:t})},S.t("Delete selected"))},zl=t(225),Kl=t.n(zl);const Wl=S.t("Sent"),Jl="/sent",Yl={sms:{resource:"sms/outbound",params:({status:e,page:a,pageSize:t})=>{const n={pageSize:t,page:a,fields:["id","message","status","date","recipients"]};return e?Object(de.a)(Object(de.a)({},n),{},{filter:"status:eq:".concat(e)}):n}}},Zl=()=>{var e;const[a,t]=Object(m.useState)([]),[n,l]=Object(m.useState)("ALL"),{loading:r,error:s,data:o,refetch:d}=Object(Oe.e)(Yl,{variables:{status:ql(n),pageSize:10,page:1}});if(r)return i.a.createElement(i.a.Fragment,null,i.a.createElement(C,null,Wl),i.a.createElement(c.f,null,i.a.createElement(c.i,null)));if(s){const e=S.t("Something went wrong whilst loading sent SMSes");return i.a.createElement(i.a.Fragment,null,i.a.createElement(C,null,Wl),i.a.createElement(c.t,{error:!0,title:e},s.message))}const u=(e=>e.map(e=>e.id))(o.sms.outboundsmss),g=((e,a)=>{const t=0===e.length,n=e.length!==a.length;return!t&&!n&&e.every(e=>a.includes(e))})(u,a),p=(({selected:e,setSelected:a})=>t=>{if(e.includes(t)){const n=e.filter(e=>e!=t);a(n)}})({selected:a,setSelected:t}),E=(({allSelected:e,setSelected:a,allIds:t})=>()=>a(e?[]:t))({allSelected:g,setSelected:t,allIds:u}),b=(({selected:e,setSelected:a})=>t=>{if(e.includes(t)){const n=e.filter(e=>e!==t);return a(n)}return a([...e,t])})({selected:a,setSelected:t}),f={refetch:d,refetchAndClear:e=>{t([]),d(e)}},y=(null===o||void 0===o||null===(e=o.sms)||void 0===e?void 0:e.outboundsmss)||[];return i.a.createElement("div",{className:Kl.a.container},i.a.createElement(Dl.Provider,{value:f},i.a.createElement(C,null,Wl),i.a.createElement("div",{className:Kl.a.header},i.a.createElement(Vl,{status:n,setStatus:l}),i.a.createElement("div",{className:Kl.a.headerRight},i.a.createElement(Hl,{selected:a}))),i.a.createElement(Gl,{smses:y,cleanSelected:p,allSelected:g,selected:a,toggleSelected:b,toggleAll:E,pager:o.sms.pager})))};var Xl=t(226),Ql=t.n(Xl);const $l=({label:e,path:a,exactMatch:t})=>{const n=Object(o.f)(),l=((e,a)=>{const t=Object(o.i)(e);return!!t&&(!a||t.isExact)})(a,t);return i.a.createElement(c.o,{className:Ql.a.item,onClick:()=>n.push(a),active:l,label:e,dataTest:p("navigation-navigationitem")})};$l.defualtProps={exactMatch:!1};const er=()=>i.a.createElement(c.n,{dataTest:p("navigation-navigation")},i.a.createElement($l,{path:"/",label:"Overview",exactMatch:!0}),i.a.createElement($l,{path:Qe,label:"Gateway configuration"}),i.a.createElement($l,{path:Nl,label:_l}),i.a.createElement($l,{path:Jl,label:Wl}),i.a.createElement($l,{path:ta,label:aa}));a.default=()=>i.a.createElement(E,null,i.a.createElement(c.j,{spacers:!0,colors:!0}),i.a.createElement(s.a,null,i.a.createElement("div",{className:u.a.container,"data-test":p("app")},i.a.createElement("div",{className:u.a.sidebar},i.a.createElement(er,null)),i.a.createElement("main",{className:u.a.content},i.a.createElement(o.c,null,i.a.createElement(o.a,{exact:!0,path:"/",component:k}),"",i.a.createElement(o.a,{exact:!0,path:Qe,component:$e}),i.a.createElement(o.a,{exact:!0,path:Ee,component:be}),i.a.createElement(o.a,{exact:!0,path:"/sms-gateway/new",component:Ke}),"",i.a.createElement(o.a,{exact:!0,path:Nl,component:Ol}),i.a.createElement(o.a,{exact:!0,path:pl,component:El}),i.a.createElement(o.a,{exact:!0,path:"/sms-config/new",component:hl}),"",i.a.createElement(o.a,{exact:!0,path:Jl,component:Zl}),"",i.a.createElement(o.a,{exact:!0,path:ta,component:Na}),i.a.createElement(o.a,{component:b}))))))}}]);
//# sourceMappingURL=app.b4b49b6b.chunk.js.map