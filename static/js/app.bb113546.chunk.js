(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[132],{190:function(e,a,t){e.exports={container:"App_container__2zgzu",sidebar:"App_sidebar__10tAV",content:"App_content__3I8HS"}},191:function(e){e.exports=JSON.parse('{"Are you sure you want to cancel? Unsaved changes will be lost":"","No, stay on page":"","Yes, cancel":"","Dataset":"","Confirm deletion":"","Are you sure you want to delete the selected gateways?":"","Auth token":"","Name":"","Password":"","Url template":"","User name":"","Add key value pair":"","Save gateway":"","Add gateway":"","Cancel":"","Gateway setup":"","Key value pairs":"","Key value pairs can be included in the URL. This is some helper text which provides an intro to what the key value pairs actually do.":"","Key":"","Value":"","Send as header":"","Encode":"","Confidential":"","Remove key value pair":"","Type":"","Make default":"","Default gateway":"","Edit":"","BulkSMS":"","Clickatell":"","Generic":"","Program":"","Program stage":"","Are you sure you want to delete the selected commands?":"","Delete":"","Save command":"","Something went wrong whilst submitting the form":"","Something went wrong whilst loading the sms command":"","Something went wrong whilst loading the command\'s details":"","SMS short codes":"","Add special character":"","Required values notice":"","Completeness method":"","Confirm message":"","Reply message if no codes are sent (only the command)":"","More than one orgunit message":"","No user message":"","Parser":"","Field separator":"","Special character name":"","Special character value":"","Remove":"","Success message":"","Use current period for reporting":"","Wrong format message":"","default":"","Loading formula":"","Formula":"","Edit formula":"","Add formula":"","Formula for {{combo}}":"","Data element":"","formula operator":"","Something went wrong whilst saving":"","Save":"","Receive all data values":"","Receive at least one data value":"","Do not mark as complete":"","Key value parser":"","J2ME parser":"","Alert parser":"","Unregistered parser":"","Tracked entity registration parser":"","Program stage data entry parser":"","Event registration parser":"","Duplicate value!":"","Special characters":"","Usergroup":"","Something went wrong whilst loading gateways":"","Edit gateway":"","Something went wrong whilst saving gateways":"","Gateway not found":"","The requested gateway could not be loaded":"","Something went wrong whilst saving the gateway":"","Something went wrong whilst performing the requested operation":"","An SMS gateway lets a DHIS2 instance send and receive SMS messages. Different gateway types can be added and configured below. At least one gateway is needed to send and receive SMS messages. Load balancing will use all gateways if there are multiple available. Read about gateway configuration in the DHIS2 documentation.":"","Delete selected":"","No gateways found":"","It looks like there aren\'t any configured gateways, or they couldn\'t be loaded.":"","Overview: SMS Configuration":"","Configure settings for SMS sending, receiving, data reporting, alerts, registration and more.":"","Gateway Configuration":"","Add and manage gateways for sending and receiving SMS messages in DHIS2.":"","Set up gateways":"","SMS Commands":"","Add and manage commands triggered by incoming SMS messages to register, alert and more.":"","Set up SMS commands":"","Sent SMS messages":"","Open logs of all SMS messages sent from DHIS2.":"","View all sent SMS":"","Received SMS messages":"","Open logs of all SMS messages received by DHIS2.":"","View all received SMS":"","Filter by status":"","Filter by phone number":"","Filter":"","Show":"","per page":"","Viewing {{firstItem}}-{{lastItem}} of {{total}}":"","Previous":"","Page":"","of {{pageCount}}":"","Next":"","Something went wrong whilst loading received SMSes":"","Message":"","Phone number":"","Status":"","Sender":"","Date":"","No SMSes to display":"","Unknown":"","Received":"","All":"","Failed":"","Incoming":"","Processed":"","Processing":"","Sent":"","Unhandled":"","Something went wrong whilst loading sent SMSes":"","Recipients":"","Delivered":"","Error":"","Outbound":"","Pending":"","Scheduled":"","Something went wrong whilst loading commands":"","Edit command":"","Unrecognised parser type":"","Could not find the requested parser type":"","Add command":"","Commands":"","SMS commands process SMS messages received by a DHIS2 instance, taking certain actions depending on the command and message content. Multiple SMS commands can be set up to process and handle data in multiple ways. Add and configure SMS commands below. Read about SMS commands in the DHIS2 documentation.":"","Sms command":"","No commands to display":""}')},192:function(e,a,t){e.exports={headline:"PageHeadline_headline__1llN5"}},193:function(e,a,t){e.exports={subHeadline:"PageSubHeadline_subHeadline__2c8Kn"}},194:function(e,a,t){e.exports={container:"Home_container__ODQuA",explanation:"Home_explanation__10no3",grid:"Home_grid__31J-5",gridItem:"Home_gridItem__1gOsm"}},195:function(e,a,t){e.exports={container:"HomeCard_container__1TCqS",title:"HomeCard_title__1sPYs",body:"HomeCard_body__2ubR4",linkContainer:"HomeCard_linkContainer__2dWlg",link:"HomeCard_link__QjOag"}},201:function(e,a,t){e.exports={button:"GatewayAddKeyValuePair_button__3hPEY"}},202:function(e,a,t){e.exports={formRow:"FormRow_formRow__3ALDU"}},203:function(e,a,t){e.exports={paragraph:"Paragraph_paragraph__3yubY"}},204:function(e,a,t){e.exports={container:"GatewayKeyValuePair_container__D-LyM",textInputs:"GatewayKeyValuePair_textInputs__dJAb3",keyInput:"GatewayKeyValuePair_keyInput__2WHV_",valueInput:"GatewayKeyValuePair_valueInput__1uRVv",checkboxGroup:"GatewayKeyValuePair_checkboxGroup__2k2Cu",checkbox:"GatewayKeyValuePair_checkbox__2hg0g"}},205:function(e,a,t){e.exports={container:"GatewayConfigFormEdit_container__1d38w"}},206:function(e,a,t){e.exports={rowActions:"GatewaysTable_rowActions__2fK3j",checkboxCell:"GatewaysTable_checkboxCell__3uvd3",typeCell:"GatewaysTable_typeCell__Qx_fl",editCell:"GatewaysTable_editCell__3mzrM",defaultCell:"GatewaysTable_defaultCell__1huny",makeDefaultButton:"GatewaysTable_makeDefaultButton__3gFiv",isDefaultText:"GatewaysTable_isDefaultText__15qyD"}},207:function(e,a,t){e.exports={container:"GatewayList_container__jCYee",processingMessage:"GatewayList_processingMessage__1RE2H",loadingContainer:"GatewayList_loadingContainer__7veW4"}},208:function(e,a,t){e.exports={container:"GatewayConfigFormNew_container__pJ1_K"}},209:function(e,a,t){e.exports={container:"ListActions_container__2mPW8"}},210:function(e,a,t){e.exports={container:"GatewayConfigList_container__3BZQo",actions:"GatewayConfigList_actions__yMRge"}},211:function(e,a,t){e.exports={container:"Filter_container__zWNRg",inputStrip:"Filter_inputStrip__28I4q"}},212:function(e,a,t){e.exports={container:"Pagination_container__1oOhc",verticalAlign:"Pagination_verticalAlign__2xbtG",select:"Pagination_select__39auA",buttonPrevious:"Pagination_buttonPrevious__SXF81",buttonNext:"Pagination_buttonNext__1HLDE",summary:"Pagination_summary__2dp6R"}},213:function(e,a,t){e.exports={noResults:"SmsTable_noResults__1t04p",originator:"SmsTable_originator__22EFE"}},214:function(e,a,t){e.exports={container:"ReceivedSmsList_container__vRAw_",topBar:"ReceivedSmsList_topBar__2qRs6"}},215:function(e,a,t){e.exports={container:"CommandFormActions_container__1p4Rc"}},216:function(e,a,t){e.exports={formulaInWords:"FieldDataElementWithCategoryOptionComboAddFormulaButton_formulaInWords__1t-9F",formulaInWordsLabel:"FieldDataElementWithCategoryOptionComboAddFormulaButton_formulaInWordsLabel__ZsD-J"}},217:function(e,a,t){e.exports={container:"FieldDataElementWithCategoryOptionCombo_container__2h1m8",field:"FieldDataElementWithCategoryOptionCombo_field__mnPuJ",codeField:"FieldDataElementWithCategoryOptionCombo_codeField__1wHw_"}},218:function(e,a,t){e.exports={formRow:"DataElementTimesCategoryOptionCombos_formRow__TGwSL"}},219:function(e,a,t){e.exports={container:"FieldCommandSpecialCharacter_container__2Vgvs",field:"FieldCommandSpecialCharacter_field__-1mZE",button:"FieldCommandSpecialCharacter_button__2XK2-"}},220:function(e,a,t){e.exports={container:"SmsCommandFormEdit_container__2r8xI"}},221:function(e,a,t){e.exports={container:"SmsCommandFormNew_container__34D_E"}},222:function(e,a,t){e.exports={container:"SmsCommandList_container__2tb7Z",editButtonCell:"SmsCommandList_editButtonCell__1OBCC",checkbox:"SmsCommandList_checkbox__1mJm5",noResults:"SmsCommandList_noResults__j0ImP"}},223:function(e,a,t){e.exports={recipient:"SmsTableItem_recipient__2d7vB"}},224:function(e,a,t){e.exports={container:"Pagination_container__2LAE2",left:"Pagination_left__1ff2z",right:"Pagination_right__2Py4F",amount:"Pagination_amount__19_-8",pageselection:"Pagination_pageselection__27-Pj"}},225:function(e,a,t){e.exports={noResults:"SmsTable_noResults__rTkg-"}},226:function(e,a,t){e.exports={container:"SentSmsList_container__2FUki",header:"SentSmsList_header__3biA5",headerRight:"SentSmsList_headerRight__XinlM"}},227:function(e,a,t){e.exports={item:"NavigationItem_item__3hR7s"}},231:function(e,a,t){"use strict";t.r(a);var n={};t.r(n),t.d(n,"ALL_DATAVALUE",(function(){return Ka})),t.d(n,"AT_LEAST_ONE_DATAVALUE",(function(){return Ja})),t.d(n,"DO_NOT_MARK_COMPLETE",(function(){return Wa}));var l={};t.r(l),t.d(l,"KEY_VALUE_PARSER",(function(){return en})),t.d(l,"J2ME_PARSER",(function(){return an})),t.d(l,"ALERT_PARSER",(function(){return tn})),t.d(l,"UNREGISTERED_PARSER",(function(){return nn})),t.d(l,"TRACKED_ENTITY_REGISTRATION_PARSER",(function(){return ln})),t.d(l,"PROGRAM_STAGE_DATAENTRY_PARSER",(function(){return rn})),t.d(l,"EVENT_REGISTRATION_PARSER",(function(){return sn}));var r={};t.r(r),t.d(r,"CommandsAddSpecialCharacters",(function(){return za})),t.d(r,"ALL_DATAVALUE",(function(){return Ka})),t.d(r,"AT_LEAST_ONE_DATAVALUE",(function(){return Ja})),t.d(r,"DO_NOT_MARK_COMPLETE",(function(){return Wa})),t.d(r,"DataElementTimesCategoryOptionCombos",(function(){return qt})),t.d(r,"FieldCommandCompletenessMethod",(function(){return Ht})),t.d(r,"FieldCommandConfirmMessage",(function(){return zt})),t.d(r,"FieldCommandDefaultMessage",(function(){return Jt})),t.d(r,"FieldCommandMoreThanOneOrgUnitMessage",(function(){return Yt})),t.d(r,"FieldCommandName",(function(){return Zt})),t.d(r,"FieldCommandNoUserMessage",(function(){return $t})),t.d(r,"FieldCommandParser",(function(){return mn})),t.d(r,"FieldCommandSeparator",(function(){return un})),t.d(r,"FieldCommandSmsCode",(function(){return bn})),t.d(r,"FieldCommandSpecialCharacter",(function(){return hn})),t.d(r,"FieldCommandSuccessMessage",(function(){return wn})),t.d(r,"FieldCommandUseCurrentPeriodForReporting",(function(){return Nn})),t.d(r,"FieldCommandWrongFormatMessage",(function(){return An})),t.d(r,"FieldDataElementWithCategoryOptionCombo",(function(){return jt})),t.d(r,"FieldDataElementWithCategoryOptionComboFormula",(function(){return Ot})),t.d(r,"FIELD_COMMAND_COMPLETENESS_METHOD_NAME",(function(){return Ta})),t.d(r,"FIELD_COMMAND_DEFAULT_MESSAGE_NAME",(function(){return ka})),t.d(r,"FIELD_COMMAND_ID_NAME",(function(){return Ma})),t.d(r,"FIELD_COMMAND_MORE_THAN_ONE_ORG_UNIT_MESSAGE_NAME",(function(){return Ra})),t.d(r,"FIELD_COMMAND_NAME_NAME",(function(){return Da})),t.d(r,"FIELD_COMMAND_NO_USER_MESSAGE_NAME",(function(){return Ia})),t.d(r,"FIELD_COMMAND_PARSER_NAME",(function(){return Fa})),t.d(r,"FIELD_COMMAND_PROGAM_NAME",(function(){return ja})),t.d(r,"FIELD_COMMAND_PROGAM_STAGE_NAME",(function(){return xa})),t.d(r,"FIELD_COMMAND_SEPARATOR_NAME",(function(){return Pa})),t.d(r,"FIELD_COMMAND_SMS_CODES_NAME",(function(){return Ga})),t.d(r,"FIELD_COMMAND_SPECIAL_CHARS_NAME",(function(){return La})),t.d(r,"FIELD_COMMAND_SUCCESS_MESSAGE_NAME",(function(){return qa})),t.d(r,"FIELD_COMMAND_USE_CURRENT_PERIOD_FOR_REPORTING_NAME",(function(){return Ua})),t.d(r,"FIELD_COMMAND_WRONG_FORMAT_MESSAGE_NAME",(function(){return Va})),t.d(r,"FIELD_COMMAND_CONFIRM_MESSAGE_NAME",(function(){return Ha})),t.d(r,"KEY_VALUE_PARSER",(function(){return en})),t.d(r,"J2ME_PARSER",(function(){return an})),t.d(r,"ALERT_PARSER",(function(){return tn})),t.d(r,"UNREGISTERED_PARSER",(function(){return nn})),t.d(r,"TRACKED_ENTITY_REGISTRATION_PARSER",(function(){return ln})),t.d(r,"PROGRAM_STAGE_DATAENTRY_PARSER",(function(){return rn})),t.d(r,"EVENT_REGISTRATION_PARSER",(function(){return sn})),t.d(r,"ProgramStageDataElements",(function(){return kn}));var s=t(175),o=t(174),c=t(173),i=t(1),m=t.n(i),d=t(190),u=t.n(d);const g=Object(i.createContext)({addAlert:()=>{throw new Error("AlertContext has not been initialized yet!")}}),p=(e,a="dhis2-smsconfiguration")=>"".concat(a,"-").concat(e),E=({children:e})=>{const[a,t]=Object(i.useState)([]);return m.a.createElement(g.Provider,{value:{addAlert:e=>t([...a,e])}},e,m.a.createElement(c.b,{dataTest:p("notifications-alerthandler")},a.map(({message:e,type:a})=>m.a.createElement(c.a,Object.assign({dataTest:p("notifications-alert"),key:e},{[a]:!0}),e))))};var b=t(7),f=t.n(b),y=t(191);f.a.addResources("en","default",y);var v=f.a,S=t(192),h=t.n(S);const C=({children:e})=>m.a.createElement("h1",{className:h.a.headline,"data-test":p("headline-pageheadline")},e);var w=t(193),_=t.n(w);const N=({children:e})=>m.a.createElement("h2",{className:_.a.subHeadline,"data-test":p("headline-pagesubheadline")},e);var O=t(194),A=t.n(O),T=t(195),k=t.n(T);var M=({titleText:e,bodyText:a,linkText:t,to:n})=>m.a.createElement(c.e,null,m.a.createElement("div",{className:k.a.container},m.a.createElement("h2",{className:k.a.title},e),m.a.createElement("p",{className:k.a.body},a),m.a.createElement("div",{className:k.a.linkContainer},m.a.createElement(s.b,{className:k.a.link,to:n},t))));const R=()=>m.a.createElement("div",{"data-test":p("views-home"),className:A.a.container},m.a.createElement(C,null,v.t("Overview: SMS Configuration",{nsSeparator:">"})),m.a.createElement("p",{className:A.a.explanation},v.t("Configure settings for SMS sending, receiving, data reporting, alerts, registration and more.")),m.a.createElement("div",{className:A.a.grid},m.a.createElement("div",{className:A.a.gridItem},m.a.createElement(M,{titleText:v.t("Gateway Configuration"),bodyText:v.t("Add and manage gateways for sending and receiving SMS messages in DHIS2."),linkText:v.t("Set up gateways"),to:ea})),m.a.createElement("div",{className:A.a.gridItem},m.a.createElement(M,{titleText:v.t("SMS Commands"),bodyText:v.t("Add and manage commands triggered by incoming SMS messages to register, alert and more."),linkText:v.t("Set up SMS commands"),to:Al})),m.a.createElement("div",{className:A.a.gridItem},m.a.createElement(M,{titleText:v.t("Sent SMS messages"),bodyText:v.t("Open logs of all SMS messages sent from DHIS2."),linkText:v.t("View all sent SMS"),to:Ql})),m.a.createElement("div",{className:A.a.gridItem},m.a.createElement(M,{titleText:v.t("Received SMS messages"),bodyText:v.t("Open logs of all SMS messages received by DHIS2."),linkText:v.t("View all received SMS"),to:la})))),D=({onCancelClick:e,onDeleteClick:a})=>m.a.createElement(c.p,{dataTest:p("gateways-deleteconfirmationdialog")},m.a.createElement(c.s,null,v.t("Confirm deletion")),m.a.createElement(c.r,null,v.t("Are you sure you want to delete the selected gateways?")),m.a.createElement(c.q,null,m.a.createElement(c.d,null,m.a.createElement(c.c,{secondary:!0,onClick:e,dataTest:p("gateways-deleteconfirmationdialog-cancel")},"Cancel"),m.a.createElement(c.c,{destructive:!0,onClick:a,dataTest:p("gateways-deleteconfirmationdialog-confirm")},"Delete")))),{Field:I}=c.u,F=()=>m.a.createElement(I,{required:!0,dataTest:p("gateways-fieldgatewayauthtoken"),name:"authtoken",label:v.t("Auth token"),component:c.m,validate:Object(c.I)(c.K,c.J)}),{Field:j}=c.u,x=()=>m.a.createElement(j,{required:!0,dataTest:p("gateways-fieldgatewayname"),name:"name",label:v.t("Name"),component:c.m,validate:Object(c.I)(c.K,c.J)}),{Field:P}=c.u,G=()=>m.a.createElement(P,{required:!0,dataTest:p("gateways-fieldgatewaypassword"),name:"password",label:v.t("Password"),component:c.m,validate:Object(c.I)(c.K,c.J)}),{Field:L}=c.u,q=()=>m.a.createElement(L,{required:!0,dataTest:p("gateways-fieldgatewayurltemplate"),name:"urlTemplate",label:v.t("Url template"),component:c.m,validate:Object(c.I)(c.L,c.J)}),{Field:U}=c.u,V=()=>m.a.createElement(U,{required:!0,dataTest:p("gateways-fieldgatewayusername"),name:"username",label:v.t("User name"),component:c.m,validate:Object(c.I)(c.K,c.J)});var H=t(201),B=t.n(H);const{useForm:z}=c.u,K=()=>{const{change:e,getState:a}=z();return m.a.createElement(c.c,{className:B.a.button,onClick:()=>{const{parameters:t}=a().values;e("parameters",[...t,{header:!1,encode:!1,key:"",value:"",confidential:!1}])},dataTest:p("gateways-gatewayaddkeyvaluepair")},v.t("Add key value pair"))};var J=t(6),W=t.n(J),Y=t(202),Q=t.n(Y);const Z=({children:e,className:a})=>m.a.createElement("div",{className:W()(Q.a.formRow,a),"data-test":p("forms-formrow")},e),{Form:X}=c.u,$=({onCancelClick:e,onSubmit:a,initialValues:t})=>{const n=t?v.t("Save gateway"):v.t("Add gateway");return m.a.createElement(X,{keepDirtyOnReinitialize:!0,onSubmit:a,initialValues:t},({handleSubmit:a,submitting:t,pristine:l})=>m.a.createElement("form",{onSubmit:a,"data-test":p("gateways-gatewaybulksmsform")},m.a.createElement(Z,null,m.a.createElement(x,null)),m.a.createElement(Z,null,m.a.createElement(V,null)),m.a.createElement(Z,null,m.a.createElement(G,null)),m.a.createElement(c.d,null,m.a.createElement(c.c,{primary:!0,type:"submit",icon:t?m.a.createElement(c.i,{small:!0}):null,disabled:t,dataTest:p("forms-gatewaybulksmsform-submit")},n),m.a.createElement(c.c,{onClick:()=>e(l)},v.t("Cancel")))))};$.defaultProps={initialValues:{}};const{Form:ee}=c.u,ae=({onCancelClick:e,onSubmit:a,initialValues:t})=>{const n=t?v.t("Save gateway"):v.t("Add gateway");return m.a.createElement(ee,{keepDirtyOnReinitialize:!0,onSubmit:a,initialValues:t},({handleSubmit:a,submitting:t,pristine:l})=>m.a.createElement("form",{onSubmit:a,"data-test":p("gateways-gatewayclickatellform")},m.a.createElement(Z,null,m.a.createElement(x,null)),m.a.createElement(Z,null,m.a.createElement(V,null)),m.a.createElement(Z,null,m.a.createElement(F,null)),m.a.createElement(Z,null,m.a.createElement(q,null)),m.a.createElement(c.d,null,m.a.createElement(c.c,{primary:!0,type:"submit",icon:t?m.a.createElement(c.i,{small:!0}):null,disabled:t,dataTest:p("forms-gatewayclickatellform-submit")},n),m.a.createElement(c.c,{onClick:()=>e(l)},v.t("Cancel")))))};ae.defaultProps={initialValues:{}};var te=t(203),ne=t.n(te);const le=({children:e})=>m.a.createElement("p",{className:ne.a.paragraph,"data-test":p("text-paragraph")},e),{Form:re}=c.u,se=({onCancelClick:e,onSubmit:a,initialValues:t})=>{const n=t?v.t("Save gateway"):v.t("Add gateway");return m.a.createElement(re,{keepDirtyOnReinitialize:!0,onSubmit:a,initialValues:t},({handleSubmit:a,values:t,submitting:l,pristine:r})=>m.a.createElement("form",{onSubmit:a,"data-test":p("gateways-gatewaygenericform")},m.a.createElement(N,null,v.t("Gateway setup")),m.a.createElement(Z,null,m.a.createElement(x,null)),m.a.createElement(Z,null,m.a.createElement(q,null)),m.a.createElement(N,null,v.t("Key value pairs")),m.a.createElement(le,null,v.t("Key value pairs can be included in the URL. This is some helper text which provides an intro to what the key value pairs actually do.")),t.parameters.map((e,a)=>m.a.createElement(ue,{index:a,key:a})),m.a.createElement(K,null),m.a.createElement(c.d,null,m.a.createElement(c.c,{primary:!0,type:"submit",dataTest:p("forms-gatewaygenericform-submit"),disabled:l,icon:l?m.a.createElement(c.i,{small:!0}):null},n),m.a.createElement(c.c,{onClick:()=>e(r)},v.t("Cancel")))))};se.defaultProps={initialValues:{parameters:[]}};var oe=t(204),ce=t.n(oe);const{Field:ie,useForm:me}=c.u,de=Object(c.I)(c.K,c.J),ue=({index:e})=>{const{change:a,getState:t}=me();return m.a.createElement("div",{className:ce.a.container,"data-test":p("gateways-gatewaykeyvaluepair")},m.a.createElement("div",{className:ce.a.textInputs},m.a.createElement(ie,{dataTest:p("gateways-gatewaykeyvaluepair-key"),className:ce.a.keyInput,name:"parameters[".concat(e,"].key"),label:v.t("Key"),component:c.m,validate:de}),m.a.createElement(ie,{dataTest:p("gateways-gatewaykeyvaluepair-value"),className:ce.a.valueInput,name:"parameters[".concat(e,"].value"),label:v.t("Value"),component:c.m,validate:de})),m.a.createElement("div",{className:ce.a.checkboxGroup},m.a.createElement(ie,{dataTest:p("gateways-gatewaykeyvaluepair-isheader"),className:ce.a.checkbox,type:"checkbox",name:"parameters[".concat(e,"].header"),label:v.t("Send as header"),component:c.h}),m.a.createElement(ie,{dataTest:p("gateways-gatewaykeyvaluepair-isencoded"),className:ce.a.checkbox,type:"checkbox",name:"parameters[".concat(e,"].encode"),label:v.t("Encode"),component:c.h}),m.a.createElement(ie,{dataTest:p("gateways-gatewaykeyvaluepair-isconfidential"),className:ce.a.checkbox,type:"checkbox",name:"parameters[".concat(e,"].confidential"),label:v.t("Confidential"),component:c.h})),m.a.createElement(c.c,{small:!0,secondary:!0,dataTest:p("gateways-gatewaykeyvaluepair-remove"),onClick:()=>(e=>{const{parameters:n}=t().values;a("parameters",0===e?n.slice(1):[...n.slice(0,e),...n.slice(e+1)])})(e)},v.t("Remove key value pair")))};var ge=t(11);const pe=({onConfirmCancel:e,onAbortCancel:a})=>m.a.createElement(c.p,null,m.a.createElement(c.s,null,v.t("Are you sure you want to cancel? Unsaved changes will be lost")),m.a.createElement(c.q,null,m.a.createElement(c.d,null,m.a.createElement(c.c,{onClick:a},v.t("No, stay on page")),m.a.createElement(c.c,{primary:!0,onClick:e},v.t("Yes, cancel")))));var Ee=t(205),be=t.n(Ee);const fe="".concat("/sms-gateway/edit","/:id"),ye=()=>{var e;const a=Object(o.g)(),{id:t}=Object(o.i)(),[n,l]=Object(i.useState)(!1),{loading:r,error:s,data:d}=je(t),[u,{error:g}]=ze(),[E,{error:b}]=Ue(),[f,{error:y}]=He(),S=g||b||y;if(r)return m.a.createElement(m.a.Fragment,null,m.a.createElement(C,null,v.t("Edit")),m.a.createElement(c.f,null,m.a.createElement(c.i,null)));if(s){const e=v.t("Something went wrong whilst loading gateways");return m.a.createElement(m.a.Fragment,null,m.a.createElement(C,null,v.t("Edit")),m.a.createElement(c.t,{error:!0,title:e},s.message))}const h=d&&"string"===typeof d.gateway?{gateway:JSON.parse(d.gateway)}:d,w=null===h||void 0===h||null===(e=h.gateway)||void 0===e?void 0:e.type,_=null===h||void 0===h?void 0:h.gateway,N=(e=>{if(e===Ne)return se;if(e===Oe)return $;if(e===Ae)return ae;throw new Error('The gateway type does not exist, got "'.concat(e,'"'))})(w);return m.a.createElement("div",{"data-test":p("views-gatewayconfigformedit"),className:be.a.container},m.a.createElement(C,null,v.t("Edit gateway")),_?m.a.createElement("div",{"data-test":p("views-gatewayconfigformedit-formcontainer"),"data-gateway-id":h.gateway.uid},S&&m.a.createElement(c.t,{error:!0,title:v.t("Something went wrong whilst saving gateways")},S.message),m.a.createElement(N,{initialValues:h.gateway,onSubmit:async e=>{const t=Object(ge.a)(Object(ge.a)({},e),{},{id:h.gateway.uid});try{t.type===Ne&&await u(t),t.type===Oe&&await E(t),t.type===Ae&&await f(t),a.push(ea)}catch(n){return Promise.reject(n)}},onCancelClick:e=>e?a.push(ea):l(!0)})):m.a.createElement(c.t,{error:!0,title:v.t("Gateway not found")},v.t("The requested gateway could not be loaded")),n&&m.a.createElement(pe,{onConfirmCancel:()=>a.push(ea),onAbortCancel:()=>l(!1)}))};var ve=t(206),Se=t.n(ve);const he=({allGatewaysChecked:e,checkedGateways:a,gateways:t,onGatewayToggle:n,onToggleAll:l,onMakeDefaultClick:r})=>{const s=Object(o.g)();return m.a.createElement(c.z,{dataTest:p("gateways-gatewaystable")},m.a.createElement(c.E,null,m.a.createElement(c.G,null,m.a.createElement(c.C,{dataTest:p("gateways-gatewaystable-checkall")},m.a.createElement(c.g,{onChange:l,checked:e})),m.a.createElement(c.C,null,v.t("Name")),m.a.createElement(c.C,null,v.t("Type")),m.a.createElement(c.C,null),m.a.createElement(c.C,null))),m.a.createElement(c.A,null,t.map(e=>{return m.a.createElement(c.F,{key:e.uid,dataTest:p("gateways-gatewaystable-row")},m.a.createElement(c.B,{className:Se.a.checkboxCell,dataTest:p("gateways-gatewaystable-checkbox")},m.a.createElement(c.g,{value:e.uid,onChange:()=>n(e.uid),checked:a.includes(e.uid),dataTest:p("gateways-gatewaystable-id")})),m.a.createElement(c.B,{dataTest:p("gateways-gatewaystable-name")},e.name),m.a.createElement(c.B,{className:Se.a.typeCell,dataTest:p("gateways-gatewaystable-type")},"bulksms"===(t=e.type)?v.t("BulkSMS"):"clickatell"===t?v.t("Clickatell"):"http"!==t&&t?t:v.t("Generic")),m.a.createElement(c.B,{className:Se.a.defaultCell},e.isDefault?m.a.createElement("span",{className:Se.a.isDefaultText},v.t("Default gateway")):m.a.createElement(c.c,{dataTest:p("gateways-gatewaystable-makedefault"),onClick:()=>r(e.uid),className:Se.a.makeDefaultButton},v.t("Make default"))),m.a.createElement(c.B,{dataTest:p("gateways-gatewaystable-actions"),className:Se.a.editCell},m.a.createElement(c.d,{className:Se.a.rowActions},m.a.createElement(c.c,{dataTest:p("gateways-gatewaystable-edit"),onClick:()=>{s.push("".concat("/sms-gateway/edit","/").concat(e.uid))}},v.t("Edit")))));var t})))};var Ce=t(207),we=t.n(Ce);const _e=({checkedGateways:e,gateways:a,setCheckedGateways:t,onMakeDefaultClick:n,processing:l})=>{const r=e.length===a.length;return m.a.createElement("div",{className:we.a.container,"data-test":p("gateways-gatewaylist")},l&&m.a.createElement("div",{className:we.a.processingMessage},m.a.createElement("div",{className:we.a.loadingContainer},m.a.createElement(c.i,null))),m.a.createElement(he,{allGatewaysChecked:r,gateways:a,checkedGateways:e,onGatewayToggle:a=>{if(e.includes(a)){const n=e.findIndex(e=>e===a),l=0===n?e.slice(1):[...e.slice(0,n),...e.slice(n+1)];t(l)}else t([...e,a])},onMakeDefaultClick:n,onToggleAll:()=>{if(r)t([]);else{const e=a.map(({uid:e})=>e);t(e)}}}))},Ne="http",Oe="bulksms",Ae="clickatell";var Te=t(8);const ke={resource:"gateways",type:"create",data:({name:e,username:a,password:t})=>({type:"bulksms",name:e,username:a,password:t})},Me={resource:"gateways",type:"create",data:({name:e,username:a,authtoken:t,urlTemplate:n})=>({type:"clickatell",name:e,username:a,authtoken:t,urlTemplate:n})},Re={resource:"gateways",type:"create",data:({name:e,urlTemplate:a,parameters:t})=>({type:"http",name:e,urlTemplate:a,parameters:t})},De={resource:"gateways",type:"delete",id:({id:e})=>e},Ie=()=>{const[e,a]=Object(i.useState)(!1),[t,n]=Object(i.useState)(null),l=(e=>a=>{const t={id:a};return e.mutate(De,{variables:t})})(Object(Te.c)()),r=e=>(a(!1),e),s=e=>{n(e),a(!1)};return[({ids:e})=>(a(!0),Promise.all(e.map(l)).then(r).catch(s)),{loading:e,error:t}]},Fe={gateway:{resource:"gateways",id:({id:e})=>e}},je=e=>Object(Te.e)(Fe,{variables:{id:e}});var xe=t(185);const Pe={gateways:{resource:"gateways.json",params:({fields:e,filter:a})=>{const t={};return e&&(t.fields=e),a&&(t.filter=a),t}}},Ge={resource:"gateways/default",type:"replace",id:({id:e})=>e},Le=e=>{const[a,t]=Object(i.useState)(!1),[n,l]=Object(i.useState)(null),r=Object(Te.c)();return[a=>{const n=Object(ge.a)(Object(ge.a)({},e),{},{id:a.id});return t(!0),l(null),r.mutate(n,{variables:a}).then(e=>(t(!1),e)).catch(e=>{throw t(!1),l(e),e})},{loading:a,error:n}]},qe={resource:"gateways",id:({id:e})=>e,type:"update",data:({name:e,username:a,password:t})=>({type:"bulksms",name:e,username:a,password:t})},Ue=()=>Le(qe),Ve={resource:"gateways",id:({id:e})=>e,type:"update",data:({name:e,username:a,authtoken:t,urlTemplate:n})=>({type:"clickatell",name:e,username:a,authtoken:t,urlTemplate:n})},He=()=>Le(Ve),Be={resource:"gateways",id:({id:e})=>e,type:"replace",data:({name:e,urlTemplate:a,parameters:t})=>({type:"http",name:e,urlTemplate:a,parameters:t})},ze=()=>Le(Be);var Ke=t(208),Je=t.n(Ke);const We=()=>{const e=Object(o.g)(),[a,t]=Object(i.useState)(Ne),[n,{error:l}]=Object(Te.d)(Re),[r,{error:s}]=Object(Te.d)(ke),[d,{error:u}]=Object(Te.d)(Me),g=l||s||u;if(g){const e=v.t("Something went wrong whilst saving the gateway");return m.a.createElement("div",{"data-test":p("views-gatewayconfigformnew")},m.a.createElement(C,null,v.t("Add gateway")),m.a.createElement(c.t,{error:!0,title:e},g.message))}const E=async t=>{try{a===Ne&&await n(t),a===Oe&&await r(t),a===Ae&&await d(t),e.push(ea)}catch(l){return Promise.reject(l)}},b=()=>e.push(ea);return m.a.createElement("div",{"data-test":p("views-gatewayconfigformnew"),className:Je.a.container},m.a.createElement(C,null,v.t("Add gateway")),m.a.createElement(Z,null,m.a.createElement(c.w,{label:v.t("Type"),onChange:({selected:e})=>t(e),selected:a,dataTest:p("views-gatewayconfigformnew-gatewaytype")},m.a.createElement(c.y,{value:Ne,label:v.t("Generic")}),m.a.createElement(c.y,{value:Oe,label:v.t("BulkSMS")}),m.a.createElement(c.y,{value:Ae,label:v.t("Clickatell")}))),m.a.createElement(Z,null,a===Ne&&m.a.createElement(se,{onSubmit:E,onCancelClick:b}),a===Oe&&m.a.createElement($,{onSubmit:E,passwordRequired:!0,onCancelClick:b}),a===Ae&&m.a.createElement(ae,{onSubmit:E,passwordRequired:!0,onCancelClick:b})))};var Ye=t(209),Qe=t.n(Ye);const Ze=({addLabel:e,deleteLabel:a,dataTest:t,onAddClick:n,onDeleteClick:l,disableAdd:r,disableDelete:s})=>m.a.createElement("div",{className:Qe.a.container},m.a.createElement(c.d,{"data-test":p("".concat(t,"-actions"))},m.a.createElement(c.c,{primary:!0,onClick:n,disabled:r,dataTest:p("".concat(t,"-add"))},e),m.a.createElement(c.c,{destructive:!0,onClick:l,disabled:s,dataTest:p("".concat(t,"-delete"))},a)));var Xe=t(210),$e=t.n(Xe);const ea="/sms-gateway",aa=()=>{var e,a;const t=Object(o.g)(),[n,l]=Object(i.useState)([]),[r,s]=Object(i.useState)(!1),{loading:d,error:u,data:g,refetch:E}=(e=>{var a;"id:in:[".concat(null===e||void 0===e?void 0:e.join(","),"]");const t={},n=Object(Te.e)(Pe,{variables:t}),{data:l}=n,r=Object(xe.a)(n,["data"]),s=l&&"string"===typeof l.gateways?{gateways:JSON.parse(l.gateways)}:l,o=e&&(null===s||void 0===s||null===(a=s.gateways)||void 0===a?void 0:a.gateways)?{gateways:{gateways:s.gateways.gateways.filter(({uid:a})=>e.includes(a))}}:s;return Object(ge.a)({data:o},r)})(),[b,{loading:f,error:y}]=Ie(),[S,{loading:h,error:w}]=Object(Te.d)(Ge),_=d||f||h;if(_)return m.a.createElement(m.a.Fragment,null,m.a.createElement(C,null,"Gateway configuration"),m.a.createElement(c.f,null,m.a.createElement(c.i,null)));const N=u||y||w;if(N){const e=v.t("Something went wrong whilst performing the requested operation");return m.a.createElement(m.a.Fragment,null,m.a.createElement(C,null,"Gateway configuration"),m.a.createElement(c.t,{error:!0,title:e},N.message))}const O=!!(null===g||void 0===g||null===(e=g.gateways)||void 0===e||null===(a=e.gateways)||void 0===a?void 0:a.length);return m.a.createElement("div",{className:$e.a.container,"data-test":p("views-gatewayconfiglist")},m.a.createElement(C,null,"Gateway configuration"),m.a.createElement(le,null,v.t("An SMS gateway lets a DHIS2 instance send and receive SMS messages. Different gateway types can be added and configured below. At least one gateway is needed to send and receive SMS messages. Load balancing will use all gateways if there are multiple available. Read about gateway configuration in the DHIS2 documentation.")),m.a.createElement(Ze,{addLabel:v.t("Add gateway"),deleteLabel:v.t("Delete selected"),dataTest:"views-gatewayconfiglist",onAddClick:()=>t.push("/sms-gateway/new"),onDeleteClick:()=>s(!0),disableAdd:f,disableDelete:!n.length||f}),O?m.a.createElement(_e,{processing:_,checkedGateways:n,setCheckedGateways:l,gateways:g.gateways.gateways,onMakeDefaultClick:e=>{S({id:e}).then(E)}}):m.a.createElement(c.t,{info:!0,title:v.t("No gateways found")},v.t("It looks like there aren't any configured gateways, or they couldn't be loaded.")),r&&m.a.createElement(D,{onCancelClick:()=>s(!1),onDeleteClick:()=>{b({ids:n}).then(E),s(!1)}}))};var ta=t(9);const na=f.a.t("Received"),la="/received",ra=[{value:"ALL",label:f.a.t("All")},{value:"FAILED",label:f.a.t("Failed")},{value:"INCOMING",label:f.a.t("Incoming")},{value:"PROCESSED",label:f.a.t("Processed")},{value:"PROCESSING",label:f.a.t("Processing")},{value:"SENT",label:f.a.t("Sent")},{value:"UNHANDLED",label:f.a.t("Unhandled")}],sa={resource:"sms/inbound",type:"delete",params:({ids:e})=>({ids:e})},oa=({selectedIds:e,onComplete:a})=>{const{addAlert:t}=Object(i.useContext)(g),[n]=Object(Te.d)(sa,{onComplete:a,onError:e=>{t({type:"critical",message:e.message})}});return m.a.createElement(c.c,{destructive:!0,onClick:()=>n({ids:e.join()}),disabled:0===e.length},f.a.t("Delete selected"))},ca=()=>{const e=new URLSearchParams(Object(o.h)().search);return{status:e.get("status")||"ALL",phoneNumber:e.get("phoneNumber")||"",page:parseInt(e.get("page")||1),pageSize:parseInt(e.get("pageSize")||50)}},ia=e=>{const a=Object.keys(e).reduce((a,t)=>{const n=e[t];return n&&!("status"===t&&"ALL"===n)&&a.push("".concat(t,"=").concat(n)),a},[]).join("&");return"?".concat(a)};var ma=t(211),da=t.n(ma);const{Form:ua,Field:ga}=c.u,pa=({loading:e})=>{const{status:a,phoneNumber:t,pageSize:n}=ca(),l={status:a,phoneNumber:t},r=Object(o.g)();return m.a.createElement("div",{"data-test":p("views-receivedsms-filter"),className:da.a.container},m.a.createElement(ua,{onSubmit:({status:e,phoneNumber:a})=>{r.push({search:ia({status:e,phoneNumber:a,pageSize:n,page:1})})},initialValues:l},({handleSubmit:a,pristine:t})=>m.a.createElement("form",{onSubmit:a,className:da.a.inputStrip},m.a.createElement(ga,{name:"status",component:c.x,options:ra,label:f.a.t("Filter by status"),inputWidth:"200px"}),m.a.createElement(ga,{name:"phoneNumber",component:c.m,label:f.a.t("Filter by phone number"),className:da.a.phoneNumberField,inputWidth:"300px"}),m.a.createElement(c.c,{large:!0,type:"submit",disabled:e||t},f.a.t("Filter")))))};var Ea=t(15),ba=t.n(Ea),fa=t(212),ya=t.n(fa);const va=["1","2","10","20","30","40","50","100"],Sa=({page:e,pageCount:a,pageSize:t,total:n})=>{const l=Math.min((e-1)*t+1,n),r=Math.min(l+t-1,n),s=Array.from({length:a},(e,a)=>(a+1).toString()),{status:i,phoneNumber:d}=ca(),u=Object(o.g)(),g=e=>{u.push({search:ia({status:i,phoneNumber:d,pageSize:t,page:e})})};return m.a.createElement("div",{className:ya.a.container},m.a.createElement("div",{className:ya.a.verticalAlign},f.a.t("Show"),m.a.createElement(c.v,{dense:!0,selected:t.toString(),onChange:({selected:e})=>{u.push({search:ia({status:i,phoneNumber:d,pageSize:e,page:1})})},className:ya.a.select},va.map(e=>m.a.createElement(c.y,{key:e,value:e,label:e}))),f.a.t("per page")),m.a.createElement("div",{className:ya.a.verticalAlign},m.a.createElement("span",{className:ya.a.summary},f.a.t("Viewing {{firstItem}}-{{lastItem}} of {{total}}",{firstItem:l,lastItem:r,total:n})),m.a.createElement(c.c,{className:ya.a.buttonPrevious,small:!0,disabled:1===e,onClick:()=>g(e-1)},f.a.t("Previous")),m.a.createElement("span",null,f.a.t("Page")),m.a.createElement(c.v,{dense:!0,inputWidth:"600px",selected:e.toString(),onChange:({selected:e})=>g(e),className:ya.a.select},s.map(e=>m.a.createElement(c.y,{key:e,value:e,label:e}))),m.a.createElement("span",null,f.a.t("of {{pageCount}}",{pageCount:a})),m.a.createElement(c.c,{className:ya.a.buttonNext,small:!0,disabled:e===a,onClick:()=>g(e+1)},f.a.t("Next"))))};var ha=t(213),Ca=t.n(ha);const wa=({messages:e,pager:a,selectedIds:t,setSelectedIds:n})=>{const l=new Set(t),r=e.length>0&&t.length===e.length,s=e=>{l.has(e)?l.delete(e):l.add(e),n(Array.from(l))};return m.a.createElement(c.z,null,m.a.createElement(c.E,null,m.a.createElement(c.G,null,m.a.createElement(c.C,null,m.a.createElement(c.g,{checked:r,onChange:()=>{n(r?[]:e.map(({id:e})=>e))}})),m.a.createElement(c.C,null,f.a.t("Message")),m.a.createElement(c.C,null,f.a.t("Phone number")),m.a.createElement(c.C,null,f.a.t("Status")),m.a.createElement(c.C,null,f.a.t("Sender")),m.a.createElement(c.C,null,f.a.t("Date")))),m.a.createElement(c.A,null,0===e.length?m.a.createElement(c.F,null,m.a.createElement(c.B,{colSpan:"7",className:Ca.a.noResults},f.a.t("No SMSes to display"))):e.map(e=>m.a.createElement(c.F,{key:e.id},m.a.createElement(c.B,null,m.a.createElement(c.g,{checked:l.has(e.id),onChange:s.bind(null,e.id)})),m.a.createElement(c.B,null,e.text),m.a.createElement(c.B,null,m.a.createElement("span",{className:Ca.a.originator},e.originator)),m.a.createElement(c.B,null,e.smsstatus),m.a.createElement(c.B,null,e.user?e.user.userCredentials.username:f.a.t("Unknown")),m.a.createElement(c.B,null,ba()(e.receivedDate).format("MMMM Do YYYY, h:mm:ss a"))))),m.a.createElement(c.D,null,m.a.createElement(c.F,null,m.a.createElement(c.B,{colSpan:"7"},m.a.createElement(Sa,a)))))};var _a=t(214),Na=t.n(_a);const Oa={inboundSms:{resource:"sms/inbound",params:({page:e,pageSize:a,phoneNumber:t,status:n})=>({page:e,pageSize:a,phoneNumber:t,status:n,fields:["id","text","originator","smsstatus","user[userCredentials[username]]","receiveddate"]})}},Aa=()=>{var e;const[a,t]=Object(i.useState)([]),{page:n,pageSize:l,phoneNumber:r,status:s}=ca(),{called:o,loading:d,error:u,data:g,refetch:E}=Object(ta.d)(Oa,{lazy:!0});if(Object(i.useEffect)(()=>{E({page:n,pageSize:l,phoneNumber:r,status:s})},[n,l,r,s]),d||!o)return m.a.createElement(m.a.Fragment,null,m.a.createElement(C,null,na),m.a.createElement(c.f,null,m.a.createElement(c.i,null)));if(u){const e=v.t("Something went wrong whilst loading received SMSes");return m.a.createElement(m.a.Fragment,null,m.a.createElement(C,null,na),m.a.createElement(c.t,{error:!0,title:e},u.message))}const b=(null===g||void 0===g||null===(e=g.inboundSms)||void 0===e?void 0:e.inboundsmss)||[];return m.a.createElement("div",{"data-test":p("views-receivedsmslist"),className:Na.a.container},m.a.createElement(C,null,na),m.a.createElement("div",{className:Na.a.topBar},m.a.createElement(pa,{loading:d}),m.a.createElement(oa,{onComplete:()=>{E(),t([])},selectedIds:a})),m.a.createElement("div",null,m.a.createElement(wa,{messages:b,pager:g.inboundSms.pager,selectedIds:a,setSelectedIds:t})))},Ta="completenessMethod",ka="defaultMessage",Ma="id",Ra="moreThanOneOrgUnitMessage",Da="name",Ia="noUserMessage",Fa="parserType",ja="program",xa="programStage",Pa="separator",Ga="smsCodes",La="specialCharacters",qa="successMessage",Ua="currentPeriodUsedForReporting",Va="wrongFormatMessage",Ha="receivedMessage",{useForm:Ba}=c.u,za=()=>{const{change:e,getState:a}=Ba();return m.a.createElement(Z,null,m.a.createElement(c.c,{onClick:()=>{const t=[...a().values[La],{name:"",value:""}];e(La,t)},dataTest:p("forms-commandsaddspecialcharacters")},v.t("Add special character")))},Ka={value:"ALL_DATAVALUE",label:v.t("Receive all data values")},Ja={value:"AT_LEAST_ONE_DATAVALUE",label:v.t("Receive at least one data value")},Wa={value:"DO_NOT_MARK_COMPLETE",label:v.t("Do not mark as complete")},{useFormState:Ya}=c.u,Qa={submitting:!0,pristine:!0},Za=()=>{const{submitting:e,pristine:a}=Ya({subscription:Qa});return m.a.createElement(c.c,{primary:!0,type:"submit",disabled:a||e,icon:e?m.a.createElement(c.i,{small:!0}):null},v.t("Save command"))},{useFormState:Xa}=c.u,$a={submitError:!0,hasSubmitErrors:!0},et=()=>{const{submitError:e,hasSubmitErrors:a}=Xa({subscription:$a});return a?m.a.createElement(Z,null,m.a.createElement(c.t,{error:!0,title:v.t("Something went wrong whilst submitting the form")},e)):null};var at=t(215),tt=t.n(at);const nt=({onCancel:e})=>m.a.createElement("div",{className:tt.a.container},m.a.createElement(et,null),m.a.createElement(c.d,null,m.a.createElement(Za,null),m.a.createElement(c.c,{onClick:e},v.t("Cancel")))),lt=({onCancelClick:e,onDeleteClick:a})=>m.a.createElement(c.p,{dataTest:p("commands-deleteconfirmationdialog")},m.a.createElement(c.s,null,v.t("Confirm deletion")),m.a.createElement(c.r,null,v.t("Are you sure you want to delete the selected commands?")),m.a.createElement(c.q,null,m.a.createElement(c.d,null,m.a.createElement(c.c,{secondary:!0,onClick:e,dataTest:p("commands-deleteconfirmationdialog-cancel")},v.t("Cancel")),m.a.createElement(c.c,{primary:!0,onClick:a,dataTest:p("commands-deleteconfirmationdialog-confirm")},v.t("Delete"))))),rt=(e,a)=>e===a.value,st={resource:"smsCommands",type:"create",data:({parserType:e,name:a,dataset:t,userGroup:n,program:l,programStage:r})=>{if(e===en.value||e===an.value)return{parserType:e,name:a,dataset:t};if(e===tn.value||e===nn.value)return{parserType:e,name:a,userGroup:{id:n}};if(e===ln.value||e===sn.value)return{parserType:e,name:a,program:l};if(e===rn.value)return{parserType:e,name:a,program:l,programStage:r};throw new Error('You provided an unrecognized parserType "'.concat(e,'"'))}},ot={resource:"smsCommands",type:"delete",id:({id:e})=>e},ct=()=>{const[e,a]=Object(i.useState)(!1),[t,n]=Object(i.useState)(null),l=(e=>a=>{const t={id:a};return e.mutate(ot,{variables:t})})(Object(Te.c)()),r=e=>(a(!1),e),s=e=>{n(e),a(!1)};return[({ids:e})=>(a(!0),Promise.all(e.map(l)).then(r).catch(s)),{loading:e,error:t}]},it={smsCommand:{resource:"smsCommands",id:({id:e})=>e,params:{fields:"parserType",paging:"false"}}},mt={smsCommands:{resource:"smsCommands",pager:!1,params:({ids:e}={})=>({paging:"false",fields:"*",filter:e?"ids:in:[".concat(e.join(","),"]"):void 0})}},{FORM_ERROR:dt}=c.l,ut=e=>e,gt={resource:"smsCommands",type:"update",id:({commandId:e})=>e,data:e=>{let{commandId:a}=e;return Object(xe.a)(e,["commandId"])}},pt=Object(ge.a)(Object(ge.a)({},gt),{},{partial:!0}),Et=({onAfterChange:e,commandId:a,formatCommand:t=ut,replace:n=!1})=>{const{addAlert:l}=Object(i.useContext)(g),r=Object(Te.c)();return s=>{const o={variables:Object(ge.a)(Object(ge.a)({},t(s)),{},{commandId:a})},c=n?pt:gt;return r.mutate(c,o).then(e).catch(e=>{if("access"===e.type){const a="No error message was provided",t=e.message||v.t(a);return{[dt]:t}}l({type:"critical",message:e.message})})}},{Field:bt}=c.u,ft=({dataSets:e,loading:a,required:t,disabled:n,errorText:l})=>m.a.createElement(bt,{disabled:n,error:!!l,validationText:l,required:t,loading:a,dataTest:p("forms-fielddataset"),name:"dataset",label:v.t("Dataset"),component:c.x,options:e,validate:c.J,format:e=>(null===e||void 0===e?void 0:e.id)||null,parse:e=>({id:e})});ft.defaultProps={disabled:!1,loading:!1,required:!1,errorText:""};const yt={dataSets:{resource:"dataSets",params:{fields:["id","displayName"],paging:"false"}}},vt=({required:e})=>{const{loading:a,error:t,data:n}=Object(Te.e)(yt);if(a)return m.a.createElement(ft,{loading:!0,showLoadingStatus:!0,required:e,dataSets:[]});if(t)return m.a.createElement(ft,{required:e,disabled:!0,programs:[],errorText:t.message});const{dataSets:l}=n.dataSets,r=l.map(({id:e,displayName:a})=>({label:a,value:e}));return m.a.createElement(ft,{required:e,dataSets:r})};vt.defaultProps={required:!1};const St={dataSet:{resource:"dataSets",id:({id:e})=>e,params:({filter:e})=>({filter:e,fields:"dataSetElements[dataElement[id,code,displayName]]"})}},ht=(e,a)=>{const[t,n]=Object(i.useState)(!0),[l,r]=Object(i.useState)(null),[s,o]=Object(i.useState)(null),c=Object(Te.c)(),m=e=>(n(!0),r(null),((e,a)=>e.query(St,{variables:a}).then(e=>{const{dataSet:a}=e,{dataSetElements:t}=a;return t.map(({dataElement:e})=>e)}))(c,e).then(o).catch(r).finally(()=>n(!1)));return Object(i.useEffect)(()=>{m({id:e,filter:a})},[]),{loading:t,error:l,data:s,refetch:m}},{Field:Ct,Form:wt,useForm:_t,useField:Nt}=c.u,Ot=({baseName:e,combo:a,targetFieldName:t,onClose:n})=>{const l=_t(),r=Nt(e,{subscription:{value:!0}}).input.value,s=Nt("dataset",{subscription:{value:!0}}).input.value.id,{loading:o,error:d,data:u}=ht(s),g=r.formula,p={operator:Object(i.useMemo)(()=>g?g[0]:"+",[]),dataElementCode:Object(i.useMemo)(()=>g?g.slice(1):"",[])};if(o)return m.a.createElement(c.p,null,m.a.createElement(c.i,null));const E=u.map(e=>{const{code:a,displayName:t}=e;return{value:a,label:t}}),b=()=>{l.change(t,null),n()};return m.a.createElement(wt,{onSubmit:e=>{const a="".concat(e.operator).concat(e.dataElementCode);l.change(t,a),n()},initialValues:p},({handleSubmit:e})=>m.a.createElement(c.p,null,m.a.createElement("form",{onSubmit:a=>{a.stopPropagation(),e(a)}},m.a.createElement(c.s,null,v.t("Formula for {{combo}}",{combo:a})),m.a.createElement(c.r,null,m.a.createElement(Z,null,m.a.createElement(Ct,{required:!0,name:"dataElementCode",label:v.t("Data element"),component:c.x,options:E,validate:c.J})),m.a.createElement(Z,null,m.a.createElement(Ct,{required:!0,name:"operator",label:v.t("formula operator"),component:c.x,initialValue:"+",options:[{value:"+",label:"+"},{value:"-",label:"-"}]})),d&&m.a.createElement(Z,null,m.a.createElement(c.t,{error:!0,title:v.t("Something went wrong whilst saving")},d.message))),m.a.createElement(c.q,null,m.a.createElement(c.d,null,m.a.createElement(c.c,{onClick:b},v.t("Remove")),m.a.createElement(c.c,{onClick:n},v.t("Cancel")),m.a.createElement(c.c,{type:"submit",primary:!0},v.t("Save")))))))};var At=t(216),Tt=t.n(At);const{useField:kt}=c.u,Mt={dataElement:{resource:"dataElements",params:({code:e})=>({filter:"code:eq:".concat(e),fields:"displayName",paging:"false"})}},Rt=({baseName:e,onClick:a,disabled:t})=>{const n=Object(Te.c)(),[l,r]=Object(i.useState)(!1),[s,o]=Object(i.useState)(!1),[d,u]=Object(i.useState)(""),g=kt(e,{subscription:{value:!0}}).input.value,{formula:p,code:E}=g,b=p&&p[0],f=p&&p.slice(1);return Object(i.useEffect)(()=>{!l&&f&&(o(!0),r(!0),n.query(Mt,{variables:{code:f}}).then(e=>{const[{displayName:a}]=e.dataElement.dataElements;u(a)}).finally(()=>o(!1)))},[f,l]),m.a.createElement(m.a.Fragment,null,s&&v.t("Loading formula"),E&&d&&m.a.createElement("span",{className:Tt.a.formulaInWords},m.a.createElement("span",{className:Tt.a.formulaInWordsLabel},v.t("Formula"),":"),E," ".concat(b," "),d),m.a.createElement(c.c,{small:!0,onClick:a,disabled:t},p?v.t("Edit formula"):v.t("Add formula")))};var Dt=t(217),It=t.n(Dt);const{Field:Ft}=c.u,jt=({dataElement:e,categoryOptionCombo:a})=>{const[t,n]=Object(i.useState)(!1),l=a?"".concat(e.displayName," ").concat(a.displayName):"".concat(e.displayName," ").concat(v.t("default")),r=((e,a)=>{const t=e.id,n=null===a||void 0===a?void 0:a.code;return!n||"default"===n?"".concat(Ga,".").concat(t):"".concat(Ga,".").concat(t,"-").concat(n)})(e,a),s="".concat(r,".code"),o="".concat(r,".formula");return m.a.createElement("div",{className:It.a.container},m.a.createElement(Ft,{className:It.a.field,label:l,name:s,subscription:{value:!0,error:!0,invalid:!0,touched:!0}},e=>{let{input:a,meta:s}=e,i=Object(xe.a)(e,["input","meta"]);const d=a.value;return m.a.createElement(m.a.Fragment,null,m.a.createElement(c.m,Object.assign({},i,{className:It.a.codeField,input:a,meta:s,error:!!s.error})),m.a.createElement(Rt,{disabled:!d,baseName:r,formulaFieldName:o,onClick:()=>n(!0)}),t&&m.a.createElement(Ot,{baseName:r,combo:l,targetFieldName:o,onClose:()=>n(!1)}))}))};jt.defaultProps={categoryOptionCombo:null,formula:""};const{useField:xt}=c.u,Pt=()=>{const{input:e}=xt(Ta,{subscription:{value:!0}}),a=e.value,t=v.t("Required values notice");return a===Ka.value?m.a.createElement(Z,null,m.a.createElement(c.t,{warning:!0,title:t},v.t('Make sure all SMS short codes are provided when completeness method "'.concat(Ka.label,'" is chosen, otherwise received messages will not be processed.')))):a===Ja.value?m.a.createElement(Z,null,m.a.createElement(c.t,{warning:!0,title:t},v.t('Make sure at least one SMS short code is provided when completeness method "'.concat(Ja.label,'" is chosen, otherwise received messages will not be processed.')))):null};var Gt=t(218),Lt=t.n(Gt);const qt=({DE_COC_combinations:e})=>m.a.createElement("div",null,m.a.createElement(N,null,v.t("SMS short codes")),m.a.createElement(Pt,null),m.a.createElement("div",null,e.map(({dataElement:e,categoryOptionCombo:a})=>m.a.createElement(Z,{className:Lt.a.formRow,key:e.id+(null===a||void 0===a?void 0:a.id)},m.a.createElement(jt,{dataElement:e,categoryOptionCombo:a})))));qt.defaultProps={allRequired:!1};const{Field:Ut}=c.u,Vt=Object.values(n),Ht=()=>m.a.createElement(Ut,{dataTest:p("forms-fielddataset"),name:Ta,label:v.t("Completeness method"),component:c.x,options:Vt}),{Field:Bt}=c.u,zt=()=>m.a.createElement(Bt,{dataTest:p("commands-fieldcommandconfirmmessage"),name:Ha,label:v.t("Confirm message"),component:c.H}),{Field:Kt}=c.u,Jt=()=>m.a.createElement(Kt,{dataTest:p("forms-fieldcommanddefaultmessage"),name:ka,label:v.t("Reply message if no codes are sent (only the command)"),component:c.H}),{Field:Wt}=c.u,Yt=()=>m.a.createElement(Wt,{dataTest:p("forms-fieldcommandmorethanoneorgunitmessage"),name:Ra,label:v.t("More than one orgunit message"),component:c.H}),{Field:Qt}=c.u,Zt=()=>m.a.createElement(Qt,{required:!0,dataTest:p("commands-fieldcommandname"),name:Da,label:v.t("Name"),component:c.m,validate:Object(c.I)(c.K,c.J)}),{Field:Xt}=c.u,$t=()=>m.a.createElement(Xt,{dataTest:p("forms-fieldcommandnousermessage"),name:Ia,label:v.t("No user message"),component:c.H}),en={value:"KEY_VALUE_PARSER",label:v.t("Key value parser")},an={value:"J2ME_PARSER",label:v.t("J2ME parser")},tn={value:"ALERT_PARSER",label:v.t("Alert parser")},nn={value:"UNREGISTERED_PARSER",label:v.t("Unregistered parser")},ln={value:"TRACKED_ENTITY_REGISTRATION_PARSER",label:v.t("Tracked entity registration parser")},rn={value:"PROGRAM_STAGE_DATAENTRY_PARSER",label:v.t("Program stage data entry parser")},sn={value:"EVENT_REGISTRATION_PARSER",label:v.t("Event registration parser")},{Field:on}=c.u,cn=Object.values(l).sort((e,a)=>e.label<a.label?-1:e.label>a.label?1:0),mn=({disabled:e})=>m.a.createElement(on,{disabled:e,dataTest:p("forms-fieldcommandparser"),name:Fa,label:v.t("Parser"),component:c.x,options:cn});mn.defaultProps={disabled:!1};const{Field:dn}=c.u,un=()=>m.a.createElement(dn,{dataTest:p("forms-fieldcommandseparator"),name:Pa,label:v.t("Field separator"),component:c.m}),{Field:gn,useFormState:pn}=c.u,En={values:!0},bn=({id:e,displayName:a,valueType:t})=>{const{values:n}=pn({subscription:En}),l=n[Ga][e];return m.a.createElement(gn,{required:!0,name:"".concat(Ga,".").concat(e),label:a,component:c.m,format:e=>(null===e||void 0===e?void 0:e.code)||"",parse:n=>l?Object(ge.a)(Object(ge.a)({},l),{},{code:n}):{code:n,trackedEntityAttribute:{id:e,displayName:a,valueType:t}}})};var fn=t(219),yn=t.n(fn);const{Field:vn,useForm:Sn}=c.u,hn=({index:e})=>{const{change:a,getState:t}=Sn();return m.a.createElement("div",{key:e,className:yn.a.container},m.a.createElement(vn,{required:!0,className:yn.a.field,dataTest:p("@TODO"),label:v.t("Special character name"),name:"".concat(La,"[").concat(e,"].name"),component:c.m,validate:c.J}),m.a.createElement(vn,{required:!0,className:yn.a.field,dataTest:p("@TODO"),label:v.t("Special character value"),name:"".concat(La,"[").concat(e,"].value"),component:c.m,validate:c.J}),m.a.createElement(c.k,{label:"\xa0"},m.a.createElement(c.c,{className:yn.a.button,onClick:()=>{const n=t().values[La],l=[...n.slice(0,e),...n.slice(e+1)];a(La,l)}},v.t("Remove"))))},{Field:Cn}=c.u,wn=()=>m.a.createElement(Cn,{dataTest:p("forms-fieldcommandsuccessmessage"),name:qa,label:v.t("Success message"),component:c.H}),{Field:_n}=c.u,Nn=()=>m.a.createElement(_n,{type:"checkbox",dataTest:p("forms-fieldusecurrentperiodforreporting"),name:Ua,label:v.t("Use current period for reporting"),component:c.h}),{Field:On}=c.u,An=()=>m.a.createElement(On,{dataTest:p("forms-fieldcommandwrongformatmessage"),name:Va,label:v.t("Wrong format message"),component:c.H}),{Field:Tn}=c.u,kn=({programStageDataElements:e,smsCodes:a})=>m.a.createElement(m.a.Fragment,null,e.map(({dataElement:e})=>m.a.createElement(Tn,{key:e.id,name:"".concat(Ga,".").concat(e.id),label:e.displayName,component:c.m,format:e=>(null===e||void 0===e?void 0:e.code)||null,parse:t=>{const n=a[e.id];return Object(ge.a)(Object(ge.a)({},n),{},{code:t||"",dataElement:e})}}))),{Field:Mn}=c.u,Rn=({userGroups:e,loading:a,required:t,disabled:n,errorText:l})=>m.a.createElement(Mn,{disabled:n,error:!!l,validationText:l,required:t,loading:a,dataTest:p("forms-fielduserGroup"),name:"userGroup",label:v.t("Usergroup"),component:c.x,options:e,validate:t&&c.J});Rn.defaultProps={disabled:!1,loading:!1,required:!1,errorText:""};const Dn={userGroups:{resource:"userGroups",params:{paging:"false"}}},In=({required:e})=>{const{loading:a,error:t,data:n}=Object(Te.e)(Dn);if(a)return m.a.createElement(Rn,{required:e,loading:!0,showLoadingStatus:!0,userGroups:[]});if(t)return m.a.createElement(Rn,{required:e,disabled:!0,userGroups:[],errorText:t.message});const{userGroups:l}=n.userGroups,r=l.map(({id:e,displayName:a})=>({label:a,value:e}));return m.a.createElement(Rn,{required:e,userGroups:r})};In.defaultProps={required:!1};const{Form:Fn}=c.u,jn={smsCommand:{resource:"smsCommands",id:({commandId:e})=>e,params:{fields:["name","parserType","receivedMessage","userGroup[name,id]"]}}},xn=({commandId:e,onAfterChange:a,onCancel:t})=>{const n=Et({commandId:e,onAfterChange:a,replace:!0}),{loading:l,error:r,data:s}=Object(Te.e)(jn,{variables:{commandId:e}});if(l)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));if(r){const e=v.t("Something went wrong whilst loading the sms command");return m.a.createElement(c.t,{error:!0,title:e},r.message)}const{name:o,parserType:i,receivedMessage:d,userGroup:u}=s.smsCommand,g={name:o,parserType:i,receivedMessage:d,userGroup:u.id},E=[{value:u.id,label:u.name}];return m.a.createElement(Fn,{keepDirtyOnReinitialize:!0,onSubmit:n,initialValues:g},({handleSubmit:e,pristine:a})=>m.a.createElement("form",{onSubmit:e,"data-test":p("commands-commandunregisteredparserform")},m.a.createElement(Z,null,m.a.createElement(Zt,null)),m.a.createElement(Z,null,m.a.createElement(mn,{disabled:!0})),m.a.createElement(Z,null,m.a.createElement(Rn,{disabled:!0,userGroups:E})),m.a.createElement(Z,null,m.a.createElement(zt,null)),m.a.createElement(nt,{onCancel:()=>t(a)})))},{Field:Pn}=c.u,Gn=({programs:e,loading:a,required:t,disabled:n,errorText:l})=>m.a.createElement(Pn,{error:!!l,validationText:l,disabled:n,required:t,loading:a,dataTest:p("forms-fieldprogram"),name:"program",label:v.t("Program"),component:c.x,options:e,validate:t&&c.J,format:e=>(null===e||void 0===e?void 0:e.id)||null,parse:e=>({id:e})});Gn.defaultProps={disabled:!1,errorText:"",loading:!1,required:!1};const Ln={programs:{resource:"programs",params:({registration:e})=>{const a={paging:"false"};if("undefined"!==typeof e){const t=e?"programType:eq:WITH_REGISTRATION":"programType:eq:WITHOUT_REGISTRATION";a.filter=t}return a}}},qn=({required:e,registration:a})=>{const t={registration:a},{loading:n,error:l,data:r}=(e=>Object(Te.e)(Ln,{variables:{registration:e}}))({variables:t});if(n)return m.a.createElement(Gn,{required:e,loading:!0,showLoadingStatus:!0,programs:[]});if(l)return m.a.createElement(Gn,{required:e,disabled:!0,programs:[],errorText:l.message});const{programs:s}=r.programs,o=s.map(({id:e,displayName:a})=>({label:a,value:e}));return m.a.createElement(Gn,{required:e,programs:o})};qn.defaultProps={required:!1,registration:void 0};const{Form:Un}=c.u,Vn=e=>Object(ge.a)(Object(ge.a)({},e),{},{[Ga]:Object.values(e[Ga])}),Hn={smsCommand:{resource:"smsCommands",id:({commandId:e})=>e,params:{fields:["name","parserType","separator","defaultMessage","wrongFormatMessage","noUserMessage","moreThanOneOrgUnitMessage","successMessage","program[id,displayName,programTrackedEntityAttributes[trackedEntityAttribute[:all,id,displayName]]]","smsCodes[:all,trackedEntityAttribute[id,displayName,valueType]]"]}}},Bn=({commandId:e,onAfterChange:a,onCancel:t})=>{const n=Et({commandId:e,onAfterChange:a,formatCommand:Vn}),{loading:l,error:r,data:s}=Object(Te.e)(Hn,{variables:{commandId:e}});if(l)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));if(r){const e=v.t("Something went wrong whilst loading the sms command");return m.a.createElement(c.t,{error:!0,title:e},r.message)}const{name:o,parserType:i,program:d,separator:u,defaultMessage:g,wrongFormatMessage:p,noUserMessage:E,moreThanOneOrgUnitMessage:b,successMessage:f,smsCodes:y}=s.smsCommand,S=y.reduce((e,a)=>Object(ge.a)(Object(ge.a)({},e),{},{[a.trackedEntityAttribute.id]:a}),{}),h={name:o,parserType:i,program:d,separator:u,defaultMessage:g,wrongFormatMessage:p,noUserMessage:E,moreThanOneOrgUnitMessage:b,successMessage:f,smsCodes:S},C={value:d.id,label:d.displayName},w=d.programTrackedEntityAttributes.map(({trackedEntityAttribute:e})=>e).map(e=>{const{id:a,displayName:t,valueType:n}=e,l={id:a,displayName:t,valueType:n},r=S[a];return r&&(l.initialValue=r.code),l});return m.a.createElement(Un,{keepDirtyOnReinitialize:!0,onSubmit:n,initialValues:h},({handleSubmit:e,pristine:a})=>m.a.createElement("form",{onSubmit:e},m.a.createElement(Z,null,m.a.createElement(Zt,null)),m.a.createElement(Z,null,m.a.createElement(mn,{disabled:!0})),m.a.createElement(Z,null,m.a.createElement(Gn,{disabled:!0,programs:[C]})),m.a.createElement(Z,null,m.a.createElement(un,null)),m.a.createElement(Z,null,m.a.createElement(Jt,null)),m.a.createElement(Z,null,m.a.createElement(An,null)),m.a.createElement(Z,null,m.a.createElement($t,null)),m.a.createElement(Z,null,m.a.createElement(Yt,null)),m.a.createElement(Z,null,m.a.createElement(wn,null)),m.a.createElement(N,null,v.t("SMS short codes")),w.map(e=>m.a.createElement(Z,{key:e.id},m.a.createElement(bn,{id:e.id,displayName:e.displayName,valueType:e.valueType}))),m.a.createElement(nt,{onCancel:()=>t(a)})))},{Field:zn}=c.u,Kn=({programStages:e,disabled:a,loading:t,required:n,errorText:l})=>m.a.createElement(zn,{disabled:a,error:!!l,validationText:l,required:n,loading:t,dataTest:p("forms-fieldprogramStage"),name:"programStage",label:v.t("Program stage"),component:c.x,options:e,validate:n&&c.J,format:e=>(null===e||void 0===e?void 0:e.id)||null,parse:e=>({id:e})});Kn.defaultProps={disabled:!1,loading:!1,required:!1,errorText:""};const Jn={programStages:{resource:"programStages",params:({programId:e})=>({paging:"false",filter:e?"program.id:eq:".concat(e):void 0})}},Wn=({required:e,programId:a})=>{var t;const{loading:n,error:l,data:r,refetch:s}=(({programId:e,lazy:a})=>Object(Te.e)(Jn,{variables:{programId:e},lazy:a}))({lazy:!0});if(Object(i.useEffect)(()=>{a&&s({programId:a})},[a]),n)return m.a.createElement(Kn,{loading:!0,required:e,programStages:[]});if(l)return m.a.createElement(Kn,{disabled:!0,errorText:l.message,required:e,programStages:[]});if(!a||!r)return m.a.createElement(Kn,{disabled:!0,required:e,programStages:[]});const o=((null===r||void 0===r||null===(t=r.programStages)||void 0===t?void 0:t.programStages)||[]).map(({id:e,displayName:a})=>({label:a,value:e}));return m.a.createElement(Kn,{required:e,programStages:o})};Wn.defaultProps={required:!1};const Yn={smsCommand:{resource:"smsCommands",id:({id:e})=>e,params:{fields:["*","program[id,displayName]","programStage[id,displayName,programStageDataElements[dataElement[id,displayName]]]"],paging:"false"}}},{Form:Qn}=c.u,Zn=e=>Object(ge.a)(Object(ge.a)({},e),{},{[Ga]:Object.values(e[Ga])}),Xn=({commandId:e,onAfterChange:a,onCancel:t})=>{const{error:n,data:l}=(r=e,Object(Te.e)(Yn,{variables:{id:r}}));var r;const s=null===l||void 0===l?void 0:l.smsCommand,o=null===s||void 0===s?void 0:s.programStage.programStageDataElements,i=Et({commandId:e,onAfterChange:a,formatCommand:Zn});if(n){const e=v.t("Something went wrong whilst loading the command's details");return m.a.createElement(c.t,{error:!0,title:e},n.message)}if(!s)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));const d=(e=>{const a=e[Da],t=e[ja],n=e[xa],l=e[Pa],r=e[ka],s=e[Va],o=e[Ia],c=e[Ra],i=e[qa],m=e[Ga].reduce((e,a)=>Object(ge.a)(Object(ge.a)({},e),{},{[a.dataElement.id]:a}),{});return{[Da]:a,[Fa]:rn.value,[ja]:t,[xa]:n,[Pa]:l,[ka]:r,[Va]:s,[Ia]:o,[Ra]:c,[qa]:i,[Ga]:m}})(s),u={value:s.program.id,label:s.program.displayName},g={value:s.programStage.id,label:s.programStage.displayName};return m.a.createElement(Qn,{keepDirtyOnReinitialize:!0,onSubmit:i,initialValues:d},({handleSubmit:e,values:a,pristine:n})=>m.a.createElement("form",{onSubmit:e,"data-test":p("commands-commandeditprogramstagedataentryparserform")},m.a.createElement(Z,null,m.a.createElement(Zt,null)),m.a.createElement(Z,null,m.a.createElement(mn,{disabled:!0})),m.a.createElement(Z,null,m.a.createElement(Gn,{disabled:!0,programs:[u]})),m.a.createElement(Z,null,m.a.createElement(Kn,{disabled:!0,programStages:[g]})),m.a.createElement(Z,null,m.a.createElement(un,null)),m.a.createElement(Z,null,m.a.createElement(Jt,null)),m.a.createElement(Z,null,m.a.createElement(An,null)),m.a.createElement(Z,null,m.a.createElement($t,null)),m.a.createElement(Z,null,m.a.createElement(Yt,null)),m.a.createElement(Z,null,m.a.createElement(wn,null)),m.a.createElement(N,null,v.t("SMS short codes")),o&&m.a.createElement(Z,null,m.a.createElement(kn,{programStageDataElements:o,smsCodes:a[Ga]})),m.a.createElement(nt,{onCancel:()=>t(n)})))},$n={smsCommand:{resource:"smsCommands",id:({id:e})=>e,params:{fields:["*","dataset[id,displayName,dataSetElements[dataElement[id,displayName,categoryCombo[categoryOptionCombos[id,displayName,code]]]]"],paging:"false"}}},{Form:el,FormSpy:al}=c.u,tl=e=>{let a=!1;const t={},n=e[Ga],l=(n?Object.entries(n):[]).filter(([e,{code:a}])=>a);if(l.length){const e=(e=>e.reduce((a,t,n)=>{const[l,r]=t;if(a.includes(l))return a;const s=e.filter(([e,a],t)=>a.code===r.code&&t!==n);if(!s.length)return a;const o=s.reduce((e,[a])=>[...e,a],[l]);return[...a,...o]},[]))(l);if(e.length){a=!0;const n={};e.forEach(e=>{n[e]={code:v.t("Duplicate value!")}}),t[Ga]=t[Ga]||{},Object.assign(t[Ga],n)}}return a?t:void 0},nl=e=>{const a=e[Ga],t=Object.entries(a).map(([e,{code:a,formula:t,compulsory:n,optionId:l}])=>{const[r]=e.split("-"),s={code:a,compulsory:n,dataElement:{id:r}};return t&&(s.formula=t),l&&(s.optionId=l),s});return Object(ge.a)(Object(ge.a)({},e),{},{[Ga]:t})},ll=({commandId:e,onAfterChange:a,dataTest:t,initialCompletenessMethod:n,onCancel:l})=>{const{error:r,data:s}=(o=e,Object(Te.e)($n,{variables:{id:o}}));var o;const i=null===s||void 0===s?void 0:s.smsCommand,d=Et({commandId:e,onAfterChange:a,formatCommand:nl});if(r){const e=v.t("Something went wrong whilst loading the command's details");return m.a.createElement(c.t,{error:!0,title:e},r.message)}if(!i)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));const u={value:i.dataset.id,label:i.dataset.displayName},g=((e,a)=>{const t=e[Da],n=en.value,l={id:e.dataset.id},r=e[Pa],s=a||e[Ta]||Ka.value,o=e[Ua],c=e[ka],i=e[Va],m=e[Ia],d=e[Ra],u=e[qa],g=e[Ga].reduce((e,{code:a,compulsory:t,formula:n,optionId:l,dataElement:r})=>{const s=l<10?r.id:"".concat(r.id,"-").concat(l),o={code:a,compulsory:t,optionId:l};return n&&(o.formula=n),Object(ge.a)(Object(ge.a)({},e),{},{[s]:o})},{}),p=e[La]||[];return{[Da]:t,[Fa]:n,dataset:l,[Pa]:r,[Ta]:s,[Ua]:o,[ka]:c,[Va]:i,[Ia]:m,[Ra]:d,[qa]:u,smsCodes:g,specialCharacters:p}})(i,n),p=i.dataset.dataSetElements.reduce((e,{dataElement:a})=>{var t;const n=null===(t=a.categoryCombo)||void 0===t?void 0:t.categoryOptionCombo;if(!n)return[...e,{dataElement:a}];const l=n.map(e=>({dataElement:a,categoryOptionCombo:e}));return[...e,...l]},[]);return m.a.createElement(el,{keepDirtyOnReinitialize:!0,onSubmit:d,initialValues:g,validate:tl,subscription:{pristine:!0}},({handleSubmit:e,form:a,pristine:n})=>m.a.createElement("form",{onSubmit:e,"data-test":t},m.a.createElement(Z,null,m.a.createElement(Zt,null)),m.a.createElement(Z,null,m.a.createElement(mn,{disabled:!0})),m.a.createElement(Z,null,m.a.createElement(ft,{disabled:!0,dataSets:[u]})),m.a.createElement(Z,null,m.a.createElement(Ht,null)),m.a.createElement(Z,null,m.a.createElement(Nn,null)),m.a.createElement(Z,null,m.a.createElement(un,null)),m.a.createElement(Z,null,m.a.createElement(Jt,null)),m.a.createElement(Z,null,m.a.createElement(An,null)),m.a.createElement(Z,null,m.a.createElement($t,null)),m.a.createElement(Z,null,m.a.createElement(Yt,null)),m.a.createElement(Z,null,m.a.createElement(wn,null)),p&&m.a.createElement(qt,{DE_COC_combinations:p}),m.a.createElement(N,null,v.t("Special characters")),m.a.createElement(al,{subscription:{values:!0}},({values:e})=>m.a.createElement(m.a.Fragment,null,e[La].map((e,a)=>m.a.createElement(Z,{key:a},m.a.createElement(hn,{index:a}))))),m.a.createElement(za,null),m.a.createElement(nt,{onCancel:()=>l(n)})))},rl=({commandId:e,onAfterChange:a,onCancel:t})=>m.a.createElement(ll,{dataTest:p("smscommandkeyvalueparser-commandeditkeyvalueparserform"),commandId:e,onAfterChange:a,onCancel:t}),sl=({commandId:e,onAfterChange:a,onCancel:t})=>m.a.createElement(ll,{dataTest:p("smscommandkeyvalueparser-commandeditj2meparserform"),commandId:e,onAfterChange:a,onCancel:t,initialCompletenessMethod:Ja.value}),ol={smsCommand:{resource:"smsCommands",id:({id:e})=>e,params:{fields:["*","program[id,displayName]","programStage[id,displayName,programStageDataElements[id,dataElement[id,displayName]]"],paging:"false"}}},{Form:cl}=c.u,il=e=>Object(ge.a)(Object(ge.a)({},e),{},{[Ga]:Object.values(e[Ga])}),ml=({commandId:e,onAfterChange:a,onCancel:t})=>{const{error:n,data:{smsCommand:l}={}}=(r=e,Object(Te.e)(ol,{variables:{id:r}}));var r;const s=Et({commandId:e,onAfterChange:a,formatCommand:il});if(n){const e=v.t("Something went wrong whilst loading the command's details");return m.a.createElement(c.t,{error:!0,title:e},n.message)}if(!l)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));const o={value:l.program.id,label:l.program.displayName},i={value:l.programStage.id,label:l.programStage.displayName},d=l.programStage.programStageDataElements,u=(e=>{const a=e[Da],t=e[ja],n=e[xa],l=e[Pa],r=e[ka],s=e[Va],o=e[Ia],c=e[Ra],i=e[qa],m=e[Ga].reduce((e,a)=>Object(ge.a)(Object(ge.a)({},e),{},{[a.dataElement.id]:a}),{});return{[Da]:a,[Fa]:sn.value,[ja]:t,[xa]:n,[Pa]:l,[ka]:r,[Va]:s,[Ia]:o,[Ra]:c,[qa]:i,[Ga]:m}})(l);return m.a.createElement(cl,{keepDirtyOnReinitialize:!0,initialValues:u,onSubmit:s},({handleSubmit:e,values:a,pristine:n})=>m.a.createElement("form",{onSubmit:e},m.a.createElement(Z,null,m.a.createElement(Zt,null)),m.a.createElement(Z,null,m.a.createElement(mn,{disabled:!0})),m.a.createElement(Z,null,m.a.createElement(Gn,{disabled:!0,programs:[o]})),m.a.createElement(Z,null,m.a.createElement(Kn,{disabled:!0,programStages:[i]})),m.a.createElement(Z,null,m.a.createElement(un,null)),m.a.createElement(Z,null,m.a.createElement(Jt,null)),m.a.createElement(Z,null,m.a.createElement(An,null)),m.a.createElement(Z,null,m.a.createElement($t,null)),m.a.createElement(Z,null,m.a.createElement(Yt,null)),m.a.createElement(Z,null,m.a.createElement(wn,null)),m.a.createElement(N,null,v.t("SMS short codes")),d&&m.a.createElement(Z,null,m.a.createElement(kn,{programStageDataElements:d,smsCodes:a[Ga]})),m.a.createElement(nt,{onCancel:()=>t(n)})))},{Form:dl}=c.u,ul={smsCommand:{resource:"smsCommands",id:({commandId:e})=>e,params:{fields:["name","parserType","receivedMessage","userGroup[name,id]"]}}},gl=({commandId:e,onAfterChange:a,onCancel:t})=>{const n=Et({commandId:e,onAfterChange:a,replace:!0}),{loading:l,error:r,data:s}=Object(Te.e)(ul,{variables:{commandId:e}});if(l)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));if(r){const e=v.t("Something went wrong whilst loading the sms command");return m.a.createElement(c.t,{error:!0,title:e},r.message)}const{name:o,parserType:i,receivedMessage:d,userGroup:u}=s.smsCommand,g={name:o,parserType:i,receivedMessage:d,userGroup:u.id},E=[{value:u.id,label:u.name}];return m.a.createElement(dl,{keepDirtyOnReinitialize:!0,onSubmit:n,initialValues:g},({handleSubmit:e,pristine:a})=>m.a.createElement("form",{onSubmit:e,"data-test":p("commands-commandeditalertparserform")},m.a.createElement(Z,null,m.a.createElement(Zt,null)),m.a.createElement(Z,null,m.a.createElement(mn,{disabled:!0})),m.a.createElement(Z,null,m.a.createElement(Rn,{disabled:!0,userGroups:E})),m.a.createElement(Z,null,m.a.createElement(zt,null)),m.a.createElement(nt,{onCancel:()=>t(a)})))};var pl=t(220),El=t.n(pl);const bl="".concat("/sms-config/edit","/:id"),fl=()=>{const e=Object(o.g)(),{id:a}=Object(o.i)(),{loading:t,error:n,data:l}=(e=>Object(Te.e)(it,{variables:{id:e}}))(a),[r,s]=Object(i.useState)(!1);if(t)return m.a.createElement(c.f,null,m.a.createElement(c.i,null));if(n){const e=v.t("Something went wrong whilst loading commands");return m.a.createElement(c.t,{error:!0,title:e},n.message)}const d=null===l||void 0===l?void 0:l.smsCommand[Fa],u=(e=>{const a=rt.bind(null,e);return e&&a(en)?rl:e&&a(an)?sl:e&&a(tn)?gl:e&&a(rn)?Xn:e&&a(nn)?xn:e&&a(sn)?ml:e&&a(ln)?Bn:null})(d);return m.a.createElement("div",{className:El.a.container},m.a.createElement(C,null,v.t("Edit command")),u&&m.a.createElement(u,{commandId:a,onCancel:a=>a?e.goBack():s(!0),onAfterChange:()=>e.push(Al)}),r&&m.a.createElement(pe,{onConfirmCancel:()=>e.push(Al),onAbortCancel:()=>s(!1)}),!d&&m.a.createElement(c.t,{error:!0,title:v.t("Unrecognised parser type")},v.t("Could not find the requested parser type")))};var yl=t(221),vl=t.n(yl);const{Form:Sl,useForm:hl}=c.u,Cl=({handleSubmit:e,submitting:a})=>{(()=>{const e=hl(),[a,t]=Object(i.useState)(e.getState().values);Object(i.useEffect)(()=>e.subscribe(({values:n})=>{e.batch(()=>{const t=n[Fa],l=n.program,r=n.programStage,s=a.program,o=a[Fa];r&&(s&&l!==s||o&&t!==o)&&e.change("programStage",null)}),t(n)},{values:!0}),[a])})();const t=Object(o.g)(),n=hl(),{values:l}=n.getState(),r=l[Fa],s=l.program,d=r===en.value||r===an.value,u=r===tn.value||r===nn.value,g=r===ln.value||r===rn.value||r===sn.value,p=r===rn.value,E=r!==sn.value&&void 0;return m.a.createElement("div",{className:vl.a.container},m.a.createElement(C,null,v.t("Add command")),m.a.createElement("form",{onSubmit:e},m.a.createElement(Z,null,m.a.createElement(Zt,null)),m.a.createElement(Z,null,m.a.createElement(mn,null)),d&&m.a.createElement(Z,null,m.a.createElement(vt,null)),u&&m.a.createElement(Z,null,m.a.createElement(In,null)),g&&m.a.createElement(Z,null,m.a.createElement(qn,{registration:E})),p&&m.a.createElement(Z,null,m.a.createElement(Wn,{programId:s||""})),m.a.createElement(c.d,null,m.a.createElement(c.c,{primary:!0,type:"submit",icon:a?m.a.createElement(c.i,{small:!0}):null,disabled:a},v.t("Add command")),m.a.createElement(c.c,{onClick:()=>t.goBack()},v.t("Cancel")))))},wl=()=>{const e=Object(o.g)(),[a]=(({onComplete:e,onError:a})=>Object(Te.d)(st,{onComplete:e,onError:a}))({onComplete:()=>e.push(Al)});return m.a.createElement(Sl,{onSubmit:e=>a(e)},({handleSubmit:e,submitting:a})=>m.a.createElement(Cl,{handleSubmit:e,submitting:a}))};var _l=t(222),Nl=t.n(_l);const Ol=v.t("Commands"),Al="/sms-config",Tl=()=>{var e,a,t,n,l,s;const d=Object(o.g)(),[u,g]=Object(i.useState)([]),[E,b]=Object(i.useState)(!1),{loading:f,error:y,data:S,refetch:h}=Object(Te.e)(mt),[w,{loading:_,error:N}]=ct();if(f)return m.a.createElement("div",{"data-test":p("views-smscommandlist")},m.a.createElement(C,null,Ol),m.a.createElement(c.f,null,m.a.createElement(c.i,null)));const O=y||N;if(O){const e=v.t("Something went wrong whilst performing the requested operation");return m.a.createElement("div",{"data-test":p("views-smscommandlist")},m.a.createElement(C,null,Ol),m.a.createElement(c.t,{error:!0,title:e},O.message))}const A=u.length===(null===S||void 0===S||null===(e=S.smsCommands)||void 0===e||null===(a=e.smsCommands)||void 0===a?void 0:a.length),T=(null===S||void 0===S||null===(t=S.smsCommands)||void 0===t||null===(n=t.smsCommands)||void 0===n?void 0:n.length)>0;return m.a.createElement("div",{"data-test":p("views-smscommandlist"),className:Nl.a.container},m.a.createElement(C,null,Ol),m.a.createElement(le,null,v.t("SMS commands process SMS messages received by a DHIS2 instance, taking certain actions depending on the command and message content. Multiple SMS commands can be set up to process and handle data in multiple ways. Add and configure SMS commands below. Read about SMS commands in the DHIS2 documentation.")),m.a.createElement(Ze,{addLabel:v.t("Add command"),deleteLabel:v.t("Delete selected"),dataTest:"views-smscommandlist",onAddClick:()=>d.push("/sms-config/new"),onDeleteClick:()=>b(!0),disableAdd:_,disableDelete:!u.length||_}),E&&m.a.createElement(lt,{onCancelClick:()=>b(!1),onDeleteClick:async()=>{const e=u.map(({id:e})=>e);await w({ids:e}),g([]),b(!1),h()}}),m.a.createElement(c.z,null,m.a.createElement(c.E,null,m.a.createElement(c.G,null,m.a.createElement(c.C,null,m.a.createElement(c.g,{checked:A,onChange:()=>{var e;const a=null===S||void 0===S||null===(e=S.smsCommands)||void 0===e?void 0:e.smsCommands;a&&(u.length===a.length?g([]):g(a.map(({id:e,displayName:a})=>({id:e,displayName:a}))))}})),m.a.createElement(c.C,null,v.t("Sms command")),m.a.createElement(c.C,null,v.t("Parser")),m.a.createElement(c.C,null))),m.a.createElement(c.A,null,T?null===S||void 0===S||null===(l=S.smsCommands)||void 0===l||null===(s=l.smsCommands)||void 0===s?void 0:s.map(({id:e,displayName:a,parserType:t})=>m.a.createElement(c.F,{key:e},m.a.createElement(c.B,{className:Nl.a.checkbox},m.a.createElement(c.g,{checked:!!u.find(({id:a})=>e===a),onChange:()=>(e=>{const{id:a}=e;if(u.find(({id:e})=>a===e)){const e=u.findIndex(({id:e})=>a===e);return g([...u.slice(0,e),...u.slice(e+1)])}return g([...u,e])})({id:e,displayName:a})})),m.a.createElement(c.B,null,a),m.a.createElement(c.B,null,(e=>{const a=Object.values(r).find(({value:a})=>a===e);return(null===a||void 0===a?void 0:a.label)||e})(t)),m.a.createElement(c.B,{className:Nl.a.editButtonCell},m.a.createElement(c.c,{onClick:()=>d.push("".concat("/sms-config/edit","/").concat(e))},v.t("Edit"))))):m.a.createElement(c.F,null,m.a.createElement(c.B,{colSpan:"4",className:Nl.a.noResults},v.t("No commands to display"))))))},kl={DELIVERED:f.a.t("Delivered"),ERROR:f.a.t("Error"),FAILED:f.a.t("Failed"),OUTBOUND:f.a.t("Outbound"),PENDING:f.a.t("Pending"),SCHEDULED:f.a.t("Scheduled"),SENT:f.a.t("Sent")};var Ml=t(223),Rl=t.n(Ml);var Dl=({sms:e,toggleSelected:a,isSelected:t})=>{const{message:n,status:l,date:r,id:s}=e,o=null===e.recipients?[]:e.recipients;return m.a.createElement(c.F,null,m.a.createElement(c.B,null,m.a.createElement(c.g,{onChange:()=>a(s),checked:t})),m.a.createElement(c.B,null,n),m.a.createElement(c.B,null,o.map((e,a,t)=>m.a.createElement("span",{key:e+a,className:Rl.a.recipient},e,a!==t.length-1&&", "))),m.a.createElement(c.B,null,kl[l]),m.a.createElement(c.B,null,ba()(r).format("MMMM Do YYYY, h:mm:ss a")))};const Il=()=>{throw new Error("RefetchSms consumer needs to have a valid Provider as parent")};var Fl=Object(i.createContext)({refetch:Il,refetchAndClear:Il}),jl=t(224),xl=t.n(jl);const Pl=["10","20","30","40","50","100"];var Gl=({pager:e})=>{const{refetchAndClear:a}=Object(i.useContext)(Fl),t=e=>{a({page:e})},{page:n,pageCount:l,pageSize:r,total:s}=e,o=Math.min((n-1)*r+1,s),d=Math.min(o+r-1,s),u=Array.from({length:l},(e,a)=>(a+1).toString());return m.a.createElement("div",{className:xl.a.container},m.a.createElement("div",{className:xl.a.left},m.a.createElement("span",null,v.t("Show")),m.a.createElement(c.v,{dense:!0,selected:r.toString(),onChange:({selected:e})=>{a({pageSize:e,page:1})}},Pl.map(e=>m.a.createElement(c.y,{key:e,value:e,label:e}))),m.a.createElement("span",null,v.t("per page"))),m.a.createElement("div",{className:xl.a.right},m.a.createElement("div",{className:xl.a.amount},v.t("Viewing {{firstItem}}-{{lastItem}} of {{total}}",{firstItem:o,lastItem:d,total:s})),m.a.createElement(c.c,{small:!0,disabled:1===n,onClick:()=>t(n-1)},v.t("Previous")),m.a.createElement("div",{className:xl.a.pageselection},m.a.createElement("div",null,v.t("Page")),m.a.createElement(c.v,{dense:!0,selected:n.toString(),onChange:({selected:e})=>{t(e)}},u.map(e=>m.a.createElement(c.y,{key:e,value:e,label:e}))),m.a.createElement("div",null,v.t("of {{pageCount}}",{pageCount:l}))),m.a.createElement(c.c,{small:!0,disabled:n===l,onClick:()=>t(n+1)},v.t("Next"))))},Ll=t(225),ql=t.n(Ll);var Ul=({smses:e,toggleSelected:a,toggleAll:t,allSelected:n,selected:l,pager:r})=>m.a.createElement(c.z,null,m.a.createElement(c.E,null,m.a.createElement(c.G,null,m.a.createElement(c.C,null,m.a.createElement(c.g,{disabled:0===e.length,onChange:t,checked:n})),m.a.createElement(c.C,null,v.t("Message")),m.a.createElement(c.C,null,v.t("Recipients")),m.a.createElement(c.C,null,v.t("Status")),m.a.createElement(c.C,null,v.t("Date")))),m.a.createElement(c.A,null,0===e.length?m.a.createElement(c.F,null,m.a.createElement(c.B,{colSpan:"7",className:ql.a.noResults},v.t("No SMSes to display"))):e.map(e=>m.a.createElement(Dl,{key:e.id,sms:e,isSelected:l.includes(e.id),toggleSelected:a}))),m.a.createElement(c.D,null,m.a.createElement(c.F,null,m.a.createElement(c.B,{colSpan:"7"},m.a.createElement(Gl,{pager:r})))));const Vl=e=>"ALL"===e?"":e,Hl=[{label:v.t("All"),value:"ALL"},...["DELIVERED","ERROR","FAILED","OUTBOUND","PENDING","SCHEDULED","SENT"].map(e=>({label:kl[e],value:e}))];var Bl=({status:e,setStatus:a})=>{const{refetchAndClear:t}=Object(i.useContext)(Fl);return m.a.createElement(c.w,{label:v.t("Filter by status"),inputWidth:"200px",onChange:({selected:e})=>{a(e),t({status:Vl(e),page:1})},selected:e},Hl.map(({label:e,value:a})=>m.a.createElement(c.y,{key:e,label:e,value:a})))};const zl={resource:"sms/outbound",params:({ids:e})=>({ids:e}),type:"delete"};var Kl=({selected:e})=>{const a=0===e.length,t=e.join(","),{addAlert:n}=Object(i.useContext)(g),{refetchAndClear:l}=Object(i.useContext)(Fl),[r,{loading:s}]=Object(Te.d)(zl,{onComplete:()=>{l()},onError:e=>{n({type:"critical",message:e.message})}});return m.a.createElement(c.c,{destructive:!0,disabled:a||s,onClick:()=>r({ids:t})},v.t("Delete selected"))},Jl=t(226),Wl=t.n(Jl);const Yl=v.t("Sent"),Ql="/sent",Zl={sms:{resource:"sms/outbound",params:({status:e,page:a,pageSize:t})=>{const n={pageSize:t,page:a,fields:["id","message","status","date","recipients"]};return e?Object(ge.a)(Object(ge.a)({},n),{},{filter:"status:eq:".concat(e)}):n}}},Xl=()=>{var e;const[a,t]=Object(i.useState)([]),[n,l]=Object(i.useState)("ALL"),{loading:r,error:s,data:o,refetch:d}=Object(Te.e)(Zl,{variables:{status:Vl(n),pageSize:10,page:1}});if(r)return m.a.createElement(m.a.Fragment,null,m.a.createElement(C,null,Yl),m.a.createElement(c.f,null,m.a.createElement(c.i,null)));if(s){const e=v.t("Something went wrong whilst loading sent SMSes");return m.a.createElement(m.a.Fragment,null,m.a.createElement(C,null,Yl),m.a.createElement(c.t,{error:!0,title:e},s.message))}const u=(e=>e.map(e=>e.id))(o.sms.outboundsmss),g=((e,a)=>{const t=0===e.length,n=e.length!==a.length;return!t&&!n&&e.every(e=>a.includes(e))})(u,a),p=(({selected:e,setSelected:a})=>t=>{if(e.includes(t)){const n=e.filter(e=>e!=t);a(n)}})({selected:a,setSelected:t}),E=(({allSelected:e,setSelected:a,allIds:t})=>()=>a(e?[]:t))({allSelected:g,setSelected:t,allIds:u}),b=(({selected:e,setSelected:a})=>t=>{if(e.includes(t)){const n=e.filter(e=>e!==t);return a(n)}return a([...e,t])})({selected:a,setSelected:t}),f={refetch:d,refetchAndClear:e=>{t([]),d(e)}},y=(null===o||void 0===o||null===(e=o.sms)||void 0===e?void 0:e.outboundsmss)||[];return m.a.createElement("div",{className:Wl.a.container},m.a.createElement(Fl.Provider,{value:f},m.a.createElement(C,null,Yl),m.a.createElement("div",{className:Wl.a.header},m.a.createElement(Bl,{status:n,setStatus:l}),m.a.createElement("div",{className:Wl.a.headerRight},m.a.createElement(Kl,{selected:a}))),m.a.createElement(Ul,{smses:y,cleanSelected:p,allSelected:g,selected:a,toggleSelected:b,toggleAll:E,pager:o.sms.pager})))};var $l=t(227),er=t.n($l);const ar=({label:e,path:a,exactMatch:t})=>{const n=Object(o.g)(),l=((e,a)=>{const t=Object(o.j)(e);return!!t&&(!a||t.isExact)})(a,t);return m.a.createElement(c.o,{className:er.a.item,onClick:()=>n.push(a),active:l,label:e,dataTest:p("navigation-navigationitem")})};ar.defualtProps={exactMatch:!1};const tr=()=>m.a.createElement(c.n,{dataTest:p("navigation-navigation")},m.a.createElement(ar,{path:"/",label:"Overview",exactMatch:!0}),m.a.createElement(ar,{path:ea,label:"Gateway configuration"}),m.a.createElement(ar,{path:Al,label:Ol}),m.a.createElement(ar,{path:Ql,label:Yl}),m.a.createElement(ar,{path:la,label:na}));a.default=()=>m.a.createElement(E,null,m.a.createElement(c.j,{spacers:!0,colors:!0}),m.a.createElement(s.a,null,m.a.createElement("div",{className:u.a.container,"data-test":p("app")},m.a.createElement("div",{className:u.a.sidebar},m.a.createElement(tr,null)),m.a.createElement("main",{className:u.a.content},m.a.createElement(o.d,null,m.a.createElement(o.b,{exact:!0,path:"/",component:R}),"",m.a.createElement(o.b,{exact:!0,path:ea,component:aa}),m.a.createElement(o.b,{exact:!0,path:fe,component:ye}),m.a.createElement(o.b,{exact:!0,path:"/sms-gateway/new",component:We}),"",m.a.createElement(o.b,{exact:!0,path:Al,component:Tl}),m.a.createElement(o.b,{exact:!0,path:bl,component:fl}),m.a.createElement(o.b,{exact:!0,path:"/sms-config/new",component:wl}),"",m.a.createElement(o.b,{exact:!0,path:Ql,component:Xl}),"",m.a.createElement(o.b,{exact:!0,path:la,component:Aa}),m.a.createElement(o.a,{from:"*",to:"/"}))))))}}]);
//# sourceMappingURL=app.bb113546.chunk.js.map